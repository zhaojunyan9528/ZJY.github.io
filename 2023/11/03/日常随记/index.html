<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="2023-11-03&#x2F;sockjs-node&#x2F;info?t&#x3D;${时间戳}当运行npm run dev启动项目后，在浏览器的network中会自动持续发送&#x2F;sockjs-node&#x2F;info?t&#x3D;$&amp;#123;时间戳&amp;#125;请求。 sockjs-node是什么？sockjs-node是一个JavaScript库，提供跨浏览器的API，创建了一个低延迟、全双工的浏览器和web服务器之间的通道。在项目">
<meta property="og:type" content="article">
<meta property="og:title" content="日常随记">
<meta property="og:url" content="https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/index.html">
<meta property="og:site_name" content="ZJY">
<meta property="og:description" content="2023-11-03&#x2F;sockjs-node&#x2F;info?t&#x3D;${时间戳}当运行npm run dev启动项目后，在浏览器的network中会自动持续发送&#x2F;sockjs-node&#x2F;info?t&#x3D;$&amp;#123;时间戳&amp;#125;请求。 sockjs-node是什么？sockjs-node是一个JavaScript库，提供跨浏览器的API，创建了一个低延迟、全双工的浏览器和web服务器之间的通道。在项目">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://zhaojunyan9528.github.io/ZJY.github.io/images/objectbase.png">
<meta property="og:image" content="https://zhaojunyan9528.github.io/ZJY.github.io/images/objectcall.png">
<meta property="og:image" content="https://cn.vuejs.org/assets/lifecycle_zh-CN.FtDDVyNA.png">
<meta property="og:image" content="https://zhaojunyan9528.github.io/ZJY.github.io/images/lifestycle.png">
<meta property="og:image" content="https://zhaojunyan9528.github.io/ZJY.github.io/images/image-20240121173248736.png">
<meta property="og:image" content="https://zhaojunyan9528.github.io/ZJY.github.io/">
<meta property="og:image" content="https://zhaojunyan9528.github.io/ZJY.github.io/images/vuex.png">
<meta property="article:published_time" content="2023-11-03T09:49:54.000Z">
<meta property="article:modified_time" content="2024-04-02T09:42:45.444Z">
<meta property="article:author" content="ZJY">
<meta property="article:tag" content="+ 前端">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zhaojunyan9528.github.io/ZJY.github.io/images/objectbase.png">
    
    
      
        
          <link rel="shortcut icon" href="/ZJY.github.io/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/ZJY.github.io/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/ZJY.github.io/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>日常随记</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/ZJY.github.io/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/ZJY.github.io/css/rtl.css">

    
    <!-- rss -->
    
    
<meta name="generator" content="Hexo 5.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/ZJY.github.io/">首页</a></li>
         
          <li><a href="/ZJY.github.io/archives/">归档</a></li>
         
          <li><a href="/ZJY.github.io/tags">标签</a></li>
         
          <li><a href="/ZJY.github.io/categories">分类</a></li>
         
          <li><a href="/ZJY.github.io/search/">搜索</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/ZJY.github.io/2023/12/07/%E5%B8%83%E5%B1%80%E5%92%8C%E5%8C%85%E5%90%AB%E5%9D%97/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/ZJY.github.io/2023/09/27/%E8%AE%B0%E6%89%93%E5%8C%85%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BALast-few-GCs%EF%BC%88FATAL-ERROR-Reached-heap-limit-Allocation-failed-JavaScript-heap-out-of-memory%EF%BC%89/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">上一篇</span>
      <span id="i-next" class="info" style="display:none;">下一篇</span>
      <span id="i-top" class="info" style="display:none;">返回顶部</span>
      <span id="i-share" class="info" style="display:none;">分享文章</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&text=日常随记"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&title=日常随记"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&is_video=false&description=日常随记"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=日常随记&body=Check out this article: https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&title=日常随记"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&title=日常随记"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&title=日常随记"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&title=日常随记"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&name=日常随记&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&t=日常随记"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#2023-11-03"><span class="toc-number">1.</span> <span class="toc-text">2023-11-03</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#sockjs-node-info-t-%E6%97%B6%E9%97%B4%E6%88%B3"><span class="toc-number">1.1.</span> <span class="toc-text">&#x2F;sockjs-node&#x2F;info?t&#x3D;${时间戳}</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#postinstall%E5%B9%B2%E4%BB%80%E4%B9%88%E7%9A%84%EF%BC%9F%EF%BC%9F%EF%BC%9F"><span class="toc-number">1.2.</span> <span class="toc-text">postinstall干什么的？？？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E6%89%A9%E5%B1%95%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">1.3.</span> <span class="toc-text">数组扩展运算符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2023-11-22"><span class="toc-number">2.</span> <span class="toc-text">2023-11-22</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF"><span class="toc-number">2.1.</span> <span class="toc-text">事件循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3js%E4%B8%AD%E7%9A%84%E5%BC%82%E6%AD%A5%EF%BC%9F"><span class="toc-number">2.2.</span> <span class="toc-text">如何理解js中的异步？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#js%E4%B8%AD%E8%AE%A1%E6%97%B6%E5%99%A8%E8%83%BD%E5%81%9A%E5%88%B0%E7%B2%BE%E5%87%86%E8%AE%A1%E6%97%B6%E5%90%97%EF%BC%9F"><span class="toc-number">2.3.</span> <span class="toc-text">js中计时器能做到精准计时吗？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E6%B8%B2%E6%9F%93%E5%8E%9F%E7%90%86"><span class="toc-number">2.4.</span> <span class="toc-text">浏览器的渲染原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%A7%A3%E6%9E%90HTML"><span class="toc-number">2.4.1.</span> <span class="toc-text">1.解析HTML</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E6%A0%B7%E5%BC%8F%E8%AE%A1%E7%AE%97-recalculate-style"><span class="toc-number">2.4.2.</span> <span class="toc-text">2、样式计算+ recalculate style</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E5%B8%83%E5%B1%80-Layout"><span class="toc-number">2.4.3.</span> <span class="toc-text">3、布局-Layout</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E5%88%86%E5%B1%82"><span class="toc-number">2.4.4.</span> <span class="toc-text">4、分层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E3%80%81%E7%BB%98%E5%88%B6"><span class="toc-number">2.4.5.</span> <span class="toc-text">5、绘制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%E3%80%81%E5%88%86%E5%9D%97"><span class="toc-number">2.4.6.</span> <span class="toc-text">6、分块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E5%85%89%E6%A0%85%E5%8C%96"><span class="toc-number">2.4.7.</span> <span class="toc-text">7.光栅化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-%E7%94%BB"><span class="toc-number">2.4.8.</span> <span class="toc-text">8.画</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFreflow%EF%BC%9F"><span class="toc-number">2.5.</span> <span class="toc-text">什么是reflow？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFrepaint%EF%BC%9F"><span class="toc-number">2.6.</span> <span class="toc-text">什么是repaint？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88transform%E7%9A%84%E6%95%88%E7%8E%87%E9%AB%98%EF%BC%9F"><span class="toc-number">2.7.</span> <span class="toc-text">为什么transform的效率高？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2023-11-27"><span class="toc-number">3.</span> <span class="toc-text">2023-11-27</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%81%B0%E9%98%B6%E6%BB%A4%E9%95%9C"><span class="toc-number">3.1.</span> <span class="toc-text">1.灰阶滤镜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-js%E5%AE%9E%E7%8E%B0%E6%97%A0%E9%99%90%E5%BE%AA%E7%8E%AF%E8%BD%AE%E6%92%AD%E5%9B%BE"><span class="toc-number">3.2.</span> <span class="toc-text">2.js实现无限循环轮播图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-sticky%E5%AE%9A%E4%BD%8D"><span class="toc-number">3.3.</span> <span class="toc-text">3.sticky定位</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-visibilitychange-%E7%A6%BB%E5%BC%80-%E8%BF%9B%E5%85%A5%E6%A0%87%E7%AD%BE%E9%A1%B5%E4%BA%8B%E4%BB%B6-%E9%A1%B5%E9%9D%A2%E5%8F%AF%E8%A7%81%E5%BA%A6"><span class="toc-number">3.4.</span> <span class="toc-text">4.visibilitychange 离开&#x2F;进入标签页事件-页面可见度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E9%9B%B6%E5%AE%BD%E5%AD%97%E7%AC%A6"><span class="toc-number">3.5.</span> <span class="toc-text">5.零宽字符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%B1%82%E5%92%8C"><span class="toc-number">3.6.</span> <span class="toc-text">6.求和</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E6%96%87%E5%AD%97%E6%8F%8F%E8%BE%B9text-stroke"><span class="toc-number">3.7.</span> <span class="toc-text">7.文字描边text-stroke</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-js%E7%B1%BB%E9%87%8C%E5%88%9B%E5%BB%BA%E7%A7%81%E6%9C%89%E5%AD%97%E6%AE%B5"><span class="toc-number">3.8.</span> <span class="toc-text">8.js类里创建私有字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E4%B8%8B%E6%8B%89%E8%8F%9C%E5%8D%95%E7%9A%84%E8%BF%87%E6%B8%A1%E6%95%88%E6%9E%9C"><span class="toc-number">3.9.</span> <span class="toc-text">9.下拉菜单的过渡效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E8%B7%A8%E5%9F%9Fcors"><span class="toc-number">3.10.</span> <span class="toc-text">10.跨域cors</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E8%AF%B7%E6%B1%82"><span class="toc-number">3.10.1.</span> <span class="toc-text">简单请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E8%AF%B7%E6%B1%82%E7%9A%84%E4%BA%A4%E4%BA%92%E8%A7%84%E8%8C%83"><span class="toc-number">3.10.2.</span> <span class="toc-text">简单请求的交互规范</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9C%80%E8%A6%81%E9%A2%84%E6%A3%80%E7%9A%84%E8%AF%B7%E6%B1%82"><span class="toc-number">3.10.3.</span> <span class="toc-text">需要预检的请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%99%84%E5%B8%A6%E8%BA%AB%E4%BB%BD%E5%87%AD%E8%AF%81%E7%9A%84%E8%AF%B7%E6%B1%82"><span class="toc-number">3.10.4.</span> <span class="toc-text">附带身份凭证的请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A5%E5%85%85"><span class="toc-number">3.10.5.</span> <span class="toc-text">补充</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E8%A7%A3%E6%9E%90url%E4%B8%AD%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-number">3.11.</span> <span class="toc-text">10.解析url中的参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E7%94%9F%E6%88%90%E9%9A%8F%E6%9C%BA%E9%A2%9C%E8%89%B2"><span class="toc-number">3.12.</span> <span class="toc-text">11.生成随机颜色</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-js%E7%9A%84atob%E5%92%8Cbtoa%E5%87%BD%E6%95%B0"><span class="toc-number">3.13.</span> <span class="toc-text">12.js的atob和btoa函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-%E5%88%A4%E6%96%AD%E4%B8%80%E4%B8%AA%E5%80%BC%E6%98%AF%E5%90%A6%E6%98%AFPromise-Like%EF%BC%9F"><span class="toc-number">3.14.</span> <span class="toc-text">13.判断一个值是否是Promise Like？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AAPromise"><span class="toc-number">3.15.</span> <span class="toc-text">14.手写一个Promise</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-%E8%AF%AD%E4%B9%89%E5%8C%96%E7%89%88%E6%9C%AC"><span class="toc-number">3.16.</span> <span class="toc-text">15.语义化版本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-axios"><span class="toc-number">3.17.</span> <span class="toc-text">16.axios</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-%E6%95%B0%E6%8D%AE%E5%9F%8B%E7%82%B9"><span class="toc-number">3.18.</span> <span class="toc-text">17.数据埋点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-web%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-number">3.19.</span> <span class="toc-text">18.web性能指标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-%E4%BB%8E%E8%A7%86%E9%A2%91%E6%96%87%E4%BB%B6%E4%B8%AD%E6%8F%90%E5%8F%96%E7%94%BB%E9%9D%A2%E5%B8%A7"><span class="toc-number">3.20.</span> <span class="toc-text">19.从视频文件中提取画面帧</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-ESMoudle%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">3.21.</span> <span class="toc-text">20.ESMoudle的工作原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-defineProperty%E5%92%8Cproxy"><span class="toc-number">3.22.</span> <span class="toc-text">21.defineProperty和proxy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%B8%8E%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2"><span class="toc-number">3.23.</span> <span class="toc-text">22.垃圾回收与内存泄露</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-%E8%A7%A3%E6%9E%90DOM%E6%A0%91"><span class="toc-number">3.24.</span> <span class="toc-text">23.解析DOM树</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-%E5%A4%A7%E6%96%87%E4%BB%B6%E5%88%87%E7%89%87%E4%B8%8A%E4%BC%A0"><span class="toc-number">3.25.</span> <span class="toc-text">22. 大文件切片上传</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95"><span class="toc-number">3.26.</span> <span class="toc-text">23.单点登录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#24-LRU%E7%BC%93%E5%AD%98%E7%BD%AE%E6%8D%A2%E7%AE%97%E6%B3%95"><span class="toc-number">3.27.</span> <span class="toc-text">24.LRU缓存置换算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-%E5%88%A4%E6%96%AD%E6%98%AF%E4%B8%8D%E6%98%AF%E6%95%B0%E7%BB%84"><span class="toc-number">3.28.</span> <span class="toc-text">25.判断是不是数组</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Object-prototype-toString-call"><span class="toc-number">3.28.1.</span> <span class="toc-text">1.Object.prototype.toString.call([])</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-instanceof-Array"><span class="toc-number">3.28.2.</span> <span class="toc-text">2.[] instanceof Array</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-Array-isArray"><span class="toc-number">3.28.3.</span> <span class="toc-text">3.Array.isArray([])</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-Reflect%E7%9A%84%E6%9C%AC%E8%B4%A8"><span class="toc-number">3.29.</span> <span class="toc-text">26.Reflect的本质</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27-img%E7%9A%84srcset%E3%80%81size"><span class="toc-number">3.30.</span> <span class="toc-text">27.img的srcset、size</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#28-es2023%E4%B8%AD%E7%9A%84%E6%95%B0%E7%BB%84%E7%BA%AF%E5%87%BD%E6%95%B0"><span class="toc-number">3.31.</span> <span class="toc-text">28.es2023中的数组纯函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#29-%E5%8A%A8%E6%80%81%E6%89%A7%E8%A1%8Cjs"><span class="toc-number">3.32.</span> <span class="toc-text">29.动态执行js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#node%E6%A8%A1%E5%9D%97%E6%9F%A5%E6%89%BE%E7%AD%96%E7%95%A5"><span class="toc-number">3.33.</span> <span class="toc-text">node模块查找策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue%E7%8A%B6%E6%80%81%E4%BB%93%E5%BA%93%E6%8C%81%E4%B9%85%E5%8C%96%EF%BC%9Avuex%E3%80%81pina"><span class="toc-number">3.34.</span> <span class="toc-text">vue状态仓库持久化：vuex、pina</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#css%E9%80%89%E6%8B%A9%E5%99%A8focus-within%E3%80%81has%E3%80%81-first-letter%E3%80%81selection"><span class="toc-number">3.35.</span> <span class="toc-text">css选择器focus-within、has、 first-letter、selection</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E3%80%81%E6%96%87%E4%BB%B6%E5%A4%B9%E3%80%81%E6%8B%96%E6%8B%BD%E4%B8%8A%E4%BC%A0"><span class="toc-number">3.36.</span> <span class="toc-text">文件上传、文件夹、拖拽上传</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue%E7%BB%84%E5%BB%BA%E5%91%BD%E5%90%8D%E8%A7%84%E8%8C%83"><span class="toc-number">3.37.</span> <span class="toc-text">vue组建命名规范</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E8%87%AA%E5%8A%A8%E6%92%AD%E6%94%BE%E7%AD%96%E7%95%A5"><span class="toc-number">3.38.</span> <span class="toc-text">浏览器自动播放策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#web-api"><span class="toc-number">3.39.</span> <span class="toc-text">web api</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E5%AD%97%E9%9D%A2%E9%87%8F"><span class="toc-number">3.40.</span> <span class="toc-text">数字字面量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%8F%E6%9C%BA%E6%95%B0"><span class="toc-number">3.41.</span> <span class="toc-text">随机数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-number">3.42.</span> <span class="toc-text">数字格式化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%82%E5%8F%A0%E8%A7%84%E5%88%99"><span class="toc-number">3.43.</span> <span class="toc-text">层叠规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%83%E5%B0%94%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.44.</span> <span class="toc-text">布尔类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97"><span class="toc-number">3.45.</span> <span class="toc-text">赋值运算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#js%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%92%8Ctypeof"><span class="toc-number">3.46.</span> <span class="toc-text">js数据类型和typeof</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ssr%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%B8%B2%E6%9F%93"><span class="toc-number">3.47.</span> <span class="toc-text">ssr服务端渲染</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">3.48.</span> <span class="toc-text">作用域</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE"><span class="toc-number">3.49.</span> <span class="toc-text">作用域链</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#webpack"><span class="toc-number">3.50.</span> <span class="toc-text">webpack</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E5%9E%8B%E7%9A%84%E4%BD%9C%E7%94%A8%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">3.51.</span> <span class="toc-text">原型的作用是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Promise%E8%A7%A3%E5%86%B3%E4%BA%86%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98%EF%BC%9F"><span class="toc-number">3.52.</span> <span class="toc-text">Promise解决了什么问题？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#async-await"><span class="toc-number">3.53.</span> <span class="toc-text">async await</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue3%E5%B0%8F%E8%AE%B0"><span class="toc-number">4.</span> <span class="toc-text">vue3小记</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%98%E7%82%B9%E7%89%B9%E6%80%A7"><span class="toc-number">4.1.</span> <span class="toc-text">优点特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#setup"><span class="toc-number">4.2.</span> <span class="toc-text">setup</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ref%E5%AE%9A%E4%B9%89%E5%93%8D%E5%BA%94%E5%BC%8F%E5%AF%B9%E8%B1%A1"><span class="toc-number">4.3.</span> <span class="toc-text">ref定义响应式对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reactive%E5%AE%9A%E4%B9%89%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F%E5%AF%B9%E8%B1%A1"><span class="toc-number">4.4.</span> <span class="toc-text">reactive定义对象类型的响应式对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ref%E5%92%8Creactive%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="toc-number">4.5.</span> <span class="toc-text">ref和reactive的对比</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#toRefs%E5%92%8CtoRef"><span class="toc-number">4.6.</span> <span class="toc-text">toRefs和toRef</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#computed%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7"><span class="toc-number">4.7.</span> <span class="toc-text">computed计算属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#watch%E7%9B%91%E5%90%AC%E6%95%B0%E6%8D%AE"><span class="toc-number">4.8.</span> <span class="toc-text">watch监听数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#watchEffect"><span class="toc-number">4.9.</span> <span class="toc-text">watchEffect</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E7%AD%BE%E7%9A%84ref%E5%B1%9E%E6%80%A7"><span class="toc-number">4.10.</span> <span class="toc-text">标签的ref属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#props%E5%B1%9E%E6%80%A7"><span class="toc-number">4.11.</span> <span class="toc-text">props属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">4.12.</span> <span class="toc-text">生命周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#key%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">4.13.</span> <span class="toc-text">key的作用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue3%E9%9D%9E%E5%85%BC%E5%AE%B9%E6%80%A7%E6%94%B9%E5%8F%98"><span class="toc-number">5.</span> <span class="toc-text">vue3非兼容性改变</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80API"><span class="toc-number">5.1.</span> <span class="toc-text">全局API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E7%89%88%E6%8C%87%E4%BB%A4"><span class="toc-number">5.2.</span> <span class="toc-text">模版指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6"><span class="toc-number">5.3.</span> <span class="toc-text">组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%B2%E6%9F%93%E5%87%BD%E6%95%B0"><span class="toc-number">5.4.</span> <span class="toc-text">渲染函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%85%83%E7%B4%A0"><span class="toc-number">5.5.</span> <span class="toc-text">自定义元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E5%B0%8F%E6%94%B9%E5%8F%98"><span class="toc-number">5.6.</span> <span class="toc-text">其他小改变</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A2%AB%E7%A7%BB%E9%99%A4%E7%9A%84API"><span class="toc-number">5.7.</span> <span class="toc-text">被移除的API</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue2%E5%B0%8F%E8%AE%B0"><span class="toc-number">6.</span> <span class="toc-text">vue2小记</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#vue%E7%89%B9%E7%82%B9"><span class="toc-number">6.1.</span> <span class="toc-text">vue特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E7%89%88%E8%AF%AD%E6%B3%95"><span class="toc-number">6.2.</span> <span class="toc-text">模版语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MVVM"><span class="toc-number">6.3.</span> <span class="toc-text">MVVM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#defineProperty"><span class="toc-number">6.4.</span> <span class="toc-text">defineProperty</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue%E4%B8%AD%E6%95%B0%E6%8D%AE%E4%BB%A3%E7%90%86"><span class="toc-number">6.5.</span> <span class="toc-text">vue中数据代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC"><span class="toc-number">6.6.</span> <span class="toc-text">事件监听</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#scroll%E5%92%8Cwheel%E4%BA%8B%E4%BB%B6"><span class="toc-number">6.7.</span> <span class="toc-text">scroll和wheel事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#computed%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7-1"><span class="toc-number">6.8.</span> <span class="toc-text">computed计算属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%A6%E5%90%AC%E5%99%A8watch"><span class="toc-number">6.9.</span> <span class="toc-text">侦听器watch</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="toc-number">6.10.</span> <span class="toc-text">条件渲染</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-if-vs-v-show"><span class="toc-number">6.11.</span> <span class="toc-text">v-if vs v-show</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#key%E7%9A%84%E4%BD%9C%E7%94%A8-1"><span class="toc-number">6.12.</span> <span class="toc-text">key的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%B1%E5%85%A5%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86"><span class="toc-number">6.13.</span> <span class="toc-text">深入响应式原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%BF%BD%E8%B8%AA%E5%8F%98%E5%8C%96%EF%BC%9F"><span class="toc-number">6.13.1.</span> <span class="toc-text">如何追踪变化？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A3%80%E6%B5%8B%E5%8F%98%E5%8C%96%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">6.13.2.</span> <span class="toc-text">检测变化的注意事项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E6%9B%B4%E6%96%B0%E6%A3%80%E6%B5%8B"><span class="toc-number">6.13.3.</span> <span class="toc-text">数组更新检测</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5%E6%9B%B4%E6%96%B0%E9%98%9F%E5%88%97"><span class="toc-number">6.13.4.</span> <span class="toc-text">异步更新队列</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E7%BD%AE%E6%8C%87%E4%BB%A4"><span class="toc-number">6.14.</span> <span class="toc-text">内置指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4"><span class="toc-number">6.15.</span> <span class="toc-text">自定义指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">6.16.</span> <span class="toc-text">组件生命周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E5%8C%96%E7%BC%96%E7%A8%8B"><span class="toc-number">6.17.</span> <span class="toc-text">组件化编程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue%E7%9A%84%E7%89%88%E6%9C%AC"><span class="toc-number">6.18.</span> <span class="toc-text">vue的版本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%B7%E5%85%A5mixin"><span class="toc-number">6.19.</span> <span class="toc-text">混入mixin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6"><span class="toc-number">6.20.</span> <span class="toc-text">插件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%8F%92%E4%BB%B6"><span class="toc-number">6.20.1.</span> <span class="toc-text">使用插件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BB%84%E4%BB%B6"><span class="toc-number">6.21.</span> <span class="toc-text">函数式组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEwebpack"><span class="toc-number">6.22.</span> <span class="toc-text">配置webpack</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%8F%82-%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1"><span class="toc-number">6.23.</span> <span class="toc-text">组件传参&#x2F;组件通信</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E6%A7%BD"><span class="toc-number">6.24.</span> <span class="toc-text">插槽</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vuex"><span class="toc-number">6.25.</span> <span class="toc-text">vuex</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-number">6.25.1.</span> <span class="toc-text">核心概念</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%88Stack%E5%92%8C%E5%A0%86Heap%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">6.26.</span> <span class="toc-text">栈Stack和堆Heap的区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#js%E5%8E%9F%E5%9E%8B%E9%93%BE"><span class="toc-number">6.27.</span> <span class="toc-text">js原型链</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Ajax%E3%80%81xhr%E3%80%81fetch%E3%80%81axios%E3%80%81promise%E3%80%81jQuery%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">6.28.</span> <span class="toc-text">Ajax、xhr、fetch、axios、promise、jQuery的区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E8%81%94%E5%85%83%E7%B4%A0%E5%92%8C%E5%9D%97%E7%BA%A7%E5%85%83%E7%B4%A0%EF%BC%9F"><span class="toc-number">6.29.</span> <span class="toc-text">内联元素和块级元素？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%85%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B7%B1%E6%8B%B7%E8%B4%9D%EF%BC%9F"><span class="toc-number">6.30.</span> <span class="toc-text">浅拷贝和深拷贝？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%EF%BC%9F"><span class="toc-number">6.31.</span> <span class="toc-text">性能优化？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#while%E5%BE%AA%E7%8E%AF%E5%BF%AB%E8%BF%98%E6%98%AFfor%E5%BE%AA%E7%8E%AF%E5%BF%AB%EF%BC%9F"><span class="toc-number">6.32.</span> <span class="toc-text">while循环快还是for循环快？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#css%E5%B1%82%E5%8F%A0%E8%A7%84%E5%88%99%EF%BC%9F"><span class="toc-number">6.33.</span> <span class="toc-text">css层叠规则？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E4%B8%8A%E9%9A%90%E8%97%8F%E5%85%83%E7%B4%A0%E6%96%B9%E6%B3%95%EF%BC%9F"><span class="toc-number">6.34.</span> <span class="toc-text">页面上隐藏元素方法？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%83%E7%B4%A0%E6%B0%B4%E5%B9%B3%E5%9E%82%E7%9B%B4%E5%B1%85%E4%B8%AD%EF%BC%9F"><span class="toc-number">6.35.</span> <span class="toc-text">元素水平垂直居中？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Css%E5%85%83%E7%B4%A0%E9%80%89%E6%8B%A9%E5%99%A8%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F"><span class="toc-number">6.36.</span> <span class="toc-text">Css元素选择器有哪些？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#css%E5%8F%AF%E4%BB%A5%E7%BB%A7%E6%89%BF%E7%9A%84%E5%B1%9E%E6%80%A7%EF%BC%9F"><span class="toc-number">6.37.</span> <span class="toc-text">css可以继承的属性？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#css%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8%EF%BC%9F"><span class="toc-number">6.38.</span> <span class="toc-text">css预处理器？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JS%E7%BB%84%E6%88%90%EF%BC%9F"><span class="toc-number">6.39.</span> <span class="toc-text">JS组成？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#js%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F"><span class="toc-number">6.40.</span> <span class="toc-text">js内置对象有哪些？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E6%95%B0%E7%BB%84%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9F"><span class="toc-number">6.41.</span> <span class="toc-text">操作数组的方法？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#js%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5%E6%96%B9%E6%B3%95%EF%BC%9F"><span class="toc-number">6.42.</span> <span class="toc-text">js类型检查方法？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AD%E5%8C%85%E7%9A%84%E7%90%86%E8%A7%A3%EF%BC%9F"><span class="toc-number">6.43.</span> <span class="toc-text">闭包的理解？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E5%A7%94%E6%89%98%EF%BC%9F"><span class="toc-number">6.44.</span> <span class="toc-text">事件委托？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%BC%95%E7%94%A8%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">6.45.</span> <span class="toc-text">基本数据类型和引用数据类型的区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E5%9E%8B%E9%93%BE"><span class="toc-number">6.46.</span> <span class="toc-text">原型链</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#new%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-number">6.47.</span> <span class="toc-text">new关键字的操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#js%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%BB%A7%E6%89%BF%E7%9A%84%EF%BC%9F"><span class="toc-number">6.48.</span> <span class="toc-text">js如何实现继承的？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#js%E8%AE%BE%E8%AE%A1%E5%8E%9F%E7%90%86"><span class="toc-number">6.49.</span> <span class="toc-text">js设计原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#js%E4%B8%AD%E7%9A%84this%E6%8C%87%E5%90%91"><span class="toc-number">6.50.</span> <span class="toc-text">js中的this指向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#script%E6%A0%87%E7%AD%BE%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%89%A7%E8%A1%8C"><span class="toc-number">6.51.</span> <span class="toc-text">script标签的加载和执行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DOMContentLoaded%E5%92%8Cload%E4%BA%8B%E4%BB%B6"><span class="toc-number">6.52.</span> <span class="toc-text">DOMContentLoaded和load事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#setTimeout%E5%92%8CsetInterval%E6%9C%80%E5%B0%8F%E6%89%A7%E8%A1%8C%E6%97%B6%E9%97%B4%EF%BC%9F"><span class="toc-number">6.53.</span> <span class="toc-text">setTimeout和setInterval最小执行时间？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ES6%E5%92%8CES5%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">6.54.</span> <span class="toc-text">ES6和ES5的区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ES6%E6%96%B0%E5%A2%9E%E5%93%AA%E4%BA%9B%E7%89%B9%E6%80%A7%EF%BC%9F"><span class="toc-number">6.55.</span> <span class="toc-text">ES6新增哪些特性？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0"><span class="toc-number">6.56.</span> <span class="toc-text">箭头函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#call-apply-bind%E4%B8%89%E8%80%85%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">6.57.</span> <span class="toc-text">call apply bind三者区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%92%E5%BD%92%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%9F"><span class="toc-number">6.58.</span> <span class="toc-text">递归遇到的问题？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ajax%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">6.59.</span> <span class="toc-text">ajax是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#get%E5%92%8Cpost"><span class="toc-number">6.60.</span> <span class="toc-text">get和post</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Promise%E7%9A%84%E5%86%85%E9%83%A8%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">6.61.</span> <span class="toc-text">Promise的内部原理是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Promise%E5%92%8Casync-await%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">6.62.</span> <span class="toc-text">Promise和async&#x2F;await的区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B8%B8%E7%94%A8%E5%AD%98%E5%82%A8%E6%96%B9%E5%BC%8F%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F"><span class="toc-number">6.63.</span> <span class="toc-text">浏览器常用存储方式有哪些？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#token%E5%AD%98%E5%82%A8%E5%9C%A8%E5%93%AA%E9%87%8C%EF%BC%9F"><span class="toc-number">6.64.</span> <span class="toc-text">token存储在哪里？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DOM%E6%A0%91%E5%92%8C%E6%B8%B2%E6%9F%93%E6%A0%91%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">6.65.</span> <span class="toc-text">DOM树和渲染树有什么区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JWT"><span class="toc-number">6.66.</span> <span class="toc-text">JWT</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B2%BE%E7%81%B5%E5%9B%BE%E5%92%8Cbase64%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">6.67.</span> <span class="toc-text">精灵图和base64区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SVG"><span class="toc-number">6.68.</span> <span class="toc-text">SVG</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#npm%E7%9A%84%E5%BA%95%E5%B1%82%E7%8E%AF%E5%A2%83%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">6.69.</span> <span class="toc-text">npm的底层环境是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%8D%8F%E8%AE%AE%E5%A4%B4%E5%92%8C%E8%AF%B7%E6%B1%82%E5%A4%B4%E6%9C%89%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">6.70.</span> <span class="toc-text">http协议的协议头和请求头有什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98%E7%AD%96%E7%95%A5"><span class="toc-number">6.71.</span> <span class="toc-text">浏览器缓存策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%A8%E5%9F%9F"><span class="toc-number">6.72.</span> <span class="toc-text">跨域</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B2%E6%8A%96%E5%92%8C%E8%8A%82%E6%B5%81"><span class="toc-number">6.73.</span> <span class="toc-text">防抖和节流</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSON"><span class="toc-number">6.74.</span> <span class="toc-text">JSON</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BD%93%E6%95%B0%E6%8D%AE%E6%B2%A1%E6%9C%89%E8%AF%B7%E6%B1%82%E8%BF%87%E6%9D%A5%E6%97%B6%E8%AF%A5%E6%80%8E%E4%B9%88%E5%81%9A"><span class="toc-number">6.75.</span> <span class="toc-text">当数据没有请求过来时该怎么做</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A0%E6%84%9F%E7%99%BB%E5%BD%95"><span class="toc-number">6.76.</span> <span class="toc-text">无感登录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%A7%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">6.77.</span> <span class="toc-text">大文件上传</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96"><span class="toc-number">6.78.</span> <span class="toc-text">前端工程化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%8C%96%E5%92%8C%E5%8C%85%E7%AE%A1%E7%90%86"><span class="toc-number">6.78.1.</span> <span class="toc-text">模块化和包管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JS%E5%B7%A5%E5%85%B7%E9%93%BE"><span class="toc-number">6.78.2.</span> <span class="toc-text">JS工具链</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#html%E8%AF%AD%E4%B9%89%E5%8C%96%E7%9A%84%E7%90%86%E8%A7%A3"><span class="toc-number">6.79.</span> <span class="toc-text">html语义化的理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#html5%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-number">6.80.</span> <span class="toc-text">html5的新特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#css3%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-number">6.81.</span> <span class="toc-text">css3新特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E4%BA%86%E5%93%AA%E4%BA%9B%E7%A7%BB%E5%8A%A8%E7%AB%AF%E7%9A%84%E5%85%BC%E5%AE%B9%E9%97%AE%E9%A2%98%EF%BC%9F"><span class="toc-number">6.82.</span> <span class="toc-text">解决了哪些移动端的兼容问题？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-for%E4%B8%ADkey%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">6.83.</span> <span class="toc-text">v-for中key的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#created%E5%92%8Cmounted%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB"><span class="toc-number">6.84.</span> <span class="toc-text">created和mounted请求数据有什么区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#keep-alive"><span class="toc-number">6.85.</span> <span class="toc-text">keep-alive</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#element-ui%E6%80%8E%E4%B9%88%E8%BF%9B%E8%A1%8C%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81"><span class="toc-number">6.86.</span> <span class="toc-text">element-ui怎么进行表单验证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85axios"><span class="toc-number">6.87.</span> <span class="toc-text">封装axios</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue%E8%B7%AF%E7%94%B1%E4%BC%A0%E5%8F%82%E6%96%B9%E5%BC%8F%EF%BC%9F"><span class="toc-number">6.88.</span> <span class="toc-text">vue路由传参方式？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue%E7%9A%84%E8%B7%AF%E7%94%B1hash%E6%A8%A1%E5%BC%8F%E5%92%8Chistory%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">6.89.</span> <span class="toc-text">vue的路由hash模式和history模式的区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E6%8B%A6%E6%88%AA%E6%98%AF%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84%EF%BC%9F"><span class="toc-number">6.90.</span> <span class="toc-text">路由拦截是怎么实现的？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue%E7%9A%84%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1"><span class="toc-number">6.91.</span> <span class="toc-text">vue的动态路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E9%81%BF%E5%85%8D%E5%88%B7%E6%96%B0%E9%A1%B5%E9%9D%A2%E4%BA%8C%E6%AC%A1%E5%8A%A0%E8%BD%BD%E8%B7%AF%E7%94%B1"><span class="toc-number">6.92.</span> <span class="toc-text">如何避免刷新页面二次加载路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vuex%E5%88%B7%E6%96%B0%E6%95%B0%E6%8D%AE%E4%BC%9A%E4%B8%A2%E5%A4%B1%E5%90%97"><span class="toc-number">6.93.</span> <span class="toc-text">vuex刷新数据会丢失吗</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#watch%E5%92%8Ccomputed%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">6.94.</span> <span class="toc-text">watch和computed有什么区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vuex%E4%BB%80%E4%B9%88%E5%9C%BA%E6%99%AF%E4%BD%BF%E7%94%A8%EF%BC%8C%E5%B1%9E%E6%80%A7%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F"><span class="toc-number">6.95.</span> <span class="toc-text">vuex什么场景使用，属性有哪些？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%84%E6%BA%90%E6%8F%90%E7%A4%BA%E7%AC%A6"><span class="toc-number">6.96.</span> <span class="toc-text">资源提示符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue%E7%9A%84%E5%8F%8C%E5%90%91%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-number">6.97.</span> <span class="toc-text">vue的双向数据绑定的原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#diff%E7%AE%97%E6%B3%95%E5%92%8C%E8%99%9A%E6%8B%9Fdom"><span class="toc-number">6.98.</span> <span class="toc-text">diff算法和虚拟dom</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#a%E9%93%BE%E6%8E%A5%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6"><span class="toc-number">6.99.</span> <span class="toc-text">a链接下载文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E7%A7%81%E6%9C%89%E5%B1%9E%E6%80%A7"><span class="toc-number">6.100.</span> <span class="toc-text">设计私有属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vuex%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%93%8D%E5%BA%94%E5%BC%8F%E7%9A%84%EF%BC%9F"><span class="toc-number">6.101.</span> <span class="toc-text">vuex是如何实现响应式的？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%B0%81%E8%A3%85%E4%B8%80%E4%B8%AA%E7%BB%84%E4%BB%B6"><span class="toc-number">6.102.</span> <span class="toc-text">如何封装一个组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E8%84%9A%E6%89%8B%E6%9E%B6%EF%BC%9F"><span class="toc-number">6.103.</span> <span class="toc-text">如何搭建一个脚手架？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%B0%81%E8%A3%85%E4%B8%80%E4%B8%AA%E5%8F%AF%E5%A4%8D%E7%94%A8%E7%9A%84%E7%BB%84%E4%BB%B6%EF%BC%9F"><span class="toc-number">6.104.</span> <span class="toc-text">如何封装一个可复用的组件？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A6%96%E5%B1%8F%E4%BC%98%E5%8C%96%E6%80%8E%E4%B9%88%E5%81%9A%EF%BC%9F"><span class="toc-number">6.105.</span> <span class="toc-text">首屏优化怎么做？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue3%E6%80%A7%E8%83%BD%E4%B8%BA%E4%BB%80%E4%B9%88%E6%AF%94vue2%E5%A5%BD%EF%BC%9F"><span class="toc-number">6.106.</span> <span class="toc-text">vue3性能为什么比vue2好？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue3%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8proxy%EF%BC%9F"><span class="toc-number">6.107.</span> <span class="toc-text">vue3为什么使用proxy？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E7%BB%84%E4%BB%B6%E7%9A%84%E7%90%86%E8%A7%A3"><span class="toc-number">6.108.</span> <span class="toc-text">对组件的理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nuxtjs"><span class="toc-number">6.109.</span> <span class="toc-text">nuxtjs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%B2%E6%9F%93%E6%96%B9%E5%BC%8F"><span class="toc-number">6.110.</span> <span class="toc-text">渲染方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%9A%BE%E9%A2%98"><span class="toc-number">6.111.</span> <span class="toc-text">工作中遇到的难题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#will-change"><span class="toc-number">6.112.</span> <span class="toc-text">will-change</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F"><span class="toc-number">6.113.</span> <span class="toc-text">小程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BA%95%E5%B1%82"><span class="toc-number">6.114.</span> <span class="toc-text">小程序底层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BE%E4%BE%8B%E8%AF%B4%E6%98%8E%E8%A1%8C%E5%86%85%E5%85%83%E7%B4%A0%E3%80%81%E5%9D%97%E7%BA%A7%E5%85%83%E7%B4%A0%E5%92%8C%E7%A9%BA%E5%85%83%E7%B4%A0%EF%BC%8C%E5%B9%B6%E8%A7%A3%E9%87%8A%E5%85%B6%E7%89%B9%E7%82%B9"><span class="toc-number">6.115.</span> <span class="toc-text">举例说明行内元素、块级元素和空元素，并解释其特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B8%83%E5%B1%80%EF%BC%9F%E4%BB%8B%E7%BB%8D%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E7%9A%84%E6%96%B9%E6%B3%95%E5%92%8C%E6%8A%80%E6%9C%AF"><span class="toc-number">6.116.</span> <span class="toc-text">如何实现响应式布局？介绍几种常见的方法和技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%95%B0%E7%BB%84%E5%8E%BB%E9%87%8D%E7%9A%84%E6%96%B9%E6%B3%95%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F"><span class="toc-number">6.117.</span> <span class="toc-text">实现数组去重的方法有哪些？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E8%A7%A3%E9%87%8A%E5%89%8D%E7%AB%AF%E8%B5%84%E6%BA%90%E6%87%92%E5%8A%A0%E8%BD%BD%E5%92%8C%E9%A2%84%E5%8A%A0%E8%BD%BD%E7%9A%84%E7%AD%96%E7%95%A5"><span class="toc-number">6.118.</span> <span class="toc-text">请解释前端资源懒加载和预加载的策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%8F%8F%E8%BF%B0CommonJS%E3%80%81AMD%E3%80%81ES6-Modules%E4%B9%8B%E9%97%B4%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">6.119.</span> <span class="toc-text">请描述CommonJS、AMD、ES6 Modules之间的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AEWebpack%E8%BF%9B%E8%A1%8C%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%EF%BC%9F%E5%88%97%E4%B8%BE%E5%87%A0%E4%B8%AA%E5%B8%B8%E7%94%A8%E7%9A%84Loader%E5%92%8CPlugin"><span class="toc-number">6.120.</span> <span class="toc-text">如何配置Webpack进行项目构建？列举几个常用的Loader和Plugin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="toc-number">6.121.</span> <span class="toc-text">前端性能优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E4%B9%8BmessageBox"><span class="toc-number">6.122.</span> <span class="toc-text">组件封装之messageBox</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%8E%E6%A0%B7%E6%8E%92%E6%9F%A5%E9%A1%B5%E9%9D%A2%E5%8A%A0%E8%BD%BD%E6%85%A2%EF%BC%9F"><span class="toc-number">6.123.</span> <span class="toc-text">怎样排查页面加载慢？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%96%E6%8B%BD%E5%85%83%E7%B4%A0"><span class="toc-number">6.124.</span> <span class="toc-text">拖拽元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%A7%E5%B1%8F%E6%95%B0%E6%8D%AE%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6%E6%9B%B4%E6%96%B0%EF%BC%9F"><span class="toc-number">6.125.</span> <span class="toc-text">大屏数据如何实现实时更新？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E5%92%8C%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-number">6.126.</span> <span class="toc-text">函数参数和默认值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#css%E5%B1%9E%E6%80%A7%E5%80%BC%E7%9A%84%E8%AE%A1%E7%AE%97%E8%BF%87%E7%A8%8B"><span class="toc-number">6.127.</span> <span class="toc-text">css属性值的计算过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E8%A7%84%E5%88%99"><span class="toc-number">6.128.</span> <span class="toc-text">类型转换规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#js%E8%BF%90%E7%AE%97%E8%A7%84%E5%88%99"><span class="toc-number">6.129.</span> <span class="toc-text">js运算规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#for%E5%BE%AA%E7%8E%AF%E5%92%8CforEach%E5%BE%AA%E7%8E%AF"><span class="toc-number">6.130.</span> <span class="toc-text">for循环和forEach循环</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        日常随记
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">ZJY</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2023-11-03T09:49:54.000Z" itemprop="datePublished">2023-11-03</time>
        
        (Updated: <time datetime="2024-04-02T09:42:45.444Z" itemprop="dateModified">2024-04-02</time>)
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/ZJY.github.io/categories/%E7%AC%94%E8%AE%B0-Javascript/">+ + 笔记 + Javascript</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/ZJY.github.io/tags/%E5%89%8D%E7%AB%AF/" rel="tag">+ 前端</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="2023-11-03"><a href="#2023-11-03" class="headerlink" title="2023-11-03"></a>2023-11-03</h2><h3 id="sockjs-node-info-t-时间戳"><a href="#sockjs-node-info-t-时间戳" class="headerlink" title="/sockjs-node/info?t=${时间戳}"></a>/sockjs-node/info?t=${时间戳}</h3><p>当运行npm run dev启动项目后，在浏览器的network中会自动持续发送<code>/sockjs-node/info?t=$&#123;时间戳&#125;</code>请求。</p>
<p>sockjs-node是什么？<br>sockjs-node是一个JavaScript库，提供跨浏览器的API，创建了一个低延迟、全双工的浏览器和web服务器之间的通道。<br>在项目运行后，会一直调用该接口。<br>SockJS是一个JavaScript库。提供类似于websocket的对象。其作用就是在开发环境下，保证我们在改完代码重写编译后，能够通知浏览器重新加载变更结果。</p>
<p>这里理解为这个库用来让浏览器和本地之间热更新通信的。</p>
<p>如果两个地址对接不上，或者更换wifi等都会报错：sockjs-node/info?t= net::ERR_CONNECTION_TIMED_OUT</p>
<p>需要关闭该请求可以找到node_modules/sockjs-client/dist/sockjs.js ，注释代码的第1603行：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="comment">// self.xhr.send(payload); 注释掉该行</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  self.emit(<span class="string">&#x27;finish&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  self._cleanup(<span class="literal">false</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上只在本地有效，重新安装依赖或者别的同事都需要重新修改，可添加脚本，当npm install后替换掉node_modules/sockjs-client/dist/sockjs.js该文件</p>
<p>1.在根目录下新建该文件lib/sockjs.js,拷贝node_modules/sockjs-client/dist/sockjs.js文件并注释掉1603行</p>
<p>2.在根目录下创建installSockjs.js文件，将node_modules对应文件替换为lib/sockjs.js文件</p>
<p>3.在package.json的scripts中添加脚本命令：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="string">&quot;postinstall: node installSockjs.js&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4.最后npm install即可，但是这样作热更新没有了。</p>
<h3 id="postinstall干什么的？？？"><a href="#postinstall干什么的？？？" class="headerlink" title="postinstall干什么的？？？"></a>postinstall干什么的？？？</h3><p>postinstall是安装完某个包后自动执行的脚本。可以在package.json添加postinstall设置执行的脚本命令，帮我们做一些额外的处理，例如复制文件、创建目录、执行脚本、打印信息等。</p>
<p>例如：将 dist 目录下的所有文件复制到 public 目录下。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts:&quot;</span> &#123;</span><br><span class="line">  <span class="attr">&quot;postinstall&quot;</span>: <span class="string">&quot;cp -r dist/* public/&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="数组扩展运算符"><a href="#数组扩展运算符" class="headerlink" title="数组扩展运算符"></a>数组扩展运算符</h3><p>数组的扩展运算符可以将一个数组转为用逗号分隔的参数序列，且每次只能展开一层数组。</p>
<h2 id="2023-11-22"><a href="#2023-11-22" class="headerlink" title="2023-11-22"></a>2023-11-22</h2><h3 id="事件循环"><a href="#事件循环" class="headerlink" title="事件循环"></a>事件循环</h3><p>事件循环：浏览器的核心</p>
<p>进程：</p>
<p>何为进程：程序运行需要有他自己专有的内存空间，可以把这块内存空间简单的称为进程</p>
<p>每个应用至少有一个进程，进程之间相互独立，即使通信也要双方同意。</p>
<p>何为线程：<br>有了进程后，就可以运行程序，运行程序的称为线程。<br>一个进程至少有一个线程，所以在进程开启后会自动创建一个线程来运行代码，这个线程称为主线程。<br>如果程序需要同时运行多块代码，主线程会启动更多的线程来运行代码。所以一个进程可以包含多个线程。</p>
<p>浏览器有哪些进程和线程？</p>
<p>浏览器是一个多进程多线程的应用程序。</p>
<p>浏览器内部及其复杂，为了避免互相影响，减少崩溃的几率，启动浏览器后，会启动多个进程。</p>
<p>浏览器进程、网络进程、渲染进程 等</p>
<p>浏览器主要进程有：</p>
<p>浏览器进程：<br>负责界面显示、用户交互、子进程管理等，浏览器进程会开启多个线程执行任务。</p>
<p>网络进程：<br>负责加载网络资源。网络进程内部会开启多个线程来执行不同的网络任务。</p>
<p>渲染进程：<br>渲染进程开启后，会启动一个渲染主线程，主线程负责html、css、js代码。</p>
<p>默认情况下，浏览器为每一个标签页开启一个新的渲染进程，保证不同标签页互不影响。</p>
<p>事件循环发生在渲染主线程。</p>
<p>渲染主线程是如何工作的？</p>
<p>渲染主线程是浏览器最繁忙的线程，需要它处理的任务包括但不限于：</p>
<ul>
<li>解析html</li>
<li>解析css</li>
<li>计算样式</li>
<li>布局</li>
<li>处理图层</li>
<li>每秒把页面画60次</li>
<li>执行全局js代码</li>
<li>处理事件监听函数</li>
<li>执行定时器的回调函数</li>
<li>…</li>
</ul>
<p>渲染主线程如何调度任务呢？排队</p>
<p>1、最开始的时候，渲染主线程进入一个无限循环<br>2、每一次循环会检查事件队列（消息队列）是否有任务存在，如果有，取出第一个任务在主线程执行，执行完后进入下一个循环；如果没有则进入休眠<br>3、其他所有线程（包括其他进程的线程）可以随时向事件队列添加任务，新任务会添加到事件队列的末尾。在添加新任务时如果主线程处在休眠状态则会唤醒以继续循环拿取任务。</p>
<p>以上整个过程称为事件循环。</p>
<p>何为异步？</p>
<p>代码在执行过程中，会遇到无法立即处理的任务，比如：</p>
<ul>
<li>计时完成后需要执行的任务：setTimeout setInterval</li>
<li>网络通信完成后需要执行的任务：xhr fetch</li>
<li>用户操作后要执行的任务：addEventListener</li>
</ul>
<p>如果让渲染主线程等待这些任务的时机到达，就会导致主线程阻塞，造成浏览器卡死。因此浏览器选择异步来解决问题。</p>
<p>比如：渲染主线程遇到计时器，通知计时线程去计时，结束该任务，继续循环从事件队列拿取任务，计时线程计时结束后将回调函数包装成任务放进事件队列末尾。</p>
<p>使用异步的方式，渲染主线程永不阻塞。</p>
<h3 id="如何理解js中的异步？"><a href="#如何理解js中的异步？" class="headerlink" title="如何理解js中的异步？"></a>如何理解js中的异步？</h3><p>js是一门单线程的语言，运行在浏览器的渲染主线程内，渲染主线程只有一个，承担很多任务，比如解析html、css、计算样式、布局、执行js代码等。如果使用同步的方式就有可能阻塞主线程，导致事件队列的其他任务不能执行，造成渲染主线程白白浪费，页面无法更新，给用户造成卡死现象。<br>所以浏览器使用异步的方式来避免。具体做法是某些任务发生时，如计时器、网络、事件监听，主线程交给其他线程去处理，自身立即结束任务，执行后续代码。当其他线程执行结束时，就将事先传递回调函数包装成任务加入到事件队列末尾，等待主线程调度执行。<br>在这种异步模式下，浏览器永不阻塞，最大限度的保证了单线程的流畅运行。</p>
<p>js为何会阻碍渲染？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> h1 = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;h1&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">let</span> btn = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;button&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">delay</span>(<span class="params">duration</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> start = <span class="built_in">Date</span>.now()</span><br><span class="line">  <span class="keyword">while</span>(<span class="built_in">Date</span>.now() + start &lt; duration) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  h1.textContent = <span class="string">&#x27;hahah&#x27;</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;onclick&#x27;</span>)</span><br><span class="line">  delay(<span class="number">3000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上代码点击按钮时，会打印onclick，延时3秒后h1显示‘hahah’，因为delay方法占据主线程运行3秒，h1.textContent绘制需要事件队列排队等待，造成页面阻塞。</p>
<p>任务有优先级吗？<br>任务没有优先级，在队列中先进先出<br>但是事件队列是有优先级的。<br>根据w3c最新解释：</p>
<ul>
<li>每个任务都有一个类型，同一个类型的任务必须在同一个队列，不同类型的任务可以分属于不同的队列。再一次事件循环中，浏览器可以根据实际情况从不同的队列取出任务执行。</li>
<li>浏览器必须有一个微队列，微队列中的任务优先于其他任务执行</li>
</ul>
<p>随着浏览器的复杂度上升，w3c不再使用宏队列的说法</p>
<p>在目前chrome的实现中，至少包含以下队列：</p>
<ul>
<li>延时队列：用于存放计时器的回调任务，优先级【中】</li>
<li>交互队列：用于存放用户操作后的回调任务，优先级【高】</li>
<li>微队列：用户存放最快执行的任务，优先级【最高】</li>
</ul>
<p>添加到微队列的方式主要是Promise、MutationObserver<br>例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">立即把一个函数添加到微队列</span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(函数)</span><br></pre></td></tr></table></figure>
<p>示例1：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>) <span class="comment">// fn1</span></span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<p>输出： 2、1</p>
<p>主线程：全局js<br>微队列：<br>延时队列：fn1<br>交互队列：</p>
<p>解析：主线程执行全局js，遇到setTimeout，计时线程0秒后将fn1放入延时队列-》继续执行全局js-》输出2-》全局js结束，主线程空，微队列空，执行延时队列fn1-》输出1</p>
<p>示例2:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">delay</span>(<span class="params">duration</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> start = <span class="built_in">Date</span>.now()</span><br><span class="line">  <span class="keyword">while</span>(<span class="built_in">Date</span>.now() + start &lt; duration) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line">delay()</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<p>输出：等待3秒、2、1</p>
<p>解析：主线程执行全局js，遇到setTimeout，计时线程0秒后将fn1放入延时队列-》继续执行全局js-》执行delay函数3秒-》输出2-》全局js结束，主线程空，微队列空，执行延时队列fn1-》输出1</p>
<p>示例3:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>) <span class="comment">// 回调fn1</span></span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>) <span class="comment">// 回调fn2</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p>输出：3、2、1</p>
<p>主线程：全局js<br>微队列：fn2<br>延时队列：fn1<br>交互队列：</p>
<p>解析：<br>  主线程执行全局js，遇到setTimeout，计时线程0秒后将fn1放入延时队列<br>  继续全局js执行，遇Promise，立即将fn2添加到微队列<br>  继续全局js，输出3<br>  全局js结束，主线程空，微队列不为空，执行fn2<br>  输出2，fn2结束，继续循环<br>  微队列空，延迟队列不为空，执行fn1<br>  输出1，fn1结束，继续循环</p>
<p>示例4:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">  <span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>) <span class="comment">// fn2</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123; <span class="comment">// fn3</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">  <span class="built_in">Promise</span>.resolve().then(a) <span class="comment">// fn(a)</span></span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">4</span>) <span class="comment">// fn4</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">5</span>)</span><br></pre></td></tr></table></figure>
<p>输出：5、4、3、1、2</p>
<p>主线程：全局js<br>微队列：fn4-&gt;fn(a)-&gt;fn2<br>延时队列：fn3<br>交互队列：</p>
<p>解析：<br>  主线程执行全局js，遇到setTimeout，计时线程0秒后将fn3放入延时队列<br>  继续全局js执行，遇Promise，立即将fn4添加到微队列<br>  继续全局js，输出5<br>  全局js结束，主线程空，微队列不为空，执行fn4<br>  输出4，结束任务，继续循环，微队列空，查询延时队列不为空<br>  执行fn3，输出3、遇Promise，立即将fn(a)添加到微队列，结束该任务，继续循环<br>  微队列不空，执行fn(a)，输出1，遇Promise，立即将fn2添加到微队列，结束该任务，继续循环<br>  微队列不空，执行fn2，输出2，结束该任务</p>
<p>示例5:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">  <span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>) <span class="comment">// fn2</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123; </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>) <span class="comment">// fn3</span></span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(a) <span class="comment">// fn(a)</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">4</span>)</span><br></pre></td></tr></table></figure>
<p>输出：4、1、2、3</p>
<p>主线程：全局js<br>微队列：fn(a)-&gt;fn2<br>延时队列：fn3<br>交互队列：</p>
<p>解析：<br>  主线程执行全局js，遇到setTimeout，计时线程0秒后将fn3放入延时队列<br>  继续全局js执行，遇Promise，立即将fn(a)添加到微队列<br>  继续全局js，输出4<br>  全局js结束，主线程空，微队列不为空，执行fn(a)<br>  输出1，遇Promise，立即将fn2添加到微队列，结束该任务，继续循环<br>  微队列不空，执行fn2，输出2，结束该任务，继续循环<br>  微队列空，延时队列不空，执行fn3，输出3，结束该任务</p>
<p>阐述js的事件循环：</p>
<p>事件循环又叫做消息循环，是浏览器的渲染主线程的工作方式。</p>
<p>在chrome中开启一个无限循环，每次循环从队列中取出第一个任务执行，而其他线程只需要在合适的时机将任务添加到队列末尾。<br>过去把消息队列分为宏队列和微队列，这种说法无法满足复杂的浏览器环境，取而代之的是另一钟灵活的处理方式。</p>
<p>根据w3c官方解释，每个任务都有一个类型，同一个类型的任务必须在同一个队列，不同任务属于不同的队列。<br>不同的任务队列有不同的优先级，在一次事件循环中，浏览器自行决定选取哪一个队列的任务。但浏览器必须有一个微队列，微队列具有最高的优先级，必须优先调度执行。</p>
<h3 id="js中计时器能做到精准计时吗？"><a href="#js中计时器能做到精准计时吗？" class="headerlink" title="js中计时器能做到精准计时吗？"></a>js中计时器能做到精准计时吗？</h3><p>不能，因为：</p>
<ul>
<li>计算机硬件没有原子钟，无法做到精准计时</li>
<li>操作系统的计时函数本身就有偏差，js计时器最终调用的是操作系统的函数，所以携带了偏差</li>
<li>按照w3c的标准，浏览器实现计时器，嵌套超过5层，则会带有4毫秒的最小偏差，计时少于4毫秒又带来偏差</li>
<li>受事件循环的影响，计时器的回调函数只能在主线程空闲时执行，因此带来偏差</li>
</ul>
<p>单线程是异步产生的原因<br>事件循环是异步的实现方式</p>
<h3 id="浏览器的渲染原理"><a href="#浏览器的渲染原理" class="headerlink" title="浏览器的渲染原理"></a>浏览器的渲染原理</h3><p>当浏览器的网络线程收到HTML文档后，会产生一个渲染任务，并将其传递到渲染主线程的消息队列。<br>在事件循环机制下，渲染主线程取出渲染任务，开启渲染流程。</p>
<p>整个渲染流程分为多个阶段，分别是：HTML解析、样式计算、布局、分层、绘制、分块、光栅化、画。<br>每个阶段都有明确的输出，上一个阶段的输出是下一个阶段的输入。<br>这样，整个阶段就成为一段严密的流水线。</p>
<p><strong><em>HTML字符串-〉解析HTML-〉样式计算-〉布局-〉分层-〉绘制-〉分块-〉光栅化-〉画-〉像素信息</em></strong><br>渲染：将html字符串-&gt;像素信息</p>
<h4 id="1-解析HTML"><a href="#1-解析HTML" class="headerlink" title="1.解析HTML"></a>1.解析HTML</h4><p>**<br>解析过程中遇到css，解析css，遇到js解析js。为了提高效率，浏览器在解析前，会启动一个预解析的线程，率先下载HTML中外部的css文件和外部的js文件。<br>如果主线程解析到link位置，此时外部的css文件还没有解析下载好，主线程不会等待，继续后续HTML的解析。这是因为下载和解析css是在与解析线程中进行的。这就是css不会阻塞HTML解析的根本原因。<br>如果主线程解析道script位置，主线程会停止解析HTML，转而等待js文件下载好，并将全局代码解析完成后，才继续解析HTML。这是因为js代码可能会修改当前的DOM树，所以DOM生成必须暂停。这就是js会阻塞HMTL解析的根本原因。<br>第一步完成后，会生成CSSOM树和DOM树，内部样式、外部样式、内联样式、浏览器默认样式都会包含在CSSOM树。<br>**</p>
<p>渲染的第一步是解析HTMl，ParseHTML，产生DOM树（Document Object Model）和CSSOM树(css Object Model)</p>
<p>css样式包括：内部样式style，外部样式link，内联样式，浏览器默认样式<br>js修改style样式，docu.style = ‘’<br>js修改<code>&lt;style&gt;</code>和外部样式，document.styleSheets[0].addRule(‘div’, ‘border: 1px solid #f40’)</p>
<p>解析HTML，遇到css代码怎么办？<br>为了提高效率，浏览器会启动一个预解析器率先下载和解析css，css不会阻塞解析HTML。</p>
<h4 id="2、样式计算-recalculate-style"><a href="#2、样式计算-recalculate-style" class="headerlink" title="2、样式计算+ recalculate style"></a>2、样式计算+ recalculate style</h4><p>**<br>主线程遍历整个DOM树，依次为每一个节点计算出最终样式，computed style，<br>在这个过程中，很多预设值会变成绝对值，比如red会变成rgb(255, 0, 0); 相对单位会变成绝对单位，比如em会变成px。<br>这一步完成后，会得到一颗带样式的DOM树<br>**</p>
<p>getComputedStyle()获取最终样式</p>
<h4 id="3、布局-Layout"><a href="#3、布局-Layout" class="headerlink" title="3、布局-Layout"></a>3、布局-Layout</h4><p>**<br>接下来是布局，布局完成后会得到布局树。<br>布局阶段会依次遍历DOM树的每一个节点，计算每个节点的几何信息。例如节点的宽高、相对包含块的位置。<br>大部分时候，DOM树和布局树不是一一对应的。<br>比如dislay:none没有几何信息，因此不会生成到布局树中，又比如使用伪元素选择器，虽然DOM树中不存在这些伪元素节点，但是他们拥有几何信息，所以会生成到布局树。<br>**</p>
<p>DOM树和布局树不是一一对应的。有几何信息的才会在布局树中出现，display：none不出现<br>文本内容必须放在行盒中。</p>
<p>document.body.clientWidth,获取的布局信息</p>
<h4 id="4、分层"><a href="#4、分层" class="headerlink" title="4、分层"></a>4、分层</h4><p>**<br>主线程会使用一套复杂的策略对布局树进行分层。<br>分层的好处在于，将来某一层改变后，仅对该层进行后续处理，从而提高效率。</p>
<p>滚动条、堆叠上下文、transform、opacity等样式都会影响分层结果。will-change会更大程度影响分层。<br>**</p>
<h4 id="5、绘制"><a href="#5、绘制" class="headerlink" title="5、绘制"></a>5、绘制</h4><p>**<br>主线程会为每个层单独产生绘制指令集，用于描述每个层的内容该如何画出来。<br>完成绘制后，主线程将绘制信息提交给合成线程，后续工作交由合成线程完成。<br>**</p>
<h4 id="6、分块"><a href="#6、分块" class="headerlink" title="6、分块"></a>6、分块</h4><p>合成线程会对每个图层进行分块，将其划分为更小的区域。<br>它会从线程池中拿更多线程来完成分块工作。</p>
<p>分块完成后进入光栅化阶段。</p>
<h4 id="7-光栅化"><a href="#7-光栅化" class="headerlink" title="7.光栅化"></a>7.光栅化</h4><p>合成线程将块交由GPU进程，完成光栅化，极高速度。<br>GPU进程会开启多个线程完成光栅化，并且优先处理靠近视口区域的块。<br>光栅化的结果是一块一块的位图。</p>
<h4 id="8-画"><a href="#8-画" class="headerlink" title="8.画"></a>8.画</h4><p>合成线程计算出每个位图的在屏幕上的位置，交由GPU进程最终呈现。</p>
<p>渲染进程（在沙盒，隔离硬件，安全）：渲染主线程、合成线程</p>
<p>所以交由GPU进程</p>
<p>transform发生在合成线程，与渲染主线程无关所以效率高。</p>
<h3 id="什么是reflow？"><a href="#什么是reflow？" class="headerlink" title="什么是reflow？"></a>什么是reflow？</h3><p>渲染主线程：parse—-computed style—-layout—-layer—-paint<br>合成线程：—-tiling分块—-raster光栅化—-draw-〉</p>
<p>cssom<br>dom<br>几何信息、布局</p>
<p>reflow的本质是重新计算布局树。<br>当进行了会影响布局树的操作后，会重新计算布局树，引发layout。<br>为了避免连续多次的操作导致布局树多次计算，浏览器会合并这些操作。当js代码全部执行完后统一计算。所以改动属性引发的reflow是异步的。</p>
<p>因此js获取布局属性时，可能是重新布局前的信息，无法获取最新的布局信息，浏览器在反复权衡下，最终决定获取布局信息立即reflow。</p>
<p>doc.style.width = ‘’<br>doc.style.height = ‘’<br>doc.style.margin = ‘’<br>doc.clientWidth // 立即reflow</p>
<p>哪些操作触发重排？</p>
<ul>
<li>更改窗口大小</li>
<li>更改元素的尺寸、位置、内容</li>
<li>更改文字大小</li>
<li>添加或删除可见元素</li>
<li>页面初始化渲染</li>
</ul>
<h3 id="什么是repaint？"><a href="#什么是repaint？" class="headerlink" title="什么是repaint？"></a>什么是repaint？</h3><p>repaint本质是重新根据分层信息计算了绘制指令。<br>当改动了可见样式就需要重新计算，引发repaint。<br>由于元素的布局信息也属于可见样式，所以reflow一定引发repaint。</p>
<p>哪些操作触发重绘？</p>
<ul>
<li>修改元素文本颜色和方向</li>
<li>修改元素背景色和图片</li>
<li>修改元素的可见性：如visible</li>
<li>修改元素的边框和阴影属性</li>
</ul>
<h3 id="为什么transform的效率高？"><a href="#为什么transform的效率高？" class="headerlink" title="为什么transform的效率高？"></a>为什么transform的效率高？</h3><p>因为transform既不影响布局也不影响绘制，它影响的是渲染流程的最后一个阶段draw。<br>由于draw阶段在合成线程，所以transform的变化几乎不影响渲染主线程。反之，渲染主线程也不会影响transform的变化。</p>
<h2 id="2023-11-27"><a href="#2023-11-27" class="headerlink" title="2023-11-27"></a>2023-11-27</h2><h3 id="1-灰阶滤镜"><a href="#1-灰阶滤镜" class="headerlink" title="1.灰阶滤镜"></a>1.灰阶滤镜</h3><p>filter: grayscale(1) 灰阶滤镜 将对应元素的像素点转换为灰色，0是原图，1是全灰，grayscale是filter滤镜中的一种，<br>可以设置在html全局或局部区域上。</p>
<h3 id="2-js实现无限循环轮播图"><a href="#2-js实现无限循环轮播图" class="headerlink" title="2.js实现无限循环轮播图"></a>2.js实现无限循环轮播图</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Swiper<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    * &#123;</span><br><span class="line">      margin: 0;</span><br><span class="line">      padding: 0;</span><br><span class="line">      box-sizing: border-box;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> &#123;</span></span><br><span class="line">      width: 300px;</span><br><span class="line">      height: 200px;</span><br><span class="line">      overflow: hidden;</span><br><span class="line">      border: 1px solid blue;</span><br><span class="line">      position: relative;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.carousel</span> &#123;</span></span><br><span class="line">      display: flex;</span><br><span class="line">      height: 100%;</span><br><span class="line"><span class="css">      <span class="comment">/* transition: 0.5s; */</span></span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.carousel_item</span> &#123;</span></span><br><span class="line">      background-color: aquamarine;</span><br><span class="line">      color: white;</span><br><span class="line">      height: 100%;</span><br><span class="line">      width: 300px;</span><br><span class="line">      min-width: 300px;</span><br><span class="line">      text-align: center;</span><br><span class="line">      font-size: 30px;</span><br><span class="line">      padding-top: 60px;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.indicate</span> &#123;</span></span><br><span class="line">      position: absolute;</span><br><span class="line">      bottom: 20px;</span><br><span class="line">      left: 50%;</span><br><span class="line">      transform: translateX(-50%);</span><br><span class="line">      display: flex;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.dot</span> &#123;</span></span><br><span class="line">      width: 10px;</span><br><span class="line">      height: 10px;</span><br><span class="line">      margin: 0 10px 0 0;</span><br><span class="line">      border-radius: 50%;</span><br><span class="line">      border: 2px solid blueviolet;</span><br><span class="line">      background-color: white;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.dot</span><span class="selector-class">.active</span> &#123;</span></span><br><span class="line">      background-color: blueviolet;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel_item&quot;</span> &gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel_item&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel_item&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;indicate&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dot active&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dot&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dot&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 无限循环原理：</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// 弹性盒水平排列，设置translateX移动加transition过渡动画</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// 克隆第一个轮播图元素到轮播容器末尾，当轮播到最后一个轮播图时即克隆的第一个元素，下标items.length-1</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// 指示器active第一个点，过渡动画结束后，立即translateX移动到第一个轮播位置（取消过渡动画），重设轮播的下标为0，实现无痕无限循环轮播</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> doms = &#123;</span></span><br><span class="line"><span class="javascript">      carousel: <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.carousel&#x27;</span>),</span></span><br><span class="line"><span class="javascript">      carouselItems: <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.carousel_item&#x27;</span>),</span></span><br><span class="line"><span class="javascript">      indicators: <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.dot&#x27;</span>)</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">moveTo</span>(<span class="params">index</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">&#x27;moveTo: &#x27;</span> + index)</span></span><br><span class="line"><span class="javascript">      doms.carousel.style.transition = <span class="string">&#x27;0.5s&#x27;</span></span></span><br><span class="line"><span class="javascript">      doms.carousel.style.transform = <span class="string">`translateX(-<span class="subst">$&#123;index&#125;</span>00%)`</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 去除当前选中指示器</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> active = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.dot.active&#x27;</span>)</span></span><br><span class="line"><span class="javascript">      active.classList.remove(<span class="string">&#x27;active&#x27;</span>)</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 重新设置指示器</span></span></span><br><span class="line"><span class="javascript">      doms.indicators[index].classList.add(<span class="string">&#x27;active&#x27;</span>)</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">    <span class="comment">// 给指示器添加点击事件</span></span></span><br><span class="line"><span class="javascript">    doms.indicators.forEach(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      item.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line">        moveTo(index)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="javascript">    <span class="comment">// 在轮播收尾各添加一个克隆项</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> firstClone = doms.carouselItems[<span class="number">0</span>].cloneNode(<span class="literal">true</span>)</span></span><br><span class="line">    doms.carousel.appendChild(firstClone)</span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> initialValue = <span class="number">0</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> currentItems = <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.carousel_item&#x27;</span>)</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> interval = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line">      initialValue++</span><br><span class="line"><span class="javascript">      <span class="comment">// 当轮播到最后一张时，轮播指向克隆的第一张，指示器指向第一个，过渡动画结束后移到第一张轮播图</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (initialValue &gt;= currentItems.length + <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="javascript">        doms.carousel.style.transition = <span class="string">&#x27;0.5s&#x27;</span></span></span><br><span class="line"><span class="javascript">        doms.carousel.style.transform = <span class="string">`translateX(-<span class="subst">$&#123;initialValue&#125;</span>00%)`</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 去除当前选中指示器</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> active = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.dot.active&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (active) active.classList.remove(<span class="string">&#x27;active&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 重新设置指示器为第一个</span></span></span><br><span class="line"><span class="javascript">        doms.indicators[<span class="number">0</span>].classList.add(<span class="string">&#x27;active&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line">          initialValue = 0</span><br><span class="line"><span class="javascript">          doms.carousel.style.transition = <span class="string">&#x27;none&#x27;</span></span></span><br><span class="line"><span class="javascript">          doms.carousel.style.transform = <span class="string">`translateX(-<span class="subst">$&#123;initialValue&#125;</span>00%)`</span></span></span><br><span class="line">        &#125;, 500)</span><br><span class="line"><span class="javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line">        moveTo(initialValue)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, 3000)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-sticky定位"><a href="#3-sticky定位" class="headerlink" title="3.sticky定位"></a>3.sticky定位</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Sticky<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    dl &#123;</span><br><span class="line"><span class="css">      <span class="comment">/* overflow: hidden; */</span></span></span><br><span class="line">    &#125;</span><br><span class="line">    dt &#123;</span><br><span class="line">      background-color: aquamarine;</span><br><span class="line">      font-size: 30px;</span><br><span class="line">      height: 40px;</span><br><span class="line">      position: sticky;</span><br><span class="line">      top: 0;</span><br><span class="line">    &#125;</span><br><span class="line">    dd &#123;</span><br><span class="line">      height: 30px;</span><br><span class="line">      line-height: 30px;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dt</span>&gt;</span>A<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>ALorem, ipsum.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>ANisi, rerum?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>ANisi, recusandae.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>AIusto, provident!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>AFuga, sed!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>ANemo, nobis?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>AModi, consequatur.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>ANemo, nihil!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>ARepellat, alias.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>AHic, nostrum!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>AMinima, ducimus.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>ABeatae, a!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>AAccusantium, vel?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>ACorporis, totam!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>AMinus, sapiente.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>ARem, tenetur.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>ALaboriosam, perferendis.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>AQuisquam, iste!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>AItaque, nihil?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>AQuos, ipsum.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dt</span>&gt;</span>B<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BLorem, ipsum.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BNisi, rerum?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BNisi, recusandae.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BIusto, provident!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BFuga, sed!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BNemo, nobis?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BModi, consequatur.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BNemo, nihil!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BRepellat, alias.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BHic, nostrum!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BMinima, ducimus.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BBeatae, a!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BAccusantium, vel?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BCorporis, totam!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BMinus, sapiente.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BRem, tenetur.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BLaboriosam, perferendis.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BQuisquam, iste!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BItaque, nihil?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BQuos, ipsum.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BBeatae, a!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BAccusantium, vel?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BCorporis, totam!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BMinus, sapiente.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BRem, tenetur.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BLaboriosam, perferendis.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BQuisquam, iste!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BItaque, nihil?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BQuos, ipsum.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dt</span>&gt;</span>C<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CLorem, ipsum.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CNisi, rerum?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CNisi, recusandae.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CIusto, provident!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CFuga, sed!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CNemo, nobis?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CModi, consequatur.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CNemo, nihil!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CRepellat, alias.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CHic, nostrum!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CMinima, ducimus.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CBeatae, a!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CAccusantium, vel?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CCorporis, totam!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CMinus, sapiente.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CRem, tenetur.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CLaboriosam, perferendis.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CQuisquam, iste!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CItaque, nihil?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CQuos, ipsum.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CMinima, ducimus.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CBeatae, a!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CAccusantium, vel?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CCorporis, totam!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CMinus, sapiente.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CRem, tenetur.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CLaboriosam, perferendis.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CQuisquam, iste!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CItaque, nihil?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CQuos, ipsum.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CMinima, ducimus.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CBeatae, a!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CAccusantium, vel?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CCorporis, totam!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CMinus, sapiente.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CRem, tenetur.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CLaboriosam, perferendis.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CQuisquam, iste!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CItaque, nihil?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CQuos, ipsum.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CMinima, ducimus.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CBeatae, a!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CAccusantium, vel?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CCorporis, totam!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CMinus, sapiente.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CRem, tenetur.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CLaboriosam, perferendis.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CQuisquam, iste!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CItaque, nihil?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CQuos, ipsum.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>注意，一个 sticky 元素会“固定”在离它最近的一个拥有“滚动机制”的祖先上，如果给其父元素dl设置overflow属性，则该属性失效，如果给body设置overflow属性，则相对于dl元素固定。如果都不设置，则相对于视口。<br>positon: sticky;元素根据正常文档流进行定位，然后相对它的最近滚动祖先和包含块，包括 table-related 元素，基于 top、right、bottom 和 left 的值进行偏移。<br>该值总是创建一个新的层叠上下文。须指定 top, right, bottom 或 left 四个阈值其中之一，才可使粘性定位生效。否则其行为与相对定位相同。</p>
<h3 id="4-visibilitychange-离开-进入标签页事件-页面可见度"><a href="#4-visibilitychange-离开-进入标签页事件-页面可见度" class="headerlink" title="4.visibilitychange 离开/进入标签页事件-页面可见度"></a>4.visibilitychange 离开/进入标签页事件-页面可见度</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&#x27;visibilitychange&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">document</span>.visibilityState) <span class="comment">// hidden, visible</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="5-零宽字符"><a href="#5-零宽字符" class="headerlink" title="5.零宽字符"></a>5.零宽字符</h3><p>零宽字符是一种不可打印的Unicode字符，在浏览器等环境不可见，但是真实存在，获取字符串长度时也会占位置，表示某一种控制功能的字符。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str1 = <span class="string">&#x27;哈哈\u200d\u200d嘿嘿&#x27;</span></span><br><span class="line"><span class="keyword">const</span> str2 = <span class="string">&#x27;哈哈嘿嘿&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(str1, str1.length, str1 === str2) <span class="comment">// 哈哈‍‍嘿嘿 6 false</span></span><br></pre></td></tr></table></figure>
<h3 id="6-求和"><a href="#6-求和" class="headerlink" title="6.求和"></a>6.求和</h3><p>求1开始的前n项的奇数和</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</span><br><span class="line">        result+=<span class="number">2</span>*i+<span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line">sum(<span class="number">1</span>) <span class="comment">// 1</span></span><br><span class="line">sum(<span class="number">2</span>) <span class="comment">// 4</span></span><br><span class="line">sum(<span class="number">3</span>) <span class="comment">// 9</span></span><br><span class="line">sum(<span class="number">4</span>) <span class="comment">// 16</span></span><br><span class="line">sum(<span class="number">5</span>) <span class="comment">// 25</span></span><br><span class="line">sum(<span class="number">6</span>) <span class="comment">// 36</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> n*n</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>求1开始的前n项的偶数和</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</span><br><span class="line">        result+=<span class="number">2</span>*(i+<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line">sum(<span class="number">1</span>) <span class="comment">// 2 = 1*2</span></span><br><span class="line">sum(<span class="number">2</span>) <span class="comment">// 6 = 2*3</span></span><br><span class="line">sum(<span class="number">3</span>) <span class="comment">// 12 = 3*4</span></span><br><span class="line">sum(<span class="number">4</span>) <span class="comment">// 20 = 4*5</span></span><br><span class="line">sum(<span class="number">5</span>) <span class="comment">// 30 = 5*6</span></span><br><span class="line">sum(<span class="number">6</span>) <span class="comment">// 42 = 6*7</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> n*(n+<span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>求1开始的前n项的和</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</span><br><span class="line">        result+=(i+<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line">sum(<span class="number">1</span>) <span class="comment">// 1 = n*(n+1)/2</span></span><br><span class="line">sum(<span class="number">2</span>) <span class="comment">// 3 </span></span><br><span class="line">sum(<span class="number">3</span>) <span class="comment">// 6</span></span><br><span class="line">sum(<span class="number">4</span>) <span class="comment">// 10</span></span><br><span class="line">sum(<span class="number">5</span>) <span class="comment">// 15</span></span><br><span class="line">sum(<span class="number">6</span>) <span class="comment">// 21</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> n*(n+<span class="number">1</span>)/<span class="number">2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>求1-n之间的奇数和</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (i%<span class="number">2</span> = <span class="number">1</span>) &#123;</span><br><span class="line">        result+=i</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line">sum(<span class="number">1</span>) <span class="comment">// 1</span></span><br><span class="line">sum(<span class="number">2</span>) <span class="comment">// 1 </span></span><br><span class="line">sum(<span class="number">3</span>) <span class="comment">// 4</span></span><br><span class="line">sum(<span class="number">4</span>) <span class="comment">// 4</span></span><br><span class="line">sum(<span class="number">5</span>) <span class="comment">// 9</span></span><br><span class="line">sum(<span class="number">6</span>) <span class="comment">// 9</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="7-文字描边text-stroke"><a href="#7-文字描边text-stroke" class="headerlink" title="7.文字描边text-stroke"></a>7.文字描边text-stroke</h3><p>-webkit-text-stroke: 2px #fff;</p>
<h3 id="8-js类里创建私有字段"><a href="#8-js类里创建私有字段" class="headerlink" title="8.js类里创建私有字段"></a>8.js类里创建私有字段</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">      <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>._abc = <span class="number">1</span> <span class="comment">// 以前没有私有字段用_来说明是私有字段但是外部可以访问</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="keyword">new</span> A()</span><br><span class="line">    <span class="built_in">console</span>.log(a._abc) <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">B</span> </span>&#123;</span><br><span class="line">      #abc; <span class="comment">// 定义一个私有字段</span></span><br><span class="line">      <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.#abc = <span class="number">1</span></span><br><span class="line">      &#125;</span><br><span class="line">      #method ()&#123;&#125; <span class="comment">// 私有方法</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> b = <span class="keyword">new</span> B()</span><br><span class="line">    <span class="built_in">console</span>.log(b, b.#abc) <span class="comment">// private field &#x27;#abc&#x27; must be declared in an enclosing class</span></span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="9-下拉菜单的过渡效果"><a href="#9-下拉菜单的过渡效果" class="headerlink" title="9.下拉菜单的过渡效果"></a>9.下拉菜单的过渡效果</h3><p><strong>css获取焦点设置高度auto展开，但是transition无效，只针对数值有效。</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>select-transition<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    * &#123;</span><br><span class="line">      margin: 0;</span><br><span class="line">      padding: 0;</span><br><span class="line">      box-sizing: border-box;</span><br><span class="line">    &#125;</span><br><span class="line">    body &#123;</span><br><span class="line">      padding-left: 100px;</span><br><span class="line">    &#125;</span><br><span class="line">    input &#123;</span><br><span class="line">      width: 400px;</span><br><span class="line">      height: 40px;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.select</span> &#123;</span></span><br><span class="line">      width: 400px;</span><br><span class="line">      border-right: 1px solid;</span><br><span class="line">      border-left: 1px solid;</span><br><span class="line">      border-bottom: 1px solid;</span><br><span class="line">      margin-top: -1px;</span><br><span class="line">      height: 0;</span><br><span class="line">      overflow: hidden;</span><br><span class="line">      transition: 1s;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.select</span> &gt; <span class="selector-tag">div</span> &#123;</span></span><br><span class="line">      line-height: 30px;</span><br><span class="line">      padding-left: 20px;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-tag">input</span><span class="selector-pseudo">:focus</span> ~ <span class="selector-class">.select</span> &#123;</span></span><br><span class="line">      height: auto</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;select&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Lorem, ipsum.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Ab, vel?<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Voluptatum, iusto.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Atque, repudiandae?<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Corporis, voluptas.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>已知select高度情况下可以设置具体值，比如</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:focus</span> ~ <span class="selector-class">.select</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300px</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>设置max-height值也可以实现效果。</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>select-transition<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    * &#123;</span><br><span class="line">      margin: 0;</span><br><span class="line">      padding: 0;</span><br><span class="line">      box-sizing: border-box;</span><br><span class="line">    &#125;</span><br><span class="line">    body &#123;</span><br><span class="line">      padding-left: 100px;</span><br><span class="line">    &#125;</span><br><span class="line">    input &#123;</span><br><span class="line">      width: 400px;</span><br><span class="line">      height: 40px;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.select</span> &#123;</span></span><br><span class="line">      width: 400px;</span><br><span class="line">      border-right: 1px solid;</span><br><span class="line">      border-left: 1px solid;</span><br><span class="line">      border-bottom: 1px solid;</span><br><span class="line">      margin-top: -1px;</span><br><span class="line">      height: auto;</span><br><span class="line">      overflow: hidden;</span><br><span class="line">      max-height: 0;</span><br><span class="line">      transition: 1s;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.select</span> &gt; <span class="selector-tag">div</span> &#123;</span></span><br><span class="line">      line-height: 30px;</span><br><span class="line">      padding-left: 20px;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-tag">input</span><span class="selector-pseudo">:focus</span> ~ <span class="selector-class">.select</span> &#123;</span></span><br><span class="line">      max-height: 300px;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;select&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Lorem, ipsum.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Ab, vel?<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Voluptatum, iusto.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Atque, repudiandae?<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Corporis, voluptas.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>注意，max-height的值，300px的高度过渡动画为1s，但实际上select真实高度并不一定是300，因此失焦时收起select会有延时</p>
<p><strong>使用js添加获取/失去焦点事件控制select高度。</strong></p>
<p>先css设置height为0，获取焦点时，设置高度auto获取实际高度，然后再设置select高度0，再设置获取的实际高度和transition，失焦时隐藏高度</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>select-transition<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    * &#123;</span><br><span class="line">      margin: 0;</span><br><span class="line">      padding: 0;</span><br><span class="line">      box-sizing: border-box;</span><br><span class="line">    &#125;</span><br><span class="line">    body &#123;</span><br><span class="line">      padding-left: 100px;</span><br><span class="line">    &#125;</span><br><span class="line">    input &#123;</span><br><span class="line">      width: 400px;</span><br><span class="line">      height: 40px;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.select</span> &#123;</span></span><br><span class="line">      width: 400px;</span><br><span class="line">      border-right: 1px solid;</span><br><span class="line">      border-left: 1px solid;</span><br><span class="line">      border-bottom: 1px solid;</span><br><span class="line">      margin-top: -1px;</span><br><span class="line">      height: 0;</span><br><span class="line">      overflow: hidden;</span><br><span class="line">      transition: 1s;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.select</span> &gt; <span class="selector-tag">div</span> &#123;</span></span><br><span class="line">      line-height: 30px;</span><br><span class="line">      padding-left: 20px;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;select&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Lorem, ipsum.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Ab, vel?<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Voluptatum, iusto.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Atque, repudiandae?<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Corporis, voluptas.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> input = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;input&#x27;</span>)</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> select = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.select&#x27;</span>)</span></span><br><span class="line"><span class="javascript">    input.onfocus = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      select.style.transition = <span class="string">&#x27;none&#x27;</span></span></span><br><span class="line"><span class="javascript">      select.style.height = <span class="string">&#x27;auto&#x27;</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 获取select高度</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> height = select.offsetHeight</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(height)</span></span><br><span class="line">      select.style.height = 0</span><br><span class="line"><span class="javascript">      select.offsetHeight <span class="comment">// 获取元素几何信息强制浏览器渲染，因为浏览器js设置dom会合并操作所以需要强制渲染</span></span></span><br><span class="line"><span class="javascript">      select.style.transition = <span class="string">&#x27;1s&#x27;</span></span></span><br><span class="line"><span class="javascript">      select.style.height = height + <span class="string">&#x27;px&#x27;</span></span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">    input.onblur = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      select.style.transition = <span class="string">&#x27;1s&#x27;</span></span></span><br><span class="line"><span class="javascript">      select.style.height = <span class="string">&#x27;0&#x27;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>利用css3的scaleY缩放高度。</strong></p>
<p>注：缩放过程字体会重叠</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>select-transition<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    * &#123;</span><br><span class="line">      margin: 0;</span><br><span class="line">      padding: 0;</span><br><span class="line">      box-sizing: border-box;</span><br><span class="line">    &#125;</span><br><span class="line">    body &#123;</span><br><span class="line">      padding-left: 100px;</span><br><span class="line">    &#125;</span><br><span class="line">    input &#123;</span><br><span class="line">      width: 400px;</span><br><span class="line">      height: 40px;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.select</span> &#123;</span></span><br><span class="line">      width: 400px;</span><br><span class="line">      border-right: 1px solid;</span><br><span class="line">      border-left: 1px solid;</span><br><span class="line">      border-bottom: 1px solid;</span><br><span class="line">      margin-top: -1px;</span><br><span class="line">      height: auto;</span><br><span class="line">      overflow: hidden;</span><br><span class="line">      transition: 1s;</span><br><span class="line">      z-index: -1;</span><br><span class="line">      transform-origin: center top;</span><br><span class="line">      transform: scaleY(0);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.select</span> &gt; <span class="selector-tag">div</span> &#123;</span></span><br><span class="line">      line-height: 30px;</span><br><span class="line">      padding-left: 20px;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-tag">input</span><span class="selector-pseudo">:focus</span> ~ <span class="selector-class">.select</span> &#123;</span></span><br><span class="line">      transform: scaleY(1);</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;select&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Lorem, ipsum.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Ab, vel?<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Voluptatum, iusto.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Atque, repudiandae?<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Corporis, voluptas.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="10-跨域cors"><a href="#10-跨域cors" class="headerlink" title="10.跨域cors"></a>10.跨域cors</h3><p>CORS是基于http1.1的一种跨域解决方案，全称跨域资源共享。<br>它的总体思路：如果浏览器要跨域访问服务器的资源，需要获取服务器的允许。</p>
<p>针对不同请求，cors规定里三种不同的交互模式：</p>
<ul>
<li>简单请求</li>
<li>需要预检的请求</li>
<li>携带身份凭证的请求</li>
</ul>
<h4 id="简单请求"><a href="#简单请求" class="headerlink" title="简单请求"></a>简单请求</h4><ol>
<li><p>请求方法属于以下的一种：get、post、head</p>
</li>
<li><p>请求头仅包含安全的字段，常见安全字段如下：</p>
<ul>
<li>Accept</li>
<li>Accept-Language</li>
<li>Content-Language</li>
<li>Content-Type</li>
<li>DPR</li>
<li>Downlink</li>
<li>Save-Data</li>
<li>Viewport-Width</li>
<li>Width</li>
</ul>
</li>
<li><p>请求头如果包含Content-Type，仅限以下值之一：</p>
<ul>
<li>text/plain-文本内容数据</li>
<li>multipart/form-data-文件上传</li>
<li>application/x-www-form-urlencoded–提交表单</li>
</ul>
</li>
</ol>
<p>以上三个条件都满足，浏览器判断为简单请求。</p>
<h4 id="简单请求的交互规范"><a href="#简单请求的交互规范" class="headerlink" title="简单请求的交互规范"></a>简单请求的交互规范</h4><p>当前浏览器某个跨域请求是简单请求时，会发生以下：</p>
<ol>
<li>请求头中会自动添加Origin字段，哪个源地址在跨域请求</li>
<li>服务器响应头应包含Access-Control-Allow-Origin<br>服务器收到响应，如果允许跨域，则在响应头添加Access-Control-Allow-Origin字段，该属性值有：<ul>
<li>*：允许一切</li>
<li><code>http://my.com</code>: 只允许<code>http://my.com</code>这个源访问</li>
</ul>
</li>
</ol>
<h4 id="需要预检的请求"><a href="#需要预检的请求" class="headerlink" title="需要预检的请求"></a>需要预检的请求</h4><p>如果浏览器不认为是简单请求，会按照以下流程进行：</p>
<ul>
<li>浏览器发送预检请求，访问服务器是否允许</li>
<li>服务器允许访问</li>
<li>浏览器发送真实的请求</li>
<li>服务器完成真实的响应</li>
</ul>
<p>例如以下请求，就是需要预检请求</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">&quot;http://my.com/api/user&quot;</span>, &#123;</span><br><span class="line">  method: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">  header: &#123;</span><br><span class="line">    a:<span class="number">1</span></span><br><span class="line">    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  body: ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="附带身份凭证的请求"><a href="#附带身份凭证的请求" class="headerlink" title="附带身份凭证的请求"></a>附带身份凭证的请求</h4><p>默认情况下，ajax的请求并不会携带cookie，可以配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xhr</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">xhr.withCredentials = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// fetch api</span></span><br><span class="line">fetch(url, &#123;</span><br><span class="line">  credentials: <span class="string">&#x27;include&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>这样，该跨域的请求就是附带身份凭证的请求。当一个请求附带cookie时，无论是简单请求还是预检请求，都会在请求头中添加cookie字段，<br>而服务器响应时需要明确告知客户端服务器允许这样的凭证：Access-Control-Allow-Credentials: true.若服务器没有响应则跨域被拒绝，<br>注意：对于附带身份凭证的请求，服务器不得设置Access-Control-Allow-Origin:*。</p>
<h4 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h4><p>在跨域访问时，js只能拿到一些最基本的响应头，比如：Cache-Control、Content-Language、Content-Type、Expires、Last-Modified、Progma，如果要访问其他头，需要服务器设置响应头。</p>
<p>Access-Control-Export-Headers：authorization…,这样浏览器就可以访问authorization响应头了。</p>
<h3 id="10-解析url中的参数"><a href="#10-解析url中的参数" class="headerlink" title="10.解析url中的参数"></a>10.解析url中的参数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parseQuery</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> q = &#123;&#125;</span><br><span class="line">  url.replace(<span class="regexp">/([^?&amp;=]+)=([^&amp;]+)/g</span>,</span><br><span class="line">  (_, k, v) =&gt; (q[k] = v))</span><br><span class="line">  <span class="keyword">return</span> q</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> a = parseQuery(<span class="string">&#x27;http://my.com?a=1&amp;b=2&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> b = parseQuery(<span class="string">&#x27;a=1&amp;b=2&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(a, b)</span><br></pre></td></tr></table></figure>
<p><code>/</code> 和 <code>/g</code>：这两个符号是正则表达式的开始和结束标记，g 标志表示全局搜索，即匹配字符串中所有符合条件的子串，而不是只匹配第一个。</p>
<p><code>([^?&amp;=]+)</code>：</p>
<p><code>[]</code>：字符集，匹配方括号中的任意一个字符。<br><code>^</code>：在字符集中，表示非，即不匹配后续列出的字符。<br><code>?&amp;=</code>：列出的字符集，包括问号、等号和与号。<br><code>+</code>：表示匹配一次或多次。<br>所以 <code>([^?&amp;=]+)</code> 匹配一个或多个不是 ?、&amp; 或 = 的字符。这部分通常用于匹配 URL 查询字符串中的参数名。<br>=：匹配等号字符，即 URL 查询字符串中用来分隔参数名和参数值的字符。</p>
<p><code>([^&amp;]+)</code>：</p>
<p><code>[^&amp;]</code>：字符集，匹配除了与号 &amp; 以外的任意字符。<br><code>+</code>：表示匹配一次或多次。<br>所以 <code>([^&amp;]+)</code> 匹配一个或多个不是 &amp; 的字符。这部分通常用于匹配 URL 查询字符串中的参数值。</p>
<h3 id="11-生成随机颜色"><a href="#11-生成随机颜色" class="headerlink" title="11.生成随机颜色"></a>11.生成随机颜色</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">randomColor</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;#&#x27;</span> + <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">0xffffff</span>).toString(<span class="number">16</span>).padEnd(<span class="number">6</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// padEnd() 方法会将当前字符串从末尾开始填充给定的字符串（如果需要会重复填充），直到达到给定的长度。填充是从当前字符串的末尾开始的。</span></span><br><span class="line"><span class="built_in">console</span>.log(randomColor())</span><br></pre></td></tr></table></figure>
<ol>
<li>0xffffff 是一个十六进制数，它等于十进制的 16777215</li>
<li>Math.random() 是 JavaScript 中的一个函数，它返回一个大于等于 0 且小于 1 的伪随机数.</li>
<li>Math.floor(Math.random() * 0xffffff),向下取整，确保得到的结果是一个0-16777214的整数</li>
<li>toString(16) 方法将这个随机整数转换为十六进制字符串</li>
</ol>
<h3 id="12-js的atob和btoa函数"><a href="#12-js的atob和btoa函数" class="headerlink" title="12.js的atob和btoa函数"></a>12.js的atob和btoa函数</h3><p>btoa() 方法可以将一个二进制字符串（例如，将字符串中的每一个字节都视为一个二进制数据字节）编码为 Base64 编码的 ASCII 字符串.<br>atob() 对经过 base-64 编码的字符串进行解码.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> encodedData = <span class="built_in">window</span>.btoa(<span class="string">&quot;Hello, world&quot;</span>); <span class="comment">// 编码</span></span><br><span class="line"><span class="keyword">let</span> decodedData = <span class="built_in">window</span>.atob(encodedData); <span class="comment">// 解码</span></span><br><span class="line"><span class="built_in">console</span>.log(encodedData, decodedData)</span><br><span class="line"><span class="comment">// SGVsbG8sIHdvcmxk Hello, world</span></span><br></pre></td></tr></table></figure>
<h3 id="13-判断一个值是否是Promise-Like？"><a href="#13-判断一个值是否是Promise-Like？" class="headerlink" title="13.判断一个值是否是Promise Like？"></a>13.判断一个值是否是Promise Like？</h3><p>和Promise结构类似<br>Promise A+规范：<a target="_blank" rel="noopener" href="https://promisesaplus.com/">https://promisesaplus.com/</a><br>“promise”是一个具有符合本规范的then方法的对象或函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPromiseLike</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value !== <span class="literal">null</span> &amp;&amp; (<span class="keyword">typeof</span> value === <span class="string">&#x27;object&#x27;</span> || <span class="keyword">typeof</span> value === <span class="string">&#x27;function&#x27;</span>) &amp;&amp; (<span class="keyword">typeof</span> value.then === <span class="string">&#x27;function&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="14-手写一个Promise"><a href="#14-手写一个Promise" class="headerlink" title="14.手写一个Promise"></a>14.手写一个Promise</h3><p>promise是一个构造函数，带有then方法<br>它有三种状态：pending 挂起，任务进行中、fulfilled 完成、rejected 失败<br>then方法接收2个参数，onFulfilled 和 onRejected 都是可选参数，它们是异步执行的<br>可以多次对同一个promise调用then方法，从而注册多个onFulfilled或onRejected<br>then方法必须再次返回一个promise<br>Promise(resolve, reject), resolve, reject是函数,改变状态</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PENDING = <span class="string">&#x27;pending&#x27;</span></span><br><span class="line"><span class="keyword">const</span> FULLFILLED = <span class="string">&#x27;fulfilled&#x27;</span></span><br><span class="line"><span class="keyword">const</span> REJECTED = <span class="string">&#x27;rejected&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// promise是一个构造函数，带有then方法</span></span><br><span class="line"><span class="comment">// 它有三种状态：pending 挂起，任务进行中、fulfilled 完成、rejected 失败</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyPromise</span> </span>&#123;</span><br><span class="line">  #state = PENDING <span class="comment">// 私有属性，promise初始状态pending</span></span><br><span class="line">  #result = <span class="literal">undefined</span> <span class="comment">// 私有属性，promise结果</span></span><br><span class="line">  #handler = [] <span class="comment">// 保存每次调用then方法的回调onFulfilled, onRejected，resolve，reject</span></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">executor</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> resolve = <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 改变状态</span></span><br><span class="line">      <span class="built_in">this</span>.#changeState(FULLFILLED, data)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> reject = <span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 改变状态</span></span><br><span class="line">      <span class="built_in">this</span>.#changeState(REJECTED, reason)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      executor(resolve, reject)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      reject(error)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  #<span class="function"><span class="title">changeState</span>(<span class="params">state, result</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.#state !== PENDING) <span class="keyword">return</span> <span class="comment">// 状态一旦改变不可再更改</span></span><br><span class="line">    <span class="built_in">this</span>.#state = state</span><br><span class="line">    <span class="built_in">this</span>.#result = result</span><br><span class="line">    <span class="built_in">this</span>.#run() <span class="comment">// 异步的时候这里知道什么时候改变状态</span></span><br><span class="line">  &#125;</span><br><span class="line">  #<span class="function"><span class="title">isPromiseLike</span>(<span class="params">value</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> value !== <span class="literal">null</span> &amp;&amp; (<span class="keyword">typeof</span> value === <span class="string">&#x27;object&#x27;</span> || <span class="keyword">typeof</span> value === <span class="string">&#x27;function&#x27;</span>) &amp;&amp; (<span class="keyword">typeof</span> value.then === <span class="string">&#x27;function&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  #<span class="function"><span class="title">runMicroTask</span>(<span class="params">callback</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(callback, <span class="number">0</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  #<span class="function"><span class="title">run</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// fulfilled、rejected、pending</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.#state === PENDING) &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 遍历then方法的回调执行</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">this</span>.#handler.length) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; onFulfilled, onRejected, resolve, reject &#125; = <span class="built_in">this</span>.#handler.shift()</span><br><span class="line">      <span class="comment">// p.then传递参数 onFulfilled, onRejected：</span></span><br><span class="line">      <span class="comment">// 1.回调不是函数：p.then(null), 直接resolve， rejected</span></span><br><span class="line">      <span class="comment">// 2.回调是函数：函数有执行结果 p.then((res)=&gt; &#123;&#125;, err =&gt; &#123;&#125;)</span></span><br><span class="line">      <span class="comment">// 3.回调的函数的返回结果是promise</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.#state === FULLFILLED) &#123;</span><br><span class="line">        <span class="built_in">this</span>.#runMicroTask(<span class="function">() =&gt;</span> &#123; <span class="comment">// promise运行在微队列中</span></span><br><span class="line">          <span class="comment">// 回调不是函数</span></span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">typeof</span> onFulfilled !== <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">            resolve(<span class="built_in">this</span>.#result)</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 回调是函数</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">              <span class="keyword">const</span> data = onFulfilled(<span class="built_in">this</span>.#result) <span class="comment">// 回调的函数返回结果是promise</span></span><br><span class="line">              <span class="keyword">if</span> (<span class="built_in">this</span>.#isPromiseLike(data)) &#123;</span><br><span class="line">                data.then(resolve, reject)</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                resolve(data)</span><br><span class="line">              &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">              reject(error)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123; <span class="comment">// rejected</span></span><br><span class="line">        <span class="built_in">this</span>.#runMicroTask(<span class="function">() =&gt;</span> &#123; <span class="comment">// promise运行在微队列中</span></span><br><span class="line">          <span class="comment">// 回调不是函数</span></span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">typeof</span> onRejected !== <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">            reject(<span class="built_in">this</span>.#result)</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 回调是函数</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">              <span class="keyword">const</span> data = onRejected(<span class="built_in">this</span>.#result) <span class="comment">// 回调的函数返回结果是promise</span></span><br><span class="line">              <span class="keyword">if</span> (<span class="built_in">this</span>.#isPromiseLike(data)) &#123;</span><br><span class="line">                data.then(resolve, reject)</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                resolve(data)</span><br><span class="line">              &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">              reject(error)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// then方法接收2个参数，onFulfilled 和 onRejected 都是可选参数，它们是异步执行的</span></span><br><span class="line">  <span class="comment">// 可以多次对同一个promise调用then方法，从而注册多个onFulfilled或onRejected</span></span><br><span class="line">  <span class="comment">// then方法必须再次返回一个promise</span></span><br><span class="line">  <span class="function"><span class="title">then</span>(<span class="params">onFulfilled, onRejected</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> MyPromise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 如果是同步：状态直接是fulfilled/rejected</span></span><br><span class="line">      <span class="comment">// 异步：pending</span></span><br><span class="line">      <span class="comment">// 可多次调用、可能异步（pending）</span></span><br><span class="line">      <span class="comment">// 保存每次调用then方法的回调onFulfilled, onRejected，resolve，reject，等待完成即状态改变（#changeState）时调用</span></span><br><span class="line">      <span class="built_in">this</span>.#handler.push(&#123;</span><br><span class="line">        onFulfilled,</span><br><span class="line">        onRejected,</span><br><span class="line">        resolve,</span><br><span class="line">        reject</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="built_in">this</span>.#run()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> MyPromise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    reject(<span class="number">123</span>)</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// p.then(</span></span><br><span class="line"><span class="comment">//   null,</span></span><br><span class="line"><span class="comment">//   (err) =&gt; &#123;</span></span><br><span class="line"><span class="comment">//     console.log(&#x27;promise-fail1&#x27;, err)</span></span><br><span class="line"><span class="comment">//     return 456</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">// ).then(</span></span><br><span class="line"><span class="comment">//   (res) =&gt; &#123;</span></span><br><span class="line"><span class="comment">//     console.log(&#x27;promise-success2&#x27;, res)</span></span><br><span class="line"><span class="comment">//   &#125;,</span></span><br><span class="line"><span class="comment">//   (err) =&gt; &#123;</span></span><br><span class="line"><span class="comment">//     console.log(&#x27;promise-fail2&#x27;, err)</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">// )</span></span><br><span class="line"><span class="comment">// promise-fail1 123</span></span><br><span class="line"><span class="comment">// promise-success2 456</span></span><br><span class="line"></span><br><span class="line">p.then(</span><br><span class="line">  <span class="literal">null</span>,</span><br><span class="line">  (err) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;promise-fail1&#x27;</span>, err)</span><br><span class="line">    <span class="keyword">throw</span> <span class="number">456</span></span><br><span class="line">  &#125;</span><br><span class="line">).then(</span><br><span class="line">  (res) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;promise-success2&#x27;</span>, res)</span><br><span class="line">  &#125;,</span><br><span class="line">  (err) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;promise-fail2&#x27;</span>, err)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"><span class="comment">// promise-fail1 123</span></span><br><span class="line"><span class="comment">// promise-fail2 456</span></span><br></pre></td></tr></table></figure>
<h3 id="15-语义化版本"><a href="#15-语义化版本" class="headerlink" title="15.语义化版本"></a>15.语义化版本</h3><p>x.y.z ， x、y、z都是数字，只能增加<br>x：主版本，breaking update， 不兼容式升级，比如vue2-vue3<br>y：次版本，更新兼容以前版本<br>z：修订版本，修复bug，优化等</p>
<p>1.8.2-&gt;2.0.0<br>1.8.2-&gt;1.9.0</p>
<p>高位版本增加，低位版本要清零</p>
<p>0.1.0，主版本0表示测试版本，未正式发布<br>1.2.3-alpha，alpha预发布版本</p>
<h3 id="16-axios"><a href="#16-axios" class="headerlink" title="16.axios"></a>16.axios</h3><p>Axios 是一个基于 promise 的 HTTP 库，可以用在浏览器和 node.js 中。</p>
<p>特性</p>
<p>  从浏览器中创建 XMLHttpRequests<br>  从 node.js 创建 http 请求<br>  支持 Promise API<br>  拦截请求和响应<br>  转换请求数据和响应数据<br>  取消请求<br>  自动转换 JSON 数据<br>  客户端支持防御 XSRF</p>
<h3 id="17-数据埋点"><a href="#17-数据埋点" class="headerlink" title="17.数据埋点"></a>17.数据埋点</h3><p>服务监控：产品（ARMS、神策，sentry免费）</p>
<p>  错误监控<br>  性能监控<br>  行为监控</p>
<p>数据埋点：</p>
<p>  侵入：监控用户行为，关键业务代码处埋点<br>  非侵入：错误、性能监控，对代码等无侵入，在入口文件收集即可</p>
<h3 id="18-web性能指标"><a href="#18-web性能指标" class="headerlink" title="18.web性能指标"></a>18.web性能指标</h3><p>评定web应用程序用户体验是否优秀：</p>
<p>  RAIL模型：Response响应时间、Animation动画流畅不丢帧不跳帧、Idle页面运行过程是否给用户留够交互时间、load加载时间</p>
<p>衡量的关键指标：</p>
<ul>
<li>FCP：首次内容加载经过的时间，从白屏到第一个有意义的内容（可以是文字、图片、按钮或背景色元素，看得见的内容）出现的时间</li>
<li>LCP：最大内容绘制时间，屏幕内最大的元素加载出来</li>
<li>CLS：累计偏移，前面有内容突然加载出来导致内容往后挤，破坏用户的操作，比如点击按钮时，前面有内容加载导致按钮往后排，点击到别的按钮等</li>
<li>TBT：total blocking time总的阻塞时间，从FCP到TTI的时间，TTI表示用户可交互的时间点</li>
</ul>
<p>使用Chrome lighthouse工具衡量这些指标</p>
<p>了解用户真实指标需要收集，第三方库web vitals</p>
<h3 id="19-从视频文件中提取画面帧"><a href="#19-从视频文件中提取画面帧" class="headerlink" title="19.从视频文件中提取画面帧"></a>19.从视频文件中提取画面帧</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>提取视频文件中的画面帧<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;video&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> file = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;input[type=file]&#x27;</span>)</span></span><br><span class="line"><span class="javascript">    file.onchange = <span class="keyword">async</span> (e) =&gt; &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(e.target.files)</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> file = e.target.files[<span class="number">0</span>]</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 提取第10秒的帧并img预览</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// const frame = await captureFrame(file, 10)</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// createPreview(frame)</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// console.log(frame)</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 每隔1秒提取帧展示</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; <span class="number">10</span>; i++) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> frame = <span class="keyword">await</span> captureFrame(file, <span class="number">1</span> * i)</span></span><br><span class="line">        createPreview(frame)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">drawVideo</span>(<span class="params">vdo</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> cvs = <span class="built_in">document</span>.createElement(<span class="string">&#x27;canvas&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> ctx = cvs.getContext(<span class="string">&#x27;2d&#x27;</span>)</span></span><br><span class="line">        cvs.width = vdo.videoWidth</span><br><span class="line">        cvs.height = vdo.videoHeight</span><br><span class="line">        ctx.drawImage(vdo, 0, 0, cvs.width, cvs.height)</span><br><span class="line"><span class="javascript">        cvs.toBlob(<span class="function">(<span class="params">blob</span>) =&gt;</span> &#123;</span></span><br><span class="line">          resolve(&#123;</span><br><span class="line">            blob,</span><br><span class="line">            url: URL.createObjectURL(blob)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">captureFrame</span>(<span class="params">vdoFile, time = <span class="number">0</span></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> vdo = <span class="built_in">document</span>.createElement(<span class="string">&#x27;video&#x27;</span>)</span></span><br><span class="line">        vdo.currentTime = time</span><br><span class="line"><span class="javascript">        vdo.muted = <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">        vdo.autoplay = <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">        vdo.oncanplay = <span class="keyword">async</span> () =&gt; &#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">const</span> frame = <span class="keyword">await</span> drawVideo(vdo)</span></span><br><span class="line">          resolve(frame)</span><br><span class="line">        &#125;</span><br><span class="line">        vdo.src = URL.createObjectURL(vdoFile)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">createPreview</span>(<span class="params">frame</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> img = <span class="built_in">document</span>.createElement(<span class="string">&#x27;img&#x27;</span>)</span></span><br><span class="line">      img.src = frame.url</span><br><span class="line"><span class="javascript">      <span class="built_in">document</span>.body.append(img)</span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="20-ESMoudle的工作原理"><a href="#20-ESMoudle的工作原理" class="headerlink" title="20.ESMoudle的工作原理"></a>20.ESMoudle的工作原理</h3><p>静态导入：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> A <span class="keyword">from</span> <span class="string">&#x27;./A.js&#x27;</span></span><br></pre></td></tr></table></figure>
<p>动态导入：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>(<span class="string">&#x27;./dynmaic.js&#x27;</span>).then(<span class="function"><span class="params">d</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(d.default)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>静态导入解析是在运行之前发生的，动态导入的解析是在运行时发生的。<br>比如import A from ‘./A.js’，会先将A.js转换为完整的引入url：***/A.js，再下载，先模块解析，再运行<br>动态导入：完整URL-》下载js-》解析-》运行-》然后执行then里面语句</p>
<h3 id="21-defineProperty和proxy"><a href="#21-defineProperty和proxy" class="headerlink" title="21.defineProperty和proxy"></a>21.defineProperty和proxy</h3><p>defineProperty是对象基本操作（内部函数调用），用来定义属性描述符的，不能暴露给开发者，比如get读取属性会调用has方法，delete obj[k] 调用内部函数delete<br>proxy针对所有的操作都可以拦截，也暴露了内部方法。</p>
<h3 id="22-垃圾回收与内存泄露"><a href="#22-垃圾回收与内存泄露" class="headerlink" title="22.垃圾回收与内存泄露"></a>22.垃圾回收与内存泄露</h3><p>程序运行需要内存空间，可能某一块内存空间不再需要，这块内存空间称为垃圾，回收垃圾的叫垃圾回收器<br>内存泄露：一块内存空间不需要但垃圾回收器没法回收的内存就是内存泄露</p>
<p>垃圾回收机制：标记清除算法、引用计数算法（不用）</p>
<p>造成内存泄露的因素：一些未声明直接赋值的变量；未清除的定时器；过度的闭包；未清除的引用元素</p>
<h3 id="23-解析DOM树"><a href="#23-解析DOM树" class="headerlink" title="23.解析DOM树"></a>23.解析DOM树</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeTag</span>(<span class="params">fragment</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">new</span> DOMParser().parseFromString(fragment, <span class="string">&#x27;text/html&#x27;</span>).body.textContent || <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">removeTag(<span class="string">`&lt;div class=&quot;container&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;h1&gt;DOM Parser&lt;/h1&gt;</span></span><br><span class="line"><span class="string">    &lt;ul&gt;</span></span><br><span class="line"><span class="string">      &lt;li&gt;Lorem.&lt;/li&gt;</span></span><br><span class="line"><span class="string">      &lt;li&gt;Maiores.&lt;/li&gt;</span></span><br><span class="line"><span class="string">      &lt;li&gt;Sapiente!&lt;/li&gt;</span></span><br><span class="line"><span class="string">      &lt;li&gt;Doloremque.&lt;/li&gt;</span></span><br><span class="line"><span class="string">    &lt;/ul&gt;</span></span><br><span class="line"><span class="string">  &lt;/div&gt;`</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// output:</span></span><br><span class="line"><span class="comment">// DOM Parser</span></span><br><span class="line">        </span><br><span class="line"><span class="comment">// Lorem.</span></span><br><span class="line"><span class="comment">// Maiores.</span></span><br><span class="line"><span class="comment">// Sapiente!</span></span><br><span class="line"><span class="comment">// Doloremque.</span></span><br><span class="line">        </span><br></pre></td></tr></table></figure>
<h3 id="22-大文件切片上传"><a href="#22-大文件切片上传" class="headerlink" title="22. 大文件切片上传"></a>22. 大文件切片上传</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>大文件上传切片<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fileUpload&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./upload.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>upload.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> uploadFile = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#fileUpload&quot;</span>)</span><br><span class="line"></span><br><span class="line">uploadFile.onchange = <span class="keyword">async</span> e =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> file = e.target.files[<span class="number">0</span>]</span><br><span class="line">  <span class="built_in">console</span>.time(<span class="string">&quot;upfile&quot;</span>)</span><br><span class="line">  <span class="keyword">const</span> chunks = <span class="keyword">await</span> cutFile(file) <span class="comment">// 获取分片结果</span></span><br><span class="line">  <span class="built_in">console</span>.timeEnd(<span class="string">&quot;upfile&quot;</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;切片：&quot;</span>, chunks)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> CHUNK_SIZE = <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">5</span> <span class="comment">// 5M</span></span><br><span class="line"><span class="keyword">const</span> THREAD_COUNT = navigator.hardwareConcurrency || <span class="number">4</span> <span class="comment">// 线程数量（切片运行在主线程可能会造成阻塞，可开启别的线程进行分片工作）</span></span><br><span class="line"><span class="comment">// 分片</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">cutFile</span>(<span class="params">file</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 比如 file.size :70M, chunkCount: 14  workerChunkCount: 4</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="keyword">async</span> (resolve, reject) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> chunkCount = <span class="built_in">Math</span>.ceil(file.size / CHUNK_SIZE) <span class="comment">// 分片数量</span></span><br><span class="line">    <span class="keyword">const</span> workerChunkCount = <span class="built_in">Math</span>.ceil(chunkCount / THREAD_COUNT) <span class="comment">// 每个线程处理的分片数量</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;切片数量&quot;</span>, chunkCount)</span><br><span class="line">    <span class="keyword">const</span> result = []</span><br><span class="line">    <span class="comment">// 切片运行在主线程</span></span><br><span class="line">    <span class="comment">// for (let i = 0; i &lt; chunkCount; i++) &#123;</span></span><br><span class="line">    <span class="comment">//   const chunk = await createChunk(file, i, CHUNK_SIZE)</span></span><br><span class="line">    <span class="comment">//   result.push(chunk)</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="comment">// 开启其他线程去分片提高效率</span></span><br><span class="line">    <span class="keyword">let</span> finishWorker = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; THREAD_COUNT; i++) &#123;</span><br><span class="line">      <span class="keyword">const</span> worker = <span class="keyword">new</span> Worker(<span class="string">&quot;./worker.js&quot;</span>, &#123;</span><br><span class="line">        type: <span class="string">&quot;module&quot;</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="comment">// 每个线程起始切片和结束切片索引</span></span><br><span class="line">      <span class="keyword">const</span> startIndex = i * workerChunkCount <span class="comment">// 0-4 4-8 8-12 12-14</span></span><br><span class="line">      <span class="keyword">let</span> endIndex = startIndex + workerChunkCount</span><br><span class="line">      <span class="keyword">if</span> (endIndex &gt; chunkCount) &#123;</span><br><span class="line">        endIndex = chunkCount</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 发送消息</span></span><br><span class="line">      worker.postMessage(&#123;</span><br><span class="line">        file,</span><br><span class="line">        CHUNK_SIZE,</span><br><span class="line">        startIndex,</span><br><span class="line">        endIndex</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="comment">// 处理结束接受消息</span></span><br><span class="line">      worker.onmessage = <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(e.data) <span class="comment">// 数组</span></span><br><span class="line">        <span class="comment">// 保证切片顺序正确</span></span><br><span class="line">        <span class="comment">// i: index</span></span><br><span class="line">        <span class="comment">// 0: 0-4</span></span><br><span class="line">        <span class="comment">// 1: 4-8</span></span><br><span class="line">        <span class="comment">// 2: 8-12</span></span><br><span class="line">        <span class="comment">// 3: 12-14</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> index = startIndex; index &lt; endIndex; index++) &#123;</span><br><span class="line">          result[index] = e.data[index - startIndex] <span class="comment">// index - startIndex: 0 1 2 3</span></span><br><span class="line">        &#125;</span><br><span class="line">        worker.terminate() <span class="comment">// 收到消息后当前线程切片工作完成，结束线程</span></span><br><span class="line">        finishWorker++</span><br><span class="line">        <span class="keyword">if</span> (finishWorker === THREAD_COUNT) &#123;</span><br><span class="line">          <span class="comment">// 所有线程都完成</span></span><br><span class="line">          resolve(result)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 创建分片 slice截取</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createChunk</span>(<span class="params">file, index, chunkSize</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> start = index * chunkSize</span><br><span class="line">    <span class="keyword">const</span> end = start + chunkSize</span><br><span class="line">    <span class="keyword">const</span> fileReader = <span class="keyword">new</span> FileReader()</span><br><span class="line">    fileReader.onload = <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// console.log(&#x27;fileReader-onload&#x27;, e.target.result)</span></span><br><span class="line">      resolve(&#123;</span><br><span class="line">        start,</span><br><span class="line">        end,</span><br><span class="line">        index,</span><br><span class="line">        hash: e.target.result</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    fileReader.readAsArrayBuffer(file.slice(start, end))</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>worker.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">onmessage = <span class="keyword">async</span> (e) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> promises = []</span><br><span class="line">  <span class="keyword">const</span> &#123; file, CHUNK_SIZE, startIndex, endIndex &#125; = e.data</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> index = startIndex; index &lt; endIndex; index++) &#123;</span><br><span class="line">    promises.push(createChunk(file, index, CHUNK_SIZE))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="built_in">Promise</span>.all(promises)</span><br><span class="line">  postMessage(result)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建分片 slice截取</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createChunk</span>(<span class="params">file, index, chunkSize</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> start = index * chunkSize</span><br><span class="line">    <span class="keyword">const</span> end = start + chunkSize</span><br><span class="line">    <span class="keyword">const</span> fileReader = <span class="keyword">new</span> FileReader()</span><br><span class="line">    fileReader.onload = <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// console.log(&#x27;fileReader-onload&#x27;, e.target.result)</span></span><br><span class="line">      resolve(&#123;</span><br><span class="line">        start,</span><br><span class="line">        end,</span><br><span class="line">        index,</span><br><span class="line">        hash: e.target.result</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    fileReader.readAsArrayBuffer(file.slice(start, end))</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>不必等到全部切片再上传，可以开启其他线程进行切片，边切片边进行上传</p>
<p>监听上传进度：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 监听进度事件  </span></span><br><span class="line">xhr.upload.onprogress = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">if</span> (event.lengthComputable) &#123;  </span><br><span class="line">        <span class="keyword">const</span> percentComplete = (event.loaded / event.total) * <span class="number">100</span>;  </span><br><span class="line">        <span class="built_in">console</span>.log(percentComplete + <span class="string">&#x27;% 上传完成&#x27;</span>);  </span><br><span class="line">        <span class="comment">// 这里可以更新进度条或其他UI元素  </span></span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过xhr.upload中的progress方法可以实现监控每一个切片上传进度。<br>上传暂停的实现也比较简单，通过xhr.abort可以取消当前未完成上传切片的上传，实现上传暂停的效果，恢复上传就跟断点续传类似，先获取已上传的切片列表，然后重新发送未上传的切片。</p>
<p>切片计算hash以及整个文件hash：在文件传输过程中，通常会使用哈希值来校验文件在传输过程中是否发生损坏或被篡改。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> crypto = <span class="built_in">require</span>(<span class="string">&#x27;crypto&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> SparkMD5 = <span class="built_in">require</span>(<span class="string">&#x27;spark-md5&#x27;</span>); <span class="comment">// 按照js-md5 </span></span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">calculateChunkHash</span>(<span class="params">file, chunkSize</span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">const</span> fileHash = SparkMD5.ArrayBuffer.hash();  </span><br><span class="line">    <span class="keyword">const</span> chunks = [];  </span><br><span class="line">    <span class="keyword">let</span> offset = <span class="number">0</span>;  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">while</span> (offset &lt; file.size) &#123;  </span><br><span class="line">        <span class="keyword">const</span> chunk = file.slice(offset, offset + chunkSize);  </span><br><span class="line">        <span class="keyword">const</span> reader = <span class="keyword">new</span> FileReader();  </span><br><span class="line">  </span><br><span class="line">        reader.onload = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;  </span><br><span class="line">            <span class="keyword">const</span> chunkContent = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(event.target.result);  </span><br><span class="line">            fileHash.update(chunkContent);  </span><br><span class="line">            chunks.push(&#123;  </span><br><span class="line">                start: offset,  </span><br><span class="line">                end: offset + chunkSize,  </span><br><span class="line">                hash: crypto.createHash(<span class="string">&#x27;md5&#x27;</span>).update(chunkContent).digest(<span class="string">&#x27;hex&#x27;</span>) <span class="comment">// 单独计算切片文件hash</span></span><br><span class="line">            &#125;);  </span><br><span class="line">            offset += chunkSize;  </span><br><span class="line">  </span><br><span class="line">            <span class="comment">// 如果已经是最后一个切片，或者文件大小不是切片大小的整数倍  </span></span><br><span class="line">            <span class="keyword">if</span> (offset &gt;= file.size || offset % chunkSize !== <span class="number">0</span>) &#123;  </span><br><span class="line">                <span class="keyword">const</span> finalHash = fileHash.end();  </span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">&#x27;Final file hash:&#x27;</span>, finalHash);  </span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">&#x27;Chunk hashes:&#x27;</span>, chunks.map(<span class="function"><span class="params">chunk</span> =&gt;</span> chunk.hash));  </span><br><span class="line">                <span class="comment">// 在这里，你可以将最终的哈希值和每个切片的哈希值发送给服务器  </span></span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;;  </span><br><span class="line">  </span><br><span class="line">        reader.readAsArrayBuffer(chunk);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// 使用示例  </span></span><br><span class="line"><span class="keyword">const</span> fileInput = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;fileInput&#x27;</span>);  </span><br><span class="line">fileInput.addEventListener(<span class="string">&#x27;change&#x27;</span>, <span class="keyword">async</span> (event) =&gt; &#123;  </span><br><span class="line">    <span class="keyword">const</span> file = event.target.files[<span class="number">0</span>];  </span><br><span class="line">    <span class="keyword">if</span> (file) &#123;  </span><br><span class="line">        <span class="keyword">const</span> chunkSize = <span class="number">1024</span> * <span class="number">1024</span>; <span class="comment">// 1MB  </span></span><br><span class="line">        calculateChunkHash(file, chunkSize);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>限制切片上传并发请求数量：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MAX_CONCURRENT_REQUESTS = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">const</span> requests = [];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fetchWithPool</span>(<span class="params">chunk</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 将请求包装成Promise</span></span><br><span class="line">  <span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    <span class="keyword">let</span> formData = <span class="keyword">new</span> FormData()</span><br><span class="line">    formData.append(<span class="string">&#x27;chunk&#x27;</span>, chunk)</span><br><span class="line">    xhr.open(<span class="string">&#x27;POST&#x27;</span>, url, <span class="attr">data</span>: formData);</span><br><span class="line">    xhr.onload = <span class="function">() =&gt;</span> resolve(xhr.responseText);</span><br><span class="line">    xhr.onerror = <span class="function">() =&gt;</span> reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;Network error&#x27;</span>));</span><br><span class="line">    xhr.send();</span><br><span class="line">  &#125;);</span><br><span class="line"> </span><br><span class="line">  requests.push(promise);</span><br><span class="line"> </span><br><span class="line">  <span class="comment">// 如果请求数量达到限制，则等待当前请求完成后再发送新的请求</span></span><br><span class="line">  <span class="keyword">if</span> (requests.length &gt;= MAX_CONCURRENT_REQUESTS) &#123;</span><br><span class="line">    <span class="keyword">return</span> promise.then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">      requests.shift();</span><br><span class="line">      <span class="keyword">return</span> data;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">// 否则直接返回Promise</span></span><br><span class="line">  <span class="keyword">return</span> promise;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 使用async/await进行请求</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fetchWithPoolExample</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> chunks = [...];</span><br><span class="line">  <span class="keyword">const</span> results = [];</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> chunk <span class="keyword">of</span> chunks) &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> fetchWithPool(chunk);</span><br><span class="line">    results.push(result);</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="built_in">console</span>.log(results);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">fetchWithPoolExample();</span><br></pre></td></tr></table></figure>
<p>如何实现断点续传：<br>切片上传成功后，保存已上传成功的切片信息，当下次传输相同文件时，遍历切片列表，只选择未上传的切片进行上传。</p>
<p>如何保存已上传切片的信息：</p>
<ul>
<li>可以通过locaStorage等方式保存在前端浏览器中，这种方式不依赖于服务端，实现起来也比较方便，缺点在于如果用户清除了本地文件，会导致上传记录丢失</li>
<li>服务端本身知道哪些切片已经上传，因此可以由服务端额外提供一个根据文件hash查询已上传切片的接口，在上传文件前调用该文件的历史上传记录</li>
</ul>
<h3 id="23-单点登录"><a href="#23-单点登录" class="headerlink" title="23.单点登录"></a>23.单点登录</h3><p>多条产品线，共享同一套用户系统，抽离用户系统，形成用户中心</p>
<p>session+cookie模式：<br>认证中心登录成功后生成用户信息到session表里（sid:身份信息），然后将该 Session ID 存储在 Cookie 中，并返回给客户的端，客户端再次访问业务系统会带上cookie（包含sid），业务系统去认证中心验证sid是否有效，有效就可以访问业务系统登录后的资源。</p>
<p>认证中心会将用户信息存储session表里，session 存储在服务器里面，当用户同时在线量比较多时，这些 session 会占据较多的内存，需要在服务端定期的去清理过期的 session。</p>
<p>token模式：</p>
<p>用户-认证中心登录成功后返回给客户端一个token（jwt），客户端自己存储。客户端再访问业务系统携带token，业务系统自行验证token是否有效。</p>
<p>token+refresh模式：</p>
<p>用户-认证中心登录成功后返回给客户端token+refreshToken, token过期时间短，refreshToken长期有效，客户端访问业务系统携带token，由业务系统进行验证，如果token过期，客户端会用refreshToken去认证中心重新获取新的token，再去访问业务系统</p>
<h3 id="24-LRU缓存置换算法"><a href="#24-LRU缓存置换算法" class="headerlink" title="24.LRU缓存置换算法"></a>24.LRU缓存置换算法</h3><p>LRU：选择最近最久未使用的置换</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span> </span>&#123;</span><br><span class="line">  #map;</span><br><span class="line">  #length;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">length</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.#map = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">    <span class="built_in">this</span>.#length = length</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">get</span>(<span class="params">key</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.$map.get(key)) &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> value = <span class="built_in">this</span>.$map.get(key)</span><br><span class="line">    <span class="built_in">this</span>.#map.delete(key)</span><br><span class="line">    <span class="built_in">this</span>.#map.set(key, value)</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">set</span>(<span class="params">key, value</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.$map.get(key)) &#123;</span><br><span class="line">      <span class="built_in">this</span>.#map.delete(key)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.#map.set(key, value)</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.#map.size &gt; <span class="built_in">this</span>.#length) &#123;</span><br><span class="line">      <span class="keyword">const</span> firstkey = <span class="built_in">this</span>.#map.keys().next().value</span><br><span class="line">      <span class="built_in">this</span>.#map.delete(firstkey)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="25-判断是不是数组"><a href="#25-判断是不是数组" class="headerlink" title="25.判断是不是数组"></a>25.判断是不是数组</h3><h4 id="1-Object-prototype-toString-call"><a href="#1-Object-prototype-toString-call" class="headerlink" title="1.Object.prototype.toString.call([])"></a>1.Object.prototype.toString.call([])</h4><p>从原型入手，Array.prototype.isPrototypeOf(obj);<br>利用isPrototypeOf()方法判断Array是否在obj的原型链上</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = []</span><br><span class="line"><span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(arr) <span class="comment">// &#x27;[object Array]&#x27;</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(obj) <span class="comment">// &#x27;[object Object]&#x27;</span></span><br><span class="line"><span class="comment">// but</span></span><br><span class="line"><span class="keyword">let</span> obj1 = &#123;</span><br><span class="line">  [<span class="built_in">Symbol</span>.toStringTag]: <span class="string">&#x27;abc&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(obj1) <span class="comment">// &#x27;[object abc]&#x27;</span></span><br></pre></td></tr></table></figure>
<p>对象的Symbol.toStringTag属性，指向一个方法。在该对象上面调用Object.prototype.toString方法时，如果这个属性存在，它的返回值会出现在toString方法返回的字符串之中，表示对象的类型。也就是说，这个属性可以用来定制[object Object]或[object Array]中object后面的那个字符串。</p>
<h4 id="2-instanceof-Array"><a href="#2-instanceof-Array" class="headerlink" title="2.[] instanceof Array"></a>2.[] instanceof Array</h4><p>instanceof检测构造函数的prototype属性是否存在实例对象的原型链上</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[] <span class="keyword">instanceof</span> <span class="built_in">Array</span> <span class="comment">// true</span></span><br><span class="line"><span class="keyword">const</span> Array1 = <span class="built_in">window</span>.Array</span><br><span class="line"><span class="keyword">const</span> Array2 = iframe.contentWindow.Array</span><br><span class="line"><span class="keyword">const</span> arr = <span class="keyword">new</span> Array2()</span><br><span class="line">arr <span class="keyword">instanceof</span> <span class="built_in">Array</span> <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<h4 id="3-Array-isArray"><a href="#3-Array-isArray" class="headerlink" title="3.Array.isArray([])"></a>3.Array.isArray([])</h4><p>Array.isArray() 检查传递的值是否为 Array。它不检查值的原型链，也不依赖于它所附加的 Array 构造函数。<br>对于使用数组字面量语法或 Array 构造函数创建的任何值，它都会返回 true</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 下面的函数调用都返回 true</span></span><br><span class="line"><span class="built_in">Array</span>.isArray([]);</span><br><span class="line"><span class="built_in">Array</span>.isArray([<span class="number">1</span>]);</span><br><span class="line"><span class="built_in">Array</span>.isArray(<span class="keyword">new</span> <span class="built_in">Array</span>());</span><br><span class="line"><span class="built_in">Array</span>.isArray(<span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>));</span><br><span class="line"><span class="built_in">Array</span>.isArray(<span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3</span>));</span><br><span class="line"><span class="comment">// 鲜为人知的事实：其实 Array.prototype 也是一个数组：</span></span><br><span class="line"><span class="built_in">Array</span>.isArray(<span class="built_in">Array</span>.prototype);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 下面的函数调用都返回 false</span></span><br><span class="line"><span class="built_in">Array</span>.isArray();</span><br><span class="line"><span class="built_in">Array</span>.isArray(&#123;&#125;);</span><br><span class="line"><span class="built_in">Array</span>.isArray(<span class="literal">null</span>);</span><br><span class="line"><span class="built_in">Array</span>.isArray(<span class="literal">undefined</span>);</span><br><span class="line"><span class="built_in">Array</span>.isArray(<span class="number">17</span>);</span><br><span class="line"><span class="built_in">Array</span>.isArray(<span class="string">&quot;Array&quot;</span>);</span><br><span class="line"><span class="built_in">Array</span>.isArray(<span class="literal">true</span>);</span><br><span class="line"><span class="built_in">Array</span>.isArray(<span class="literal">false</span>);</span><br><span class="line"><span class="built_in">Array</span>.isArray(<span class="keyword">new</span> <span class="built_in">Uint8Array</span>(<span class="number">32</span>));</span><br><span class="line"><span class="comment">// 这不是一个数组，因为它不是使用数组字面量语法或 Array 构造函数创建的</span></span><br><span class="line"><span class="built_in">Array</span>.isArray(&#123; <span class="attr">__proto__</span>: <span class="built_in">Array</span>.prototype &#125;);</span><br></pre></td></tr></table></figure>
<p>当检测 Array 实例时，Array.isArray 优于 instanceof，因为 Array.isArray 能跨领域工作。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> iframe = <span class="built_in">document</span>.createElement(<span class="string">&quot;iframe&quot;</span>);</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(iframe);</span><br><span class="line"><span class="keyword">const</span> xArray = <span class="built_in">window</span>.frames[<span class="built_in">window</span>.frames.length + <span class="number">1</span>].Array;</span><br><span class="line"><span class="keyword">const</span> arr = <span class="keyword">new</span> xArray(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">// [1, 2, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 正确检查 Array</span></span><br><span class="line"><span class="built_in">Array</span>.isArray(arr); <span class="comment">// true</span></span><br><span class="line"><span class="comment">// arr 的原型是 xArray.prototype，它是一个不同于 Array.prototype 的对象</span></span><br><span class="line">arr.__proto__ == xArray.prototype <span class="comment">// true</span></span><br><span class="line">arr.__proto__ == <span class="built_in">Array</span>.prototype <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">arr <span class="keyword">instanceof</span> <span class="built_in">Array</span>; <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<h3 id="26-Reflect的本质"><a href="#26-Reflect的本质" class="headerlink" title="26.Reflect的本质"></a>26.Reflect的本质</h3><p>Reflect: 调用对象的基本方法。</p>
<p>针对js的对象的基本内部方法有：</p>
<p><img src="/ZJY.github.io/images/objectbase.png" alt="image"></p>
<p>支持对象被作为函数调用的其他基础内部方法:</p>
<p><img src="/ZJY.github.io/images/objectcall.png" alt="image"></p>
<p>这些对象的基本内部方法不对外暴漏，但是有了Reflect可以通过函数方式调用而不使用语法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;&#125;</span><br><span class="line"><span class="comment">// obj.a = &#x27;3&#x27; 语法</span></span><br><span class="line"><span class="built_in">Reflect</span>.set(obj, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;3&#x27;</span>)</span><br><span class="line"><span class="comment">// &#123;a: &#x27;3&#x27;&#125;</span></span><br></pre></td></tr></table></figure>
<p>当使用语法obj.a = ‘3’赋值时，执行代码时会先执行一个被封装过后的方法，方法里面调用了内部方法get</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="number">2</span>,</span><br><span class="line">  <span class="keyword">get</span> <span class="title">c</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.a + <span class="built_in">this</span>.b</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(obj.c) <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// [Get]]---(propertyKey, Receiver) → any---返回这个对象里 key 值为 propertyKey 的属性的值。如果必须运行一些的 ECMAScript 代码来检索这个属性值，Receiver 就会作为解析代码时的 this 值。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 因为obj.c调取get内部方法，Receiver即this传递的是obj，所以没办法更改this的值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 但是Reflect可以传递Receiver更改this</span></span><br><span class="line"><span class="built_in">Reflect</span>.get(obj, <span class="string">&#x27;c&#x27;</span>, &#123;<span class="attr">a</span>: <span class="number">3</span>, <span class="attr">b</span>: <span class="number">4</span>&#125;) <span class="comment">// 7</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="number">2</span>,</span><br><span class="line">  [<span class="built_in">Symbol</span>(<span class="string">&#x27;c&#x27;</span>)]: <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj, <span class="string">&#x27;d&#x27;</span>, &#123;</span><br><span class="line">  value: <span class="number">4</span>,</span><br><span class="line">  enumerable: <span class="literal">false</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(obj)) <span class="comment">// [&#x27;a&#x27;, &#x27;b&#x27;]</span></span><br><span class="line"><span class="comment">// Object.keys方法调用的封装后的方法里面设置过滤掉不可枚举的属性，调用内部方法OwnPropertyKeys：返回一个包含所有自身属性 key 值的 List。</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Reflect</span>.ownKeys(obj)) <span class="comment">//  [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;d&#x27;, Symbol(c)]</span></span><br><span class="line"><span class="comment">// OwnPropertyKeys对应的Reflect方法ownKeys，Reflect.ownKeys直接调用对象的内部方法可获取全部属性</span></span><br></pre></td></tr></table></figure>
<h3 id="27-img的srcset、size"><a href="#27-img的srcset、size" class="headerlink" title="27.img的srcset、size"></a>27.img的srcset、size</h3><p>srcset可以设置不同dpr使用的图片尺寸</p>
<p>图像的尺寸 = css尺寸 *  dpr  图片不会模糊</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">150px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">150px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">srcset</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="tag"><span class="string">  https://picsum.photos/id/164/150 1x,</span></span></span><br><span class="line"><span class="tag"><span class="string">  https://picsum.photos/id/164/300 2x,</span></span></span><br><span class="line"><span class="tag"><span class="string">  https://picsum.photos/id/164/450 3x,</span></span></span><br><span class="line"><span class="tag"><span class="string">  https://picsum.photos/id/164/600 4x,</span></span></span><br><span class="line"><span class="tag"><span class="string">  https://picsum.photos/id/164/750 5x,</span></span></span><br><span class="line"><span class="tag"><span class="string">  https://picsum.photos/id/164/900 6x,</span></span></span><br><span class="line"><span class="tag"><span class="string">&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>“<a target="_blank" rel="noopener" href="https://picsum.photos/id/164/150">https://picsum.photos/id/164/150</a>“ 1x, dpr为1时，使用150的图片</p>
<p>sizes: 媒体查询来响应图片大小，多个值用逗号隔开<br>例如：sizes=”(max-width: 300px) 50vw, 50vw”，<br>表示当视区宽度不大于300像素时候，图片的宽度限制为50vw，其他情况下，使用50vw,那么当视区宽度为200像素时，图片尺寸等于100px*dpr,<br>假设dpr为2，那么就匹配最接近的即150w</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">srcset</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="tag"><span class="string">    https://picsum.photos/id/164/150 150w,</span></span></span><br><span class="line"><span class="tag"><span class="string">    https://picsum.photos/id/164/300 300w</span></span></span><br><span class="line"><span class="tag"><span class="string">    https://picsum.photos/id/164/600 600w,</span></span></span><br><span class="line"><span class="tag"><span class="string">    https://picsum.photos/id/164/900 900w,</span></span></span><br><span class="line"><span class="tag"><span class="string">    https://picsum.photos/id/164/1200 1200w,</span></span></span><br><span class="line"><span class="tag"><span class="string">  &quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">sizes</span>=<span class="string">&quot;(max-width: 300px) 50vw,</span></span></span><br><span class="line"><span class="tag"><span class="string">  (max-width: 600px) 50vw,</span></span></span><br><span class="line"><span class="tag"><span class="string">  (max-width: 900px) 50vw,</span></span></span><br><span class="line"><span class="tag"><span class="string">  (max-width: 1200px) 50vw,</span></span></span><br><span class="line"><span class="tag"><span class="string">  50vw</span></span></span><br><span class="line"><span class="tag"><span class="string">  &quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="28-es2023中的数组纯函数"><a href="#28-es2023中的数组纯函数" class="headerlink" title="28.es2023中的数组纯函数"></a>28.es2023中的数组纯函数</h3><p>es2023的新数组函数：toSorted、toReversed、toSliced、with(index, value)-arr[index] = value<br>这些数组函数不会改变原数组的值只会返回更改后的值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// let arr = [1, 7, 3]</span></span><br><span class="line"><span class="comment">// arr.sort((a, b) =&gt; a + b)</span></span><br><span class="line"><span class="comment">// console.log(arr) // [1, 3, 7]</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">7</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> sortArr = arr.toSorted(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b)</span><br><span class="line"><span class="built_in">console</span>.log(sortArr, arr) <span class="comment">// [1, 3, 7]  [1, 7, 3]</span></span><br></pre></td></tr></table></figure>
<h3 id="29-动态执行js"><a href="#29-动态执行js" class="headerlink" title="29.动态执行js"></a>29.动态执行js</h3><p>1.使用eval: 同步代码,当前作用域</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">exec</span>(<span class="params">code</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">2</span></span><br><span class="line">  <span class="built_in">eval</span>(code)</span><br><span class="line">&#125;</span><br><span class="line">exec(<span class="string">&#x27;console.log(&quot;a&quot;, a)&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;sync&#x27;</span>)</span><br><span class="line"><span class="comment">// a 2 </span></span><br><span class="line"><span class="comment">// &#x27;sync&#x27;</span></span><br><span class="line"><span class="comment">// eval: 同步代码,当前作用域</span></span><br></pre></td></tr></table></figure>
<p>2.setTimeout: 异步，全局作用域</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">exec</span>(<span class="params">code</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">2</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(code, <span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line">exec(<span class="string">&#x27;console.log(&quot;a&quot;, a)&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;asynchronous&#x27;</span>)</span><br><span class="line"><span class="comment">// &#x27;asynchronous&#x27;</span></span><br><span class="line"><span class="comment">// a 1</span></span><br></pre></td></tr></table></figure>
<p>3.创建script标签加入body: 同步，全局作用域</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">exec</span>(<span class="params">code</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">2</span></span><br><span class="line">  <span class="keyword">const</span> script = <span class="built_in">document</span>.createElement(<span class="string">&#x27;script&#x27;</span>)</span><br><span class="line">  script.innerHTML = code</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(script)</span><br><span class="line">&#125;</span><br><span class="line">exec(<span class="string">&#x27;console.log(&quot;a&quot;, a)&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;sync&#x27;</span>)</span><br><span class="line"><span class="comment">// a 1</span></span><br><span class="line"><span class="comment">// &#x27;sync&#x27;</span></span><br></pre></td></tr></table></figure>
<p>4.Function: 同步，全局作用域, 无需创建多余的标签</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ar a = <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">exec</span>(<span class="params">code</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">2</span></span><br><span class="line">  <span class="keyword">let</span> fn = <span class="keyword">new</span> <span class="built_in">Function</span>(code) <span class="comment">// 创建一个function，函数体为code</span></span><br><span class="line">  fn()</span><br><span class="line">&#125;</span><br><span class="line">exec(<span class="string">&#x27;console.log(&quot;a&quot;, a)&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;sync&#x27;</span>)</span><br><span class="line"><span class="comment">// a 1</span></span><br><span class="line"><span class="comment">// &#x27;sync&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="node模块查找策略"><a href="#node模块查找策略" class="headerlink" title="node模块查找策略"></a>node模块查找策略</h3><p>代码使用require、import，根据路径怎么查找文件<br>require(‘./a’) require(‘/a’)</p>
<p>文件查找：</p>
<p>  按照路径查找a，后缀补js查找a.js找不到查找a.json还找不到去查找文件夹</p>
<p>文件夹查找：</p>
<p>  首先查看a文件夹下面是否有package.json文件，配置”main”: “./t.js”,就去找a/t.js<br>  如果a文件夹下面没有package.json文件或者没有配置main或者配置了一个不存在的路径，就去查找<br>  a文件夹下面有没有index.js, index.json文件</p>
<p>require(‘a’)：</p>
<p>内置模块：</p>
<p>  如果路径直接写名字，首先会去内置模块查找，比如node内置模块http,fs, path等<br>  如果a在内置模块就使用，不是就去第三方模块查找</p>
<p>第三方模块：</p>
<p>  从node_modules查找，如果当前node_modules没有a，就去上级目录查找</p>
<h3 id="vue状态仓库持久化：vuex、pina"><a href="#vue状态仓库持久化：vuex、pina" class="headerlink" title="vue状态仓库持久化：vuex、pina"></a>vue状态仓库持久化：vuex、pina</h3><p>vuex、pina都是存储在内存里，一旦刷新页面就没了</p>
<p>vuex：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> counter <span class="keyword">from</span> <span class="string">&#x27;./counter&#x27;</span></span><br><span class="line"><span class="keyword">import</span> persistPligin <span class="keyword">from</span> <span class="string">&quot;./persistPligin&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(&#123;</span><br><span class="line">  modules: &#123;</span><br><span class="line">    counter</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [persistPligin]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// persistPligin.js</span></span><br><span class="line"><span class="keyword">const</span> KEY = <span class="string">&#x27;vuex-store&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params">store</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 保存仓库数据到本地</span></span><br><span class="line">  <span class="built_in">console</span>.log(store)</span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;beforeunload&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">localStorage</span>.setItem(KEY, <span class="built_in">JSON</span>.stringify(store.state))</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// 恢复仓库数据</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> localState = <span class="built_in">localStorage</span>.getItem(KEY)</span><br><span class="line">    <span class="keyword">if</span> (localState) &#123;</span><br><span class="line">      store.replaceState(<span class="built_in">JSON</span>.parse(localState))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或者使用第三方库比如vuex-persist</p>
<p>pina：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> persistPligin <span class="keyword">from</span> <span class="string">&quot;./store/persistPligin&quot;</span></span><br><span class="line"><span class="keyword">const</span> pinia = createPinia()</span><br><span class="line">pinia.use(persistPligin)</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// persistPligin.js</span></span><br><span class="line"><span class="keyword">const</span> KEY_PREFIX = <span class="string">&#x27;pina_store_&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; store, id &#125; = context</span><br><span class="line">  <span class="keyword">const</span> KEY = KEY_PREFIX + id</span><br><span class="line">  <span class="comment">// 保存仓库数据到本地</span></span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;beforeunload&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">localStorage</span>.setItem(KEY, <span class="built_in">JSON</span>.stringify(store.$state))</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// 恢复仓库数据</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> localState = <span class="built_in">localStorage</span>.getItem(KEY)</span><br><span class="line">    <span class="keyword">if</span> (localState) &#123;</span><br><span class="line">      store.$patch(<span class="built_in">JSON</span>.parse(localState))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>也可以使用第三方插件实现持久话存储</p>
<h3 id="css选择器focus-within、has、-first-letter、selection"><a href="#css选择器focus-within、has、-first-letter、selection" class="headerlink" title="css选择器focus-within、has、 first-letter、selection"></a>css选择器focus-within、has、 first-letter、selection</h3><p><code>:focus-within</code> CSS 伪类表示当元素或其任意后代元素被聚焦时，将匹配该元素.</p>
<p>CSS 函数式伪类 <code>:has()</code> 表示一个元素，如果作为参数传递的任何相对选择器在锚定到该元素时，至少匹配一个元素.</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span><span class="selector-pseudo">:has(+</span> <span class="selector-tag">h2</span>) &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0.25rem</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>CSS 伪元素 <code>::first-letter</code>会选中某 block-level element（块级元素）第一行的第一个字母，并且文字所处的行之前没有其他内容</p>
<p><code>::selection</code> CSS 伪元素应用于文档中被用户高亮的部分（比如使用鼠标或其他选择设备选中的部分）</p>
<h3 id="文件上传、文件夹、拖拽上传"><a href="#文件上传、文件夹、拖拽上传" class="headerlink" title="文件上传、文件夹、拖拽上传"></a>文件上传、文件夹、拖拽上传</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>上传文件-支持文件夹-拖拽等<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.drop</span> &#123;</span></span><br><span class="line">      width: 800px;</span><br><span class="line">      height: 300px;</span><br><span class="line">      border: 1px solid black;</span><br><span class="line">      border-radius: 10px;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;drop&quot;</span>&gt;</span>拖拽<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  &lt;!-+ multiple 支持多选文件 --&gt;</span><br><span class="line">  &lt;!-+ webkitdirectory mozdirectory odirectory 文件支持目录选择--&gt;</span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fileFile&quot;</span> <span class="attr">multiple</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">id</span>=<span class="string">&quot;filepicker&quot;</span> <span class="attr">multiple</span> <span class="attr">webkitdirectory</span> <span class="attr">mozdirectory</span> <span class="attr">odirectory</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;listing&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 选择文件</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">&quot;fileFile&quot;</span>).addEventListener(</span></span><br><span class="line"><span class="javascript">      <span class="string">&quot;change&quot;</span>,</span></span><br><span class="line">      (event) =&gt; &#123;</span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> output = <span class="built_in">document</span>.getElementById(<span class="string">&quot;listing&quot;</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span> (<span class="keyword">const</span> file <span class="keyword">of</span> event.target.files) &#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(file)</span></span><br><span class="line"><span class="javascript">          <span class="keyword">let</span> item = <span class="built_in">document</span>.createElement(<span class="string">&quot;li&quot;</span>);</span></span><br><span class="line"><span class="javascript">          item.textContent = file.name + <span class="string">&#x27;----&#x27;</span> + file.size;</span></span><br><span class="line">          output.appendChild(item);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"><span class="javascript">      <span class="literal">false</span>,</span></span><br><span class="line">    );</span><br><span class="line"><span class="javascript">    <span class="comment">// 选择文件夹</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">&quot;filepicker&quot;</span>).addEventListener(</span></span><br><span class="line"><span class="javascript">      <span class="string">&quot;change&quot;</span>,</span></span><br><span class="line">      (event) =&gt; &#123;</span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> output = <span class="built_in">document</span>.getElementById(<span class="string">&quot;listing&quot;</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span> (<span class="keyword">const</span> file <span class="keyword">of</span> event.target.files) &#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(file)</span></span><br><span class="line"><span class="javascript">          <span class="keyword">let</span> item = <span class="built_in">document</span>.createElement(<span class="string">&quot;li&quot;</span>);</span></span><br><span class="line">          item.textContent = file.webkitRelativePath;</span><br><span class="line">          output.appendChild(item);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"><span class="javascript">      <span class="literal">false</span>,</span></span><br><span class="line">    );</span><br><span class="line"><span class="javascript">    <span class="comment">// 拖拽</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> drop = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.drop&#x27;</span>)</span></span><br><span class="line"><span class="javascript">    drop.ondragenter = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line">      e.preventDefault()</span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">    drop.ondragover = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line">      e.preventDefault()</span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">    drop.ondrop = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line">      e.preventDefault()</span><br><span class="line"><span class="javascript">      <span class="comment">// 如果只支持拖拽文件</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// const files = e.dataTransfer.files</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 支持拖拽文件夹</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> e.dataTransfer.items) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> entry = item.webkitGetAsEntry()</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(entry)</span></span><br><span class="line"><span class="javascript">        <span class="comment">// filesystem: DOMFileSystem: &#123;name: &#x27;http_127.0.0.1_5500:Isolated_AF5320443A64781FE8803A9C403E7049&#x27;, root: DirectoryEntry&#125;</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// fullPath: &quot;/1.js&quot;</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// isDirectory:false</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// isFile:true</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// name: &quot;1.js&quot;</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (entry.isDirectory) &#123; <span class="comment">// 目录                      </span></span></span><br><span class="line"><span class="javascript">          <span class="keyword">const</span> reader = entry.createReader()</span></span><br><span class="line"><span class="javascript">          reader.readEntries(<span class="function">(<span class="params">entries</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(entries)</span></span><br><span class="line">          &#125;)</span><br><span class="line"><span class="javascript">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// 文件</span></span></span><br><span class="line"><span class="javascript">          entry.file(<span class="function">(<span class="params">f</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(f)</span></span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="vue组建命名规范"><a href="#vue组建命名规范" class="headerlink" title="vue组建命名规范"></a>vue组建命名规范</h3><p>大驼峰<code>&lt;StarRate&gt;</code>、段横线<code>&lt;star-rate&gt;</code><br>组件命名：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> StarRate <span class="keyword">from</span> <span class="string">&#x27;./StarRate&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    abc: StarRate <span class="comment">// abc是组件真实名称</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>组件中的name：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;StartRate&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里name的用途：</p>
<ul>
<li>组件递归引用</li>
<li>调试工具显示</li>
<li>和keep-alive配合</li>
</ul>
<h3 id="浏览器自动播放策略"><a href="#浏览器自动播放策略" class="headerlink" title="浏览器自动播放策略"></a>浏览器自动播放策略</h3><p>1、互动后播放</p>
<p>先尝试自动播放，若发生异常，则引导用户进行互动操作，然后再进行播放</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vdo = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;video&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> btn = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.play&#x27;</span>)</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">play</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> vdo.play()</span><br><span class="line">    btn.style.display = <span class="string">&#x27;none&#x27;</span></span><br><span class="line">    btn.removeEventListener(<span class="string">&#x27;click&#x27;</span>, play)</span><br><span class="line">  &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">    btn.style.display = <span class="string">&#x27;flex&#x27;</span></span><br><span class="line">    btn.addEventListener(<span class="string">&#x27;click&#x27;</span>, play)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">play()</span><br></pre></td></tr></table></figure>
<p>2、互动后出声</p>
<p>先静音播放，然后根据是否能自动播放决定是否取消静音：</p>
<p>1、能自动播放，取消静音<br>2、不能自动播放，引导用户进行互动操作后取消静音。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vdo = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;video&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> btn = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.play&#x27;</span>)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">play</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  vdo.muted = <span class="literal">true</span></span><br><span class="line">  vdo.play()</span><br><span class="line">  <span class="keyword">const</span> ctx = <span class="keyword">new</span> AudioContext() <span class="comment">// 音频上下文</span></span><br><span class="line">  <span class="keyword">const</span> canAutoPlay = ctx.state === <span class="string">&#x27;running&#x27;</span> <span class="comment">// 音频能够播放</span></span><br><span class="line">  ctx.close()</span><br><span class="line">  <span class="keyword">if</span> (canAutoPlay) &#123;</span><br><span class="line">    vdo.muted = <span class="literal">false</span></span><br><span class="line">    btn.style.display = <span class="string">&#x27;none&#x27;</span></span><br><span class="line">    btn.removeEventListener(<span class="string">&#x27;click&#x27;</span>, play)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    btn.style.display = <span class="string">&#x27;flex&#x27;</span></span><br><span class="line">    btn.addEventListener(<span class="string">&#x27;click&#x27;</span>, play)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="web-api"><a href="#web-api" class="headerlink" title="web api"></a>web api</h3><p>环境： 浏览器、node、微信小程序<br>ES: EcmaScript，是一个语言标准，定义语法、标准库，是一个标准文档<br>环境API： 浏览器：Web API</p>
<p>JS：ES + Web API</p>
<h3 id="数字字面量"><a href="#数字字面量" class="headerlink" title="数字字面量"></a>数字字面量</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">01</span></span><br><span class="line"><span class="comment">// output: 1</span></span><br><span class="line"><span class="number">08</span></span><br><span class="line"><span class="comment">// output: 8</span></span><br><span class="line"><span class="number">09</span></span><br><span class="line"><span class="comment">// output: 9</span></span><br><span class="line"><span class="number">010</span></span><br><span class="line"><span class="comment">// output: 8 // 数字字面量前面加0，尝试转换8进制，转换不成功转成10进制</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 八进制0o</span></span><br><span class="line">0o8</span><br><span class="line"><span class="comment">// output: caught SyntaxError: Invalid or unexpected token</span></span><br><span class="line"><span class="number">0o10</span></span><br><span class="line"><span class="comment">// output:8</span></span><br><span class="line"><span class="number">0o11</span></span><br><span class="line"><span class="comment">// output:9</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 十六进制0x</span></span><br><span class="line"><span class="number">0x123456</span></span><br><span class="line"><span class="comment">// output: 1193046</span></span><br><span class="line"><span class="comment">// 二进制0b</span></span><br><span class="line"><span class="number">0b010101</span></span><br><span class="line"><span class="comment">// output：21</span></span><br><span class="line"></span><br><span class="line"><span class="number">1e10</span></span><br><span class="line"><span class="comment">// 10000000000</span></span><br><span class="line"><span class="number">3.14e10</span></span><br><span class="line"><span class="comment">// 31400000000</span></span><br><span class="line"></span><br><span class="line"><span class="number">11.</span>toString()</span><br><span class="line"><span class="comment">// VM2977:1 Uncaught SyntaxError: Invalid or unexpected token</span></span><br><span class="line"><span class="comment">// 11.会认为是小数</span></span><br><span class="line"><span class="number">11.</span>.toString()</span><br><span class="line"><span class="comment">// &#x27;11&#x27;</span></span><br><span class="line"><span class="comment">// 第一个点是小数点，第二个点是调用方法的点</span></span><br></pre></td></tr></table></figure>
<h3 id="随机数"><a href="#随机数" class="headerlink" title="随机数"></a>随机数</h3><p>随机16进制颜色</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">randomColor</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;#&#x27;</span> + <span class="built_in">Math</span>.random().toString(<span class="number">16</span>).substring(<span class="number">2</span>, <span class="number">8</span>).padEnd(<span class="number">6</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">randomColor()</span><br><span class="line"><span class="comment">// &#x27;#f371b3&#x27;</span></span><br></pre></td></tr></table></figure>
<p>随机字符串：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">randomStr</span>(<span class="params">len = <span class="number">6</span></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Math.random().toString(36): &#x27;0.d88kqf4iy54&#x27; 截取0. 后11位</span></span><br><span class="line">    <span class="keyword">if</span> (len &lt;= <span class="number">11</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.random().toString(<span class="number">36</span>).substring(<span class="number">2</span>, <span class="number">2</span>+len).padEnd(len, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">        </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> randomStr(<span class="number">11</span>) + randomStr(len + <span class="number">11</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">randomStr(<span class="number">20</span>)</span><br><span class="line"><span class="comment">// &#x27;3oc4csdw5pra4e5zw1tc&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="数字格式化"><a href="#数字格式化" class="headerlink" title="数字格式化"></a>数字格式化</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">&#x27;100000000000&#x27;</span></span><br><span class="line"><span class="comment">// 前瞻运算符匹配位置</span></span><br><span class="line"><span class="keyword">const</span> r = str.replace(<span class="regexp">/\B(?=(\d&#123;3&#125;)+$)/g</span>, <span class="string">&#x27;,&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(r)</span><br><span class="line"><span class="comment">// 100,000,000,000</span></span><br></pre></td></tr></table></figure>
<p>(?=)前瞻运算符匹配位置<br>(\d{3})+ 连续3个数字匹配1-多次<br>\B非单词边界，即: ,100,1000,1000, 1前面边界</p>
<h3 id="层叠规则"><a href="#层叠规则" class="headerlink" title="层叠规则"></a>层叠规则</h3><p>computed style样式计算： 声明、层叠、继承、默认<br>visual fomatting model视觉格式化模型</p>
<p>层叠：解决样式冲突</p>
<ul>
<li><p>比较优先级：</p>
<ul>
<li>作者样式表!important</li>
<li>默认样式表!important</li>
<li>作者样式表</li>
<li>默认样式表</li>
</ul>
</li>
<li><p>比较特殊性（权重）（四位：?,?,?,?）高位相同比较下一位</p>
<ul>
<li>第一位：内联样式style为1，否则为0</li>
<li>第二位：元素所属选择器所有的id个数，1个id为1，100个id为100</li>
<li>第三位：元素所属选择器所有的类选择器+属性选择器+伪类选择器的个数</li>
<li>第四位：元素所属选择器所有的元素选择器+伪元素选择器的个数</li>
</ul>
</li>
<li><p>源次序：样式在源代码里面的次序，后面样式覆盖前面</p>
</li>
</ul>
<h3 id="布尔类型"><a href="#布尔类型" class="headerlink" title="布尔类型"></a>布尔类型</h3><ul>
<li>布尔类型：ture false</li>
<li>布尔判定：假：null undefined false NaN 0 ‘’<br>if (xxx)<br>xxx || yyy<br>xxx &amp;&amp; yyy<br>xxx ? xxx : yyy</li>
<li>短路运算<br>xxx || yyy 最后一个运算的是啥就是啥 console.log(0 || NaN) // NaN<br>xxx &amp;&amp; yyy console.log(0 &amp;&amp; NaN) // 0<br>obj.a.b.c.d.e:<br>obj &amp;&amp; obj.a &amp;&amp; obj.a.b &amp;&amp; obj.a.b.c &amp;&amp; obj.a.b.c.d &amp;&amp; obj.a.b.c.d.e<br>obj?.a?.b?.c?.d?.e</li>
</ul>
<h3 id="赋值运算"><a href="#赋值运算" class="headerlink" title="赋值运算"></a>赋值运算</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123; <span class="attr">n</span>: <span class="number">1</span>&#125;</span><br><span class="line"><span class="keyword">var</span> b = a <span class="comment">// &#123;n: 1&#125;</span></span><br><span class="line">a.x = a = &#123; <span class="attr">n</span>: <span class="number">2</span>&#125; <span class="comment">// </span></span><br><span class="line"><span class="built_in">console</span>.log(a.x) <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(b.x) <span class="comment">// &#123; n: 2&#125;</span></span><br></pre></td></tr></table></figure>
<p>a.x = (a = {n : 2})<br>a的内存空间存一个x属性， a = {n : 2}, 给a重新开辟一块内存，a = {n: 2},此时b = {n: 1, x: undefined},<br>将a = { n: 2}的值赋值给a.x（a.x已经计算过，不再查找）, 即原先a和b共同的内存空间{n: 1, x: undefined}将{n:2}赋值给x，即<code>b = &#123;n:1, x: &#123;n:2&#125;&#125;</code></p>
<h3 id="js数据类型和typeof"><a href="#js数据类型和typeof" class="headerlink" title="js数据类型和typeof"></a>js数据类型和typeof</h3><p>原始类型：Number、String、Boolean、null、undefined、Symbol、BigInt<br>对应typeof：number、string、boolean、object、undefined、symbol、bigint<br>对象类型：Object<br>对应typeof：object、function</p>
<h3 id="ssr服务端渲染"><a href="#ssr服务端渲染" class="headerlink" title="ssr服务端渲染"></a>ssr服务端渲染</h3><p>什么是 SSR？​<br>Vue.js 是一个用于构建客户端应用的框架。默认情况下，Vue 组件的职责是在浏览器中生成和操作 DOM。然而，Vue 也支持将组件在服务端直接渲染成 HTML 字符串，作为服务端响应返回给浏览器，最后在浏览器端将静态的 HTML“激活”(hydrate) 为能够交互的客户端应用。</p>
<p>一个由服务端渲染的 Vue.js 应用也可以被认为是“同构的”(Isomorphic) 或“通用的”(Universal)，因为应用的大部分代码同时运行在服务端和客户端。</p>
<p>为什么要用 SSR？​<br>与客户端的单页应用 (SPA) 相比，SSR 的优势主要在于：</p>
<ul>
<li><p>更快的首屏加载：这一点在慢网速或者运行缓慢的设备上尤为重要。服务端渲染的 HTML 无需等到所有的 JavaScript 都下载并执行完成之后才显示，所以你的用户将会更快地看到完整渲染的页面。除此之外，数据获取过程在首次访问时在服务端完成，相比于从客户端获取，可能有更快的数据库连接。这通常可以带来更高的核心 Web 指标评分、更好的用户体验，而对于那些“首屏加载速度与转化率直接相关”的应用来说，这点可能至关重要。</p>
</li>
<li><p>统一的心智模型：你可以使用相同的语言以及相同的声明式、面向组件的心智模型来开发整个应用，而不需要在后端模板系统和前端框架之间来回切换。</p>
</li>
<li><p>更好的 SEO：搜索引擎爬虫可以直接看到完全渲染的页面。</p>
</li>
</ul>
<p>使用 SSR 时还有一些权衡之处需要考量：</p>
<ul>
<li><p>开发中的限制。浏览器端特定的代码只能在某些生命周期钩子中使用；一些外部库可能需要特殊处理才能在服务端渲染的应用中运行。</p>
</li>
<li><p>更多的与构建配置和部署相关的要求。服务端渲染的应用需要一个能让 Node.js 服务器运行的环境，不像完全静态的 SPA 那样可以部署在任意的静态文件服务器上。</p>
</li>
<li><p>更高的服务端负载。在 Node.js 中渲染一个完整的应用要比仅仅托管静态文件更加占用 CPU 资源，因此如果你预期有高流量，请为相应的服务器负载做好准备，并采用合理的缓存策略。</p>
</li>
</ul>
<p>在为你的应用使用 SSR 之前，你首先应该问自己是否真的需要它。这主要取决于首屏加载速度对应用的重要程度。例如，如果你正在开发一个内部的管理面板，初始加载时的那额外几百毫秒对你来说并不重要，这种情况下使用 SSR 就没有太多必要了。然而，在内容展示速度极其重要的场景下，SSR 可以尽可能地帮你实现最优的初始加载性能。</p>
<p>SSR vs. SSG​<br>静态站点生成 (Static-Site Generation，缩写为 SSG)，也被称为预渲染，是另一种流行的构建快速网站的技术。如果用服务端渲染一个页面所需的数据对每个用户来说都是相同的，那么我们可以只渲染一次，提前在构建过程中完成，而不是每次请求进来都重新渲染页面。预渲染的页面生成后作为静态 HTML 文件被服务器托管。</p>
<p>SSG 保留了和 SSR 应用相同的性能表现：它带来了优秀的首屏加载性能。同时，它比 SSR 应用的花销更小，也更容易部署，因为它输出的是静态 HTML 和资源文件。这里的关键词是静态：SSG 仅可以用于消费静态数据的页面，即数据在构建期间就是已知的，并且在多次部署期间不会改变。每当数据变化时，都需要重新部署。</p>
<p>如果你调研 SSR 只是为了优化为数不多的营销页面的 SEO (例如 /、/about 和 /contact 等)，那么你可能需要 SSG 而不是 SSR。SSG 也非常适合构建基于内容的网站，比如文档站点或者博客。事实上，你现在正在阅读的这个网站就是使用 VitePress 静态生成的，它是一个由 Vue 驱动的静态站点生成器。</p>
<p>nuxt.js：一个基于 Vue.js 的服务端渲染应用框架.</p>
<h3 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h3><p>作用域规定了如何设置变量，当前执行代码对变量的访问权限<br>js采用词法作用域即静态作用域，函数定义的时候就已经确定了作用域</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> value = <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> value = <span class="number">2</span></span><br><span class="line">  get()</span><br><span class="line">&#125;</span><br><span class="line">get() <span class="comment">// 1</span></span><br><span class="line">getFn() <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<p>变量对象：当前代码段中，所有的变量、函数、形参等组成的对象<br>全局变量对象variable object VO函数由于被执行才激活actived object AO</p>
<h3 id="作用域链"><a href="#作用域链" class="headerlink" title="作用域链"></a>作用域链</h3><p>是变量对象的集合，就是变量对象组成的链式结构<br>js中函数存在一个隐式属性[[scopes]]，保存当前函数的执行上下文，数据结构式链式的，因此被称为作用域链。<br>一系列AO对象组成的一个链式结构</p>
<p>[[scopes]]在函数声明时产生，在函数调用时更新：在函数调用时，将该函数的AO对象压入unnshift到[[scopes]]中</p>
<p><strong>作用域链的作用：</strong><br>作用域链的作用是保证执行环境里有权访问的变量和函数是有序的，作用域链的变量只能向上访问，访问到window即终止，作用域链的变量向下访问是禁止的。<br>函数内部可以访问函数外部的变量，函数外部不可以访问函数内部的变量</p>
<p>函数执行完后作用域链就断开销毁</p>
<h3 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h3><p>小记：<br>  loader：test属性表示哪些文件被转换 use属性定义在进行转换时使用哪个loader<br>  css-loader: 将css资源转换成commonjs模块到js中<br>  style-loader：将css-loader生成的js模块的css代码插入到页面的style标签中<br>  less-loader/sass-loader/stylus-loader：将less、sass、stylus编译成css<br>  处理图片资源：<br>  webpack4: file-loader, url-loader<br>  webpack5: asset/resource, asset/inline, asset/source, asset 资源模块类型<br>  rules: [{ test: /.png$/, type: ‘asset’}]<br>  将文件输出到指定资源目录：<br>  rules: [<br>    {<br>      test: /.png$/,<br>      …<br>      generator: {<br>        filename: ‘static/image/[hash][ext]’<br>      }<br>    }<br>  ]<br>  每次构建前清理dist文件夹：<br>  output: { clean: true }<br>  eslint负责语法检验，prettier负责代码风格检测<br>  webpack4使用eslint-laoder，webpack5使用eslint-webpack-plugins<br>  babel负责将es6语法转换为向后兼容的js语法，能够运行在当前浏览器和旧版本浏览器中.babel-loader<br>  babel-preset-env: 只转换语法，不转换新的API</p>
<p>  HtmlWebpackPlugin:生成一个html5文件将打包输出的所有bundle都都在script标签引入<br>  webpack-dev-server:监听文件改变，自动打包</p>
<p>  css处理，提取css文件，css-loader和style-loader将css文件打包到js文件中在style标签引入，会使网站出现闪屏<br>  mini-css-extract-plugin:将css文件单独提取出来，在html文件中通过link引入。<br>  rules: [<br>  {<br>    test: /.css$/i,<br>    use: [MiniCssExtractPlugin.loader, “css-loader”],<br>  }]</p>
<p>  css兼容性处理：postcss-loader postcss postcss-preset-env<br>  在package.json中配置需要浏览器兼容的程度: “browserslint: {…}”<br>  优化和压缩css：css-minimizer-webpack-plugin 配置在optimization: { minimizer: [new CssMinimizerPlugin()]}</p>
<p>  启用HMR HotMouduleReplacement，热模块更替，在程序运行中添加、删除、更换某个模块的代码而无需加载整个页面，开发时更改某个模块的代码，webpack会默认将所有模块打包编译，速度很慢。devServer: {hot: true},但是hot: true不支持js热模块替换，js更改整个页面都重新刷新.实际使用框架，vue-loader、react-hot-loader解决热更替</p>
<p>  oneOf: 每个文件只能被一个loader配置处理. rules: [oneOf[…]]</p>
<p>  开启cache缓存，每次打包都要经过eslint检查和babel编译，可以缓存之前的检查和编译结果，提高打包速度。在babel-loaderder和eslint-plugin的配置开启cache缓存</p>
<p>  Thread-loader多进程，当项目越来越大，打包速度更慢，使用多线程同时处理js文件，配置时将此loader放置在所有loader之前</p>
<p>  TerserWebpackPlugin压缩js代码<br>  Tree-shaking：移除未使用代码减少代码体积<br>  减少babel代码体积：@babel/plugin-transform-runtime</p>
<p>  image-minimizer-webpack-plugin:本地静态图片压缩，减少代码体积</p>
<p>  代码分割：打包时会把所有js文件打包到一个js文件中，体积太大如果渲染首页，就应该只加载首页所需的js<br>  代码分割：<br>  分割文件，将打包代码分割成多个js文件<br>  按需加载，需要哪个文件加载哪个<br>  配置：optimization.splitChunks</p>
<p>  自定义loader：clean-log-loader</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// clean-log-loader</span></span><br><span class="line"><span class="comment">// 清理console.log</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> context.replace(<span class="regexp">/console\.log\(.*\);?/g</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">  use: [<span class="string">&#x27;./loaders/clean-log-loader&#x27;</span>]</span><br><span class="line">&#125; <span class="comment">// 自定义loader</span></span><br></pre></td></tr></table></figure>
<p>  loader分为：pre前置loader、normal普通loader、inline内联loader、post后置loader，优先级pre&gt;normal&gt;inline&gt;post</p>
<p>为什么使用webpack？</p>
<p>框架、ES6模块化语法，预处理器scss等需要转换为浏览器能识别的js、css等</p>
<p>webpack静态打包工具, 处理非js文件</p>
<p>功能：</p>
<p>开发模式-development：仅能编译JS中的ES6模块化语法<br>生产模式-production：能编译JS中的ES6模块化语法，还能压缩js代码</p>
<p>安装依赖:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br><span class="line">npm i webpack webpack-cli -D</span><br></pre></td></tr></table></figure>
<p>webpack编译:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack ./src/main.js --mode=development</span><br></pre></td></tr></table></figure>
<p>核心概念：</p>
<p>entry：入口，指定webpack从哪个文件开始打包<br>output: 输出，打包完的代码输出到哪里如何命名等<br>loader：加载器，webpack本身只能处理js、json等资源，其他资源需要借助loader，webpack才能解析<br>plugins：插件，扩展webpack的功能<br>mode：模式，开发:development, 生产production</p>
<p>webpack配置文件webpack.config.js</p>
<p>根目录下创建webpack.config.js文件：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">&#x27;./src/main.js&#x27;</span>, <span class="comment">// 相对路径</span></span><br><span class="line">  <span class="comment">// 输出</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">&#x27;dist&#x27;</span>), <span class="comment">// 绝对路径，__dirname当前目录的目录名</span></span><br><span class="line">    filename: <span class="string">&#x27;main.js&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// loaders</span></span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: []</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 插件</span></span><br><span class="line">  plugins: [],</span><br><span class="line">  <span class="comment">// 模式</span></span><br><span class="line">  mode: <span class="string">&#x27;development&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行打包：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure>
<p>开发模式：<br>1、编译代码，使浏览器能识别：样式资源、字体图标、图片、html等）<br>2、代码质量检查，eslint等</p>
<p>处理css资源：css-loader</p>
<p>安装css-loader:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev css-loader style-loader</span><br></pre></td></tr></table></figure>
<p>配置loader：</p>
<p>在 webpack 的配置中，loader 有两个属性：</p>
<ul>
<li>test 属性，识别出哪些文件会被转换。</li>
<li>use 属性，定义出在进行转换时，应该使用哪个 loader。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          <span class="string">&#x27;style-loader&#x27;</span>, <span class="comment">// 将css资源创建style标签添加到html文件中生效</span></span><br><span class="line">          <span class="string">&#x27;css-loader&#x27;</span> <span class="comment">// 将css资源编译成commonjs的模块到js中</span></span><br><span class="line">        ]&#125; <span class="comment">// use执行顺序从右到左</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用less-loader：</p>
<p>首先，你需要先安装 less 和 less-loader：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install less less-loader --save-dev</span><br></pre></td></tr></table></figure>
<p>然后将该 loader 添加到 webpack 的配置中去:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          <span class="string">&#x27;style-loader&#x27;</span>, <span class="comment">// 将css资源创建style标签添加到html文件中生效</span></span><br><span class="line">          <span class="string">&#x27;css-loader&#x27;</span>, <span class="comment">// 将css资源编译成commonjs的模块到js中</span></span><br><span class="line">          <span class="string">&#x27;less-loader&#x27;</span></span><br><span class="line">        ]&#125; <span class="comment">// use执行顺序从右到左</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用sass-loader<br>首先，你需要安装 sass-loader：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install sass-loader sass webpack --save-dev</span><br></pre></td></tr></table></figure>
<p>然后将本 loader 添加到你的 Webpack 配置:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.s[ac]ss$/i</span>,</span><br><span class="line">        use: [</span><br><span class="line">          <span class="comment">// 将 JS 字符串生成为 style 节点</span></span><br><span class="line">          <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">          <span class="comment">// 将 CSS 转化成 CommonJS 模块</span></span><br><span class="line">          <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">          <span class="comment">// 将 Sass 编译成 CSS</span></span><br><span class="line">          <span class="string">&#x27;sass-loader&#x27;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用stylus-loader，首先，先安装stylus和stylus-loader：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install stylus stylus-loader --save-dev</span><br></pre></td></tr></table></figure>
<p>将stylus-loader添加到配置中：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          <span class="comment">// 将 JS 字符串生成为 style 节点</span></span><br><span class="line">          <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">          <span class="comment">// 将 CSS 转化成 CommonJS 模块</span></span><br><span class="line">          <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">          <span class="comment">// 将 stylus 编译成 CSS</span></span><br><span class="line">          <span class="string">&#x27;stylus-loader&#x27;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>处理图片资源，webpack4处理图片资源使用file-loader和url-loader,现在webpack5，使用资源模块类型(asset module type)，通过添加 4 种新的模块类型，来替换所有这些 loader：</p>
<ul>
<li>asset/resource 发送一个单独的文件并导出 URL。之前通过使用 file-loader 实现。</li>
<li>asset/inline 导出一个资源的 data URI。之前通过使用 url-loader 实现。</li>
<li>asset/source 导出资源的源代码。之前通过使用 raw-loader 实现。</li>
<li>asset 在导出一个 data URI 和发送一个单独的文件之间自动选择。之前通过使用 url-loader，并且配置资源体积限制实现</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(png|jpg|webp|svg|jpeg)$/</span>,</span><br><span class="line">        type: <span class="string">&#x27;asset&#x27;</span>, <span class="comment">//asset通用资源类型  自动地在 resource 和 inline 之间进行选择：</span></span><br><span class="line">        <span class="comment">// 小于 8kb 的文件，将会视为 inline 模块类型，否则会被视为 resource 模块类型。</span></span><br><span class="line">        parser: &#123;</span><br><span class="line">          dataUrlCondition: &#123;</span><br><span class="line">            maxSize: <span class="number">10</span> * <span class="number">1024</span> <span class="comment">// 8kb</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>将文件输出到指定资源目录：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.(png|jpg|webp|svg|jpeg)$/</span>,</span><br><span class="line">  type: <span class="string">&#x27;asset&#x27;</span>, <span class="comment">//asset通用资源类型  自动地在 resource 和 inline 之间进行选择：</span></span><br><span class="line">  <span class="comment">// 小于 8kb 的文件，将会视为 inline 模块类型，否则会被视为 resource 模块类型。</span></span><br><span class="line">  parser: &#123;</span><br><span class="line">    dataUrlCondition: &#123;</span><br><span class="line">      maxSize: <span class="number">10</span> * <span class="number">1024</span> <span class="comment">// 8kb</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  generator: &#123;</span><br><span class="line">    filename: <span class="string">&#x27;static/images/[hash][ext][query]&#x27;</span> <span class="comment">// 输出文件名,将某些资源发送到指定目录：</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>[hash:10]代表哈希值取10位</p>
<p>每次构建前清理dist文件夹：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">&#x27;dist&#x27;</span>), <span class="comment">// 绝对路径，__dirname当前目录的目录名</span></span><br><span class="line">    filename: <span class="string">&#x27;main.js&#x27;</span>,</span><br><span class="line">    clean: <span class="literal">true</span> <span class="comment">// 在每次构建前清理 /dist 文件夹</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用字体资源：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.(ttf|woff|woff2)$/</span>, <span class="comment">// 字体资源</span></span><br><span class="line">  type: <span class="string">&#x27;asset/resource&#x27;</span>,</span><br><span class="line">  generator: &#123;</span><br><span class="line">    filename: <span class="string">&#x27;static/media/[hash][ext][query]&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其他资源比如map3等也可以像字体资源处理</p>
<p>处理js资源：<br>针对js兼容性处理，使用babel完成<br>针对代码个格式，使用eslint处理</p>
<p>Eslint配置文件写法：</p>
<ul>
<li><p>.eslintrc.*: 新建文件，位于根目录</p>
<ul>
<li>.eslintrc</li>
<li>.eslintrc.js</li>
<li>.eslintrc.json</li>
<li>区别在于配置格式不一样</li>
</ul>
</li>
<li><p>package.json中的eslintConfig中配置</p>
</li>
</ul>
<p>eslint在webpack4是eslint-loader，在webpack5是plugins</p>
<p>使用eslint需要安装 eslint-webpack-plugin：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install eslint-webpack-plugin --save-dev</span><br></pre></td></tr></table></figure>
<p>注意: 如果未安装 eslint &gt;= 7 ，你还需先通过 npm 安装：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install eslint --save-dev</span><br></pre></td></tr></table></figure>
<p>然后把插件添加到你的 webpack 配置:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ESLintPlugin = <span class="built_in">require</span>(<span class="string">&#x27;eslint-webpack-plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> ESLintPlugin(&#123;</span><br><span class="line">      <span class="comment">// 指定文件根目录，类型为字符串,检测哪些文件</span></span><br><span class="line">      context: path.resolve(__dirname, <span class="string">&#x27;src&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>创建eslint配置文件：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="keyword">extends</span>: [<span class="string">&#x27;eslint:recommended&#x27;</span>],</span><br><span class="line">  env: &#123;</span><br><span class="line">    node: <span class="literal">true</span>, <span class="comment">// 启动node全局变量</span></span><br><span class="line">    browser: <span class="literal">true</span> <span class="comment">// 启用浏览器全局变量</span></span><br><span class="line">  &#125;,</span><br><span class="line">  parserOptions: &#123;</span><br><span class="line">    ecmaVersion: <span class="number">6</span>, <span class="comment">// es6</span></span><br><span class="line">    sourceType: <span class="string">&quot;module&quot;</span> <span class="comment">// es module</span></span><br><span class="line">  &#125;,</span><br><span class="line">  rules: &#123;</span><br><span class="line">    <span class="string">&quot;no-var&quot;</span>: <span class="number">2</span> <span class="comment">// 不能使用var定义变量</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Babel将es6语法编写的代码转换为向后兼容的js语法，能够运行在当前和旧版本的浏览器或其他环境中。</p>
<p>配置文件有多种写法：</p>
<ul>
<li>babel.config.*: 新建文件，位于根目录<ul>
<li>babel.config.js</li>
<li>babel.config.json</li>
</ul>
</li>
<li>.babelrc.*:新建文件，位于根目录<ul>
<li>.babelrc</li>
<li>.babelrc.js</li>
<li>.babelrc.json</li>
</ul>
</li>
<li>package.json中的label中，不需要创建文件</li>
</ul>
<p>使用babel,先安装：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -D babel-loader @babel/core @babel/preset-env webpack</span><br></pre></td></tr></table></figure>
<p>webpack 配置对象中，需要将 babel-loader 添加到 module 列表中:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.m?js$/</span>,</span><br><span class="line">      exclude: <span class="regexp">/(node_modules|bower_components)/</span>,</span><br><span class="line">      use: &#123;</span><br><span class="line">        loader: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">          presets: [<span class="string">&#x27;@babel/preset-env&#x27;</span>]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>HtmlWebpackPlugin 简化了 HTML 文件的创建，以便为你的 webpack 包提供服务。这对于那些文件名中包含哈希值，并且哈希值会随着每次编译而改变的 webpack 包特别有用。</p>
<p>安装：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev html-webpack-plugin</span><br></pre></td></tr></table></figure>
<p>该插件将为你生成一个 HTML5 文件， 在 body 中使用 script 标签引入你所有 webpack 生成的 bundle.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin()</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>webpack-dev-server监听文件改变，自动打包</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack-dev-server -D</span><br></pre></td></tr></table></figure>
<p>配置webpack.config.js：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">   <span class="comment">// 开发服务器</span></span><br><span class="line">  devServer: &#123;</span><br><span class="line">    host: <span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">    port: <span class="number">3000</span>,</span><br><span class="line">    open: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行命令：<code>npx webpack serve</code></p>
<p><strong>生产模式：</strong></p>
<p>优化代码运行性能<br>优化打包速度</p>
<p>根目录下创建config目录，创建webpack.dev.js和webpack.prod.js</p>
<p>然后运行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npx webpack serve --config ./config/webpack.dev.js // dev</span><br><span class="line">npx webpack --config ./config/webpack.prod.js // prod</span><br></pre></td></tr></table></figure>
<p>或者加入package.json：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;start&quot;: &quot;npm run dev&quot;,</span><br><span class="line">  &quot;dev&quot;: &quot;webpack serve --config ./config/webpack.dev.js&quot;,</span><br><span class="line">  &quot;build&quot;: &quot;webpack --config ./config/webpack.prod.js&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>css处理，提取css文件.</strong></p>
<p>css文件目前被打包到js文件，当js文件加载时，会创建一个style标签来生成样式</p>
<p>这样对网站不好，会出现闪屏</p>
<p>单独将css文件分离，用link标签加载性能更好</p>
<p>安装：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev mini-css-extract-plugin</span><br></pre></td></tr></table></figure>
<p>建议 mini-css-extract-plugin 与 css-loader 一起使用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">&quot;mini-css-extract-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  plugins: [<span class="keyword">new</span> MiniCssExtractPlugin()],</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/i</span>,</span><br><span class="line">        use: [MiniCssExtractPlugin.loader, <span class="string">&quot;css-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>运行<code>npm run build</code> 打包后的index.html会link引入css文件<br>不要同时使用 style-loader 与 mini-css-extract-plugin。</p>
<p><strong>css样式兼容性处理.</strong><br>需要安装 postcss-loader 和 postcss, postcss-preset-env</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev postcss-loader postcss postcss-preset-env</span><br></pre></td></tr></table></figure>
<p>配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/i</span>,</span><br><span class="line">        use: [</span><br><span class="line">          <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">&#x27;postcss-loader&#x27;</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              postcssOptions: &#123;</span><br><span class="line">                plugins: [</span><br><span class="line">                  [</span><br><span class="line">                    <span class="string">&#x27;postcss-preset-env&#x27;</span>,</span><br><span class="line">                    &#123;</span><br><span class="line">                      <span class="comment">// 其他选项</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                  ],</span><br><span class="line">                ],</span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>或者使用postcss本身的配置文件postcss.config.js:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&#x27;postcss-preset-env&#x27;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// 其他选项</span></span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>在package.json中配置需要浏览器兼容的程度：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;browserslist&quot;: [</span><br><span class="line">  &quot;&gt; 1%&quot;,</span><br><span class="line">  &quot;last 2 versions&quot;,</span><br><span class="line">  <span class="string">&quot;not ie &lt;= 8&quot;</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>比如display:flex,打包编译会变成</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">display</span>: <span class="selector-tag">-webkit-box</span>;</span><br><span class="line"><span class="selector-tag">display</span>: <span class="selector-tag">-ms-flexbox</span>;</span><br></pre></td></tr></table></figure>
<p><strong>优化和压缩css：</strong></p>
<p>你需要安装 css-minimizer-webpack-plugin：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install css-minimizer-webpack-plugin --save-dev</span><br></pre></td></tr></table></figure>
<p>接着在 webpack 配置中加入该插件:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">&quot;mini-css-extract-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> CssMinimizerPlugin = <span class="built_in">require</span>(<span class="string">&quot;css-minimizer-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/.s?css$/</span>,</span><br><span class="line">        use: [MiniCssExtractPlugin.loader, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;sass-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    minimizer: [</span><br><span class="line">      <span class="comment">// 在 webpack@5 中，你可以使用 `...` 语法来扩展现有的 minimizer（即 `terser-webpack-plugin`），将下一行取消注释</span></span><br><span class="line">      <span class="comment">// `...`,</span></span><br><span class="line">      <span class="keyword">new</span> CssMinimizerPlugin(),</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [<span class="keyword">new</span> MiniCssExtractPlugin()],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>这将仅在生产环境开启 CSS 优化。</p>
<p>如果还想在开发环境下启用 CSS 优化，请将 optimization.minimize 设置为 true:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    <span class="comment">// [...]</span></span><br><span class="line">    minimize: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>默认生产模式已开启html压缩和js压缩</p>
<p>SourceMap: 开发环境中，运行代码source是编译过的。<br>sourcemap是源代码和编译后的代码的映射文件，代码出错后找到源代码出错位置，从而让浏览器提示出错误。</p>
<p>devtool选项配置sourcemap，不同的值会明显影响到构建(build)和重新构建(rebuild)的速度。<br>值有很多种，但是一般只关心开发和生产模式的值：</p>
<p>开发模式：devtool: cheap-module-source-map<br>优点：打包编译速度快，只包含行映射<br>缺点：没有列映射</p>
<p>生产模式：devtool: source-map<br>优点：包含行和列映射<br>缺点：打包编译速度更慢</p>
<p><strong>启用 HMR: 提升打包构建速度。</strong></p>
<p>开发时更改一个模块的代码，webpack会默认所有模块全部打包编译，速度很慢。<br>HotModuleReplacement：HMR热模块替换，在程序运行中添加、替换、删除模块而无需重新加载整个页面</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">  devServer: &#123;</span><br><span class="line">    hot: <span class="literal">true</span>, <span class="comment">// 启用 webpack 的 热模块替换</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>但是hot: true不支持js热模块替换，js更改整个页面都重新刷新</p>
<p>实际使用框架，vue-loader、react-hot-loader解决热更替</p>
<p><strong>oneOf: 每个文件只能被一个loader配置处理.</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">// 每个文件只能被一个loader配置处理</span></span><br><span class="line">      oneOf: [</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">          use: [</span><br><span class="line">          <span class="string">&#x27;style-loader&#x27;</span>, <span class="comment">// 将css资源创建style标签添加到html文件中生效</span></span><br><span class="line">          <span class="string">&#x27;css-loader&#x27;</span>, <span class="comment">// 将css资源编译成commonjs的模块到js中</span></span><br><span class="line">          <span class="string">&#x27;less-loader&#x27;</span></span><br><span class="line">          ]</span><br><span class="line">        &#125;, <span class="comment">// use执行顺序从右到左</span></span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">          use: [</span><br><span class="line">            <span class="comment">// compiles Less to CSS</span></span><br><span class="line">            <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;less-loader&#x27;</span>,</span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">          use: [</span><br><span class="line">            <span class="comment">// 将 JS 字符串生成为 style 节点</span></span><br><span class="line">            <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">            <span class="comment">// 将 CSS 转化成 CommonJS 模块</span></span><br><span class="line">            <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">            <span class="comment">// 将 Sass 编译成 CSS</span></span><br><span class="line">            <span class="string">&#x27;sass-loader&#x27;</span>,</span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">          use: [</span><br><span class="line">            <span class="comment">// 将 JS 字符串生成为 style 节点</span></span><br><span class="line">            <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">            <span class="comment">// 将 CSS 转化成 CommonJS 模块</span></span><br><span class="line">            <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">            <span class="comment">// 将 stylus 编译成 CSS</span></span><br><span class="line">            <span class="string">&#x27;stylus-loader&#x27;</span>,</span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/\.(png|jpg|webp|svg|jpeg)$/</span>,</span><br><span class="line">          type: <span class="string">&#x27;asset&#x27;</span>, <span class="comment">//asset通用资源类型  自动地在 resource 和 inline 之间进行选择：</span></span><br><span class="line">          <span class="comment">// 小于 8kb 的文件，将会视为 inline 模块类型，否则会被视为 resource 模块类型。</span></span><br><span class="line">          parser: &#123;</span><br><span class="line">            dataUrlCondition: &#123;</span><br><span class="line">              maxSize: <span class="number">10</span> * <span class="number">1024</span> <span class="comment">// 8kb</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          generator: &#123;</span><br><span class="line">            filename: <span class="string">&#x27;static/images/[hash][ext][query]&#x27;</span> <span class="comment">// 输出文件名,将某些资源发送到指定目录：</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/\.(ttf|woff|woff2)$/</span>, <span class="comment">// 字体资源</span></span><br><span class="line">          type: <span class="string">&#x27;asset/resource&#x27;</span>,</span><br><span class="line">          generator: &#123;</span><br><span class="line">            filename: <span class="string">&#x27;static/media/[hash][ext][query]&#x27;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">          exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">          loader: <span class="string">&#x27;babel-loader&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p><strong>Include/Exclude.</strong></p>
<p>Include: 包含，只处理xxx文件<br>Exclude: 排除，除列xxx文件都处理</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">  exclude: <span class="regexp">/node_modules/</span>, <span class="comment">// 排除node_modules文件</span></span><br><span class="line">  <span class="comment">// include: path.resolve(__dirname, &#x27;../src&#x27;)</span></span><br><span class="line">  loader: <span class="string">&#x27;babel-loader&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Cache: 开启缓存。</strong></p>
<p>每次打包都要经过babel编译和eslint检查，速度慢<br>可以缓存之前的babel编译和eslint检查，这样第二次打包速度会更快</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">      exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">      loader: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        cacheDirectory: <span class="literal">true</span>, <span class="comment">// 开启babel缓存</span></span><br><span class="line">        cacheCompression: <span class="literal">false</span> <span class="comment">// 关闭缓存文件压缩</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">plugins: [</span><br><span class="line">  <span class="keyword">new</span> EslintPlugin(&#123;</span><br><span class="line">    <span class="comment">// 指定文件根目录，类型为字符串,检测哪些文件</span></span><br><span class="line">    context: path.resolve(__dirname, <span class="string">&#x27;../src&#x27;</span>),</span><br><span class="line">    exclude: <span class="string">&quot;node_modules&quot;</span>,</span><br><span class="line">    cache: <span class="literal">true</span>, <span class="comment">// 开启缓存</span></span><br><span class="line">    cacheLocation: path.resolve(__dirname, <span class="string">&#x27;../node_modules/.cache/eslint-webpack-plugin/.eslintcache&#x27;</span>)</span><br><span class="line">  &#125;),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p><strong>Thread-loader: 多进程。</strong></p>
<p>项目越来越大时，打包速度更慢，可以开启多进程同时处理js文件。</p>
<p>使用时，需将此 loader 放置在其他 loader 之前。放置在此 loader 之后的 loader 会在一个独立的 worker 池中运行。</p>
<p>每个 worker 都是一个独立的 node.js 进程，其开销大约为 600ms 左右。同时会限制跨进程的数据交换。</p>
<p>请仅在耗时的操作中使用此 loader！<br>安装：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev thread-loader</span><br></pre></td></tr></table></figure>
<p>使用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        include: path.resolve(<span class="string">&#x27;src&#x27;</span>),</span><br><span class="line">        use: [</span><br><span class="line">          <span class="string">&quot;thread-loader&quot;</span>,</span><br><span class="line">          <span class="comment">// 耗时的 loader （例如 babel-loader）</span></span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// with options</span></span><br><span class="line">use: [</span><br><span class="line">  &#123;</span><br><span class="line">    loader: <span class="string">&quot;thread-loader&quot;</span>,</span><br><span class="line">    <span class="comment">// 有同样配置的 loader 会共享一个 worker 池</span></span><br><span class="line">    options: &#123;</span><br><span class="line">      <span class="comment">// 产生的 worker 的数量，默认是 (cpu 核心数 + 1)，或者，</span></span><br><span class="line">      <span class="comment">// 在 require(&#x27;os&#x27;).cpus() 是 undefined 时回退至 1</span></span><br><span class="line">      workers: <span class="number">2</span>,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 一个 worker 进程中并行执行工作的数量</span></span><br><span class="line">      <span class="comment">// 默认为 20</span></span><br><span class="line">      workerParallelJobs: <span class="number">50</span>,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 额外的 node.js 参数</span></span><br><span class="line">      workerNodeArgs: [<span class="string">&#x27;--max-old-space-size=1024&#x27;</span>],</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 允许重新生成一个僵死的 work 池</span></span><br><span class="line">      <span class="comment">// 这个过程会降低整体编译速度</span></span><br><span class="line">      <span class="comment">// 并且开发环境应该设置为 false</span></span><br><span class="line">      poolRespawn: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 闲置时定时删除 worker 进程</span></span><br><span class="line">      <span class="comment">// 默认为 500（ms）</span></span><br><span class="line">      <span class="comment">// 可以设置为无穷大，这样在监视模式(--watch)下可以保持 worker 持续存在</span></span><br><span class="line">      poolTimeout: <span class="number">2000</span>,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 池分配给 worker 的工作数量</span></span><br><span class="line">      <span class="comment">// 默认为 200</span></span><br><span class="line">      <span class="comment">// 降低这个数值会降低总体的效率，但是会提升工作分布更均一</span></span><br><span class="line">      poolParallelJobs: <span class="number">50</span>,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 池的名称</span></span><br><span class="line">      <span class="comment">// 可以修改名称来创建其余选项都一样的池</span></span><br><span class="line">      name: <span class="string">&quot;my-pool&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 耗时的 loader（例如 babel-loader）</span></span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> threads = os.cpus().length <span class="comment">// 获取cpu的核数量</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">      exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">      use: [</span><br><span class="line">        &#123;</span><br><span class="line">          loader: <span class="string">&#x27;thread-loader&#x27;</span>,</span><br><span class="line">          options: &#123;</span><br><span class="line">            works: threads <span class="comment">// 进程数量</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          loader: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">          options: &#123;</span><br><span class="line">            cacheDirectory: <span class="literal">true</span>, <span class="comment">// 开启babel缓存</span></span><br><span class="line">            cacheCompression: <span class="literal">false</span> <span class="comment">// 关闭缓存文件压缩</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br><span class="line">plugins: [</span><br><span class="line">  <span class="keyword">new</span> EslintPlugin(&#123;</span><br><span class="line">    <span class="comment">// 指定文件根目录，类型为字符串,检测哪些文件</span></span><br><span class="line">    context: path.resolve(__dirname, <span class="string">&#x27;../src&#x27;</span>),</span><br><span class="line">    exclude: <span class="string">&quot;node_modules&quot;</span>,</span><br><span class="line">    cache: <span class="literal">true</span>, <span class="comment">// 开启缓存</span></span><br><span class="line">    cacheLocation: path.resolve(__dirname, <span class="string">&#x27;../node_modules/.cache/eslint-webpack-plugin/.eslintcache&#x27;</span>),</span><br><span class="line">    threads <span class="comment">// 开启多进程和设置多进程数量</span></span><br><span class="line">  &#125;),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>TerserWebpackPlugin:该插件使用 terser 来压缩 JavaScript。<br>webpack v5 开箱即带有最新版本的 terser-webpack-plugin。如果你使用的是 webpack v5 或更高版本，同时希望自定义配置，那么仍需要安装 terser-webpack-plugin。如果使用 webpack v4，则必须安装 terser-webpack-plugin v4 的版本</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install terser-webpack-plugin --save-dev</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> TerserPlugin = <span class="built_in">require</span>(<span class="string">&quot;terser-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// css压缩优化</span></span><br><span class="line">  optimization: &#123;</span><br><span class="line">    minimizer: [</span><br><span class="line">      <span class="comment">// 在 webpack@5 中，你可以使用 `...` 语法来扩展现有的 minimizer（即 `terser-webpack-plugin`），将下一行取消注释</span></span><br><span class="line">      <span class="comment">// `...`,</span></span><br><span class="line">      <span class="keyword">new</span> CssMinimizerPlugin(),</span><br><span class="line">      <span class="keyword">new</span> TerserPlugin(&#123;</span><br><span class="line">        parallel: threads <span class="comment">// 开启多进程和设置多进程数量</span></span><br><span class="line">      &#125;) <span class="comment">// 压缩js</span></span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>减少代码体积： tree shaking.</strong></p>
<p>开发时定义了一些工具函数库，或引入第三方工具函数库或组件库</p>
<p>可能只使用极小一部分功能确需要引入整个库，打包进来体积很大</p>
<p>Tree shaking一个术语，用于描述移除js中未使用的代码</p>
<p>webpack默认开启这个功能</p>
<p>减少babel代码体积：@babel/plugin-transform-runtime</p>
<p>安装：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @babel/plugin-transform-runtime -D</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">  exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">  use: [</span><br><span class="line">    &#123;</span><br><span class="line">      loader: <span class="string">&#x27;thread-loader&#x27;</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        works: threads <span class="comment">// 进程数量</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      loader: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        cacheDirectory: <span class="literal">true</span>, <span class="comment">// 开启babel缓存</span></span><br><span class="line">        cacheCompression: <span class="literal">false</span>, <span class="comment">// 关闭缓存文件压缩</span></span><br><span class="line">        plugins: [<span class="string">&quot;@babel/plugin-transform-runtime&quot;</span>] <span class="comment">// 减少代码体积</span></span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Image minimizer： 图片压缩。</strong></p>
<p>本地静态图片压缩，减少代码体积</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install image-minimizer-webpack-plugin --save-dev</span><br></pre></td></tr></table></figure>
<p>无损压缩模式，需要安装：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install imagemin-gifsicle imagemin-jpegtran imagemin-optipng imagemin-svgo imagemin --save-dev</span><br></pre></td></tr></table></figure>
<p>有损压缩：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install imagemin-gifsicle imagemin-mozjpeg imagemin-pngquant imagemin-svgo imagemin --save-dev</span><br></pre></td></tr></table></figure>
<p>配置webpack.config.js：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ImageMinimizerPlugin = <span class="built_in">require</span>(<span class="string">&quot;image-minimizer-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; extendDefaultPlugins &#125; = <span class="built_in">require</span>(<span class="string">&quot;svgo&quot;</span>);</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">new</span> ImageMinimizerPlugin(&#123;</span><br><span class="line">  minimizer: &#123;</span><br><span class="line">    implementation: ImageMinimizerPlugin.imageminGenerate,</span><br><span class="line">    options: &#123;</span><br><span class="line">      <span class="comment">// Lossless optimization with custom option</span></span><br><span class="line">      <span class="comment">// Feel free to experiment with options for better result for you</span></span><br><span class="line">      plugins: [</span><br><span class="line">        [<span class="string">&quot;gifsicle&quot;</span>, &#123; <span class="attr">interlaced</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">        [<span class="string">&quot;jpegtran&quot;</span>, &#123; <span class="attr">progressive</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">        [<span class="string">&quot;optipng&quot;</span>, &#123; <span class="attr">optimizationLevel</span>: <span class="number">5</span> &#125;],</span><br><span class="line">        <span class="comment">// Svgo configuration here https://github.com/svg/svgo#configuration</span></span><br><span class="line">        [</span><br><span class="line">          <span class="string">&quot;svgo&quot;</span>,</span><br><span class="line">          &#123;</span><br><span class="line">            plugins: [</span><br><span class="line">              <span class="string">&quot;preset-default&quot;</span>,</span><br><span class="line">              <span class="string">&quot;prefixIds&quot;</span></span><br><span class="line">            ],</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      ],</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;),</span><br></pre></td></tr></table></figure>
<p><strong>Code Split：代码分割。</strong><br>打包代码时会将所有js文件打包到一个文件中，体积太大了，如果渲染首页，就应该只加载首页的js。</p>
<p>对js文件进行分割，渲染哪个页面就加载对应js，加载资源少速度更快</p>
<p>代码分割：<br>1、分割文件，将打包生成的文件进行分割，分为多个js文件<br>2、按需加载，需要哪个文件加载哪个</p>
<p>配置：optimization.splitChunks</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">  optimization: &#123;</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">      chunks: <span class="string">&#x27;async&#x27;</span>,</span><br><span class="line">      minSize: <span class="number">20000</span>,</span><br><span class="line">      minRemainingSize: <span class="number">0</span>,</span><br><span class="line">      minChunks: <span class="number">1</span>,</span><br><span class="line">      maxAsyncRequests: <span class="number">30</span>,</span><br><span class="line">      maxInitialRequests: <span class="number">30</span>,</span><br><span class="line">      enforceSizeThreshold: <span class="number">50000</span>,</span><br><span class="line">      cacheGroups: &#123;</span><br><span class="line">        defaultVendors: &#123;</span><br><span class="line">          test: <span class="regexp">/[\\/]node_modules[\\/]/</span>,</span><br><span class="line">          priority: -<span class="number">10</span>,</span><br><span class="line">          reuseExistingChunk: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="keyword">default</span>: &#123;</span><br><span class="line">          minChunks: <span class="number">2</span>,</span><br><span class="line">          priority: -<span class="number">20</span>,</span><br><span class="line">          reuseExistingChunk: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>自定义loader：</strong></p>
<p>clean-log-loader</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// clean-log-loader</span></span><br><span class="line"><span class="comment">// 清理console.log</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> context.replace(<span class="regexp">/console\.log\(.*\);?/g</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">  use: [<span class="string">&#x27;./loaders/clean-log-loader&#x27;</span>]</span><br><span class="line">&#125; <span class="comment">// 自定义loader</span></span><br></pre></td></tr></table></figure>
<p>loader分为：</p>
<ul>
<li>pre 前置loader</li>
<li>normal 普通loader</li>
<li>inline 内联loader</li>
<li>post 后置loader</li>
</ul>
<p>优先级：前置loader &gt; 普通loader &gt; 内联loader &gt; 后置loader</p>
<p>同步loader：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> context</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>异步loader：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">content, map, meta</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> callback = <span class="built_in">this</span>.async();</span><br><span class="line">  someAsyncOperation(content, <span class="function"><span class="keyword">function</span> (<span class="params">err, result</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> callback(err);</span><br><span class="line">    callback(<span class="literal">null</span>, result, map, meta);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>“Raw” Loader:默认情况下，资源文件会被转化为 UTF-8 字符串，然后传给 loader。通过设置 raw 为 true，loader 可以接收原始的 Buffer</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">content</span>) </span>&#123;</span><br><span class="line">  assert(content <span class="keyword">instanceof</span> Buffer);</span><br><span class="line">  <span class="keyword">return</span> someSyncOperation(content);</span><br><span class="line">  <span class="comment">// 返回值也可以是一个 `Buffer`</span></span><br><span class="line">  <span class="comment">// 即使不是 &quot;raw&quot;，loader 也没问题</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">module</span>.exports.raw = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure>
<p>Pitching Loader:loader 总是 从右到左被调用。有些情况下，loader 只关心 request 后面的 元数据(metadata)，并且忽略前一个 loader 的结果。在实际（从右到左）执行 loader 之前，会先 从左到右 调用 loader 上的 pitch 方法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">content</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> someSyncOperation(content, <span class="built_in">this</span>.data.value);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports.pitch = <span class="function"><span class="keyword">function</span> (<span class="params">remainingRequest, precedingRequest, data</span>) </span>&#123;</span><br><span class="line">  data.value = <span class="number">42</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>plugin: 自定义plugin。</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * webpack会加载配置文件和命令语句初始化参数，生成compoliler对象，加载配置的插件</span></span><br><span class="line"><span class="comment"> * 变量所有插件，调用的插件的apply方法</span></span><br><span class="line"><span class="comment"> * 开始编译（触发各个hooks钩子事件）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestPlugin</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;testPlugin constructor&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  apply (complier) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;testPlugin apply&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// testPlugin constructor</span></span><br><span class="line"><span class="comment">// testPlugin apply</span></span><br><span class="line"><span class="built_in">module</span>.exports = TestPlugin</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在webpack.config.js配置使用：</span></span><br><span class="line"><span class="keyword">const</span> TestPlugin = <span class="built_in">require</span>(<span class="string">&#x27;../plugins/test-plugin&#x27;</span>) <span class="comment">// 自定义插件</span></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">plugins: [</span><br><span class="line">  <span class="keyword">new</span> TestPlugin()</span><br><span class="line">]</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure>
<p>complier模块是webpack的主要引擎，通过cli或者node api传递的所有选项创建一个compilation 实例。<br>它扩展（extends）自 Tapable 类，用来注册和调用插件。大多数面向用户的插件会首先在 Compiler 上注册。</p>
<p>根据使用不同的钩子(hooks)和tap方法，插件可以以不同的方式运行。</p>
<p>同步tap</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">compiler.hooks.compile.tap(<span class="string">&#x27;MyPlugin&#x27;</span>, <span class="function">(<span class="params">params</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;以同步方式触及 compile 钩子。&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>对于可以使用 AsyncHook 的 run 阶段， 则需使用 tapAsync 或 tapPromise（以及 tap）方法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">compiler.hooks.run.tapAsync(</span><br><span class="line">  <span class="string">&#x27;MyPluginName&#x27;</span>,</span><br><span class="line">  (source, target, routesList, callback) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;以异步方式触及运行钩子。&#x27;</span>);</span><br><span class="line">    callback();</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">compiler.hooks.run.tapPromise(<span class="string">&#x27;MyPluginName&#x27;</span>, <span class="function">(<span class="params">source, target, routesList</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> <span class="built_in">setTimeout</span>(resolve, <span class="number">1000</span>)).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;以异步的方式触发具有延迟操作的钩子。&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">compiler.hooks.run.tapPromise(</span><br><span class="line">  <span class="string">&#x27;MyPluginName&#x27;</span>,</span><br><span class="line">  <span class="keyword">async</span> (source, target, routesList) =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> <span class="built_in">setTimeout</span>(resolve, <span class="number">1000</span>));</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;以异步的方式触发具有延迟操作的钩子。&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>Compilation 模块会被 Compiler 用来创建新的 compilation 对象（或新的 build 对象）。 compilation 实例能够访问所有的模块和它们的依赖（大部分是循环依赖）。 它会对应用程序的依赖图中所有模块， 进行字面上的编译(literal compilation)。 在编译阶段，模块会被加载(load)、封存(seal)、优化(optimize)、 分块(chunk)、哈希(hash)和重新创建(restore)。</p>
<p>添加注释插件：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> os = <span class="built_in">require</span>(<span class="string">&#x27;os&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> EslintPlugin = <span class="built_in">require</span>(<span class="string">&#x27;eslint-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">&quot;mini-css-extract-plugin&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> CssMinimizerPlugin = <span class="built_in">require</span>(<span class="string">&#x27;css-minimizer-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> TerserPlugin = <span class="built_in">require</span>(<span class="string">&quot;terser-webpack-plugin&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> ImageMinimizerPlugin = <span class="built_in">require</span>(<span class="string">&quot;image-minimizer-webpack-plugin&quot;</span>)</span><br><span class="line"><span class="comment">// const TestPlugin = require(&#x27;../plugins/test-plugin&#x27;) // 自定义插件</span></span><br><span class="line"><span class="keyword">const</span> BannerWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;../plugins/banner-webpack&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> threads = os.cpus().length <span class="comment">// 获取cpu的核数量</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getStyleLoader</span>(<span class="params">loader</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [</span><br><span class="line">    MiniCssExtractPlugin.loader, <span class="comment">// 将css文件单独引入到link</span></span><br><span class="line">    <span class="comment">// &#x27;style-loader&#x27;, // 将css资源创建style标签添加到html文件中生效</span></span><br><span class="line">    <span class="string">&#x27;css-loader&#x27;</span>, <span class="comment">// 将css资源编译成commonjs的模块到js中</span></span><br><span class="line">    &#123;</span><br><span class="line">      loader: <span class="string">&#x27;postcss-loader&#x27;</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        postcssOptions: &#123;</span><br><span class="line">          plugins: [</span><br><span class="line">            [</span><br><span class="line">              <span class="string">&#x27;postcss-preset-env&#x27;</span></span><br><span class="line">            ],</span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    loader</span><br><span class="line">  ].filter(<span class="built_in">Boolean</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">&#x27;./src/main.js&#x27;</span>, <span class="comment">// 相对路径</span></span><br><span class="line">  <span class="comment">// 输出</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">&#x27;../dist&#x27;</span>), <span class="comment">// 绝对路径，__dirname当前目录的目录名</span></span><br><span class="line">    filename: <span class="string">&#x27;static/js/main.js&#x27;</span>,</span><br><span class="line">    clean: <span class="literal">true</span> <span class="comment">// 在每次构建前清理 /dist 文件夹</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// loaders</span></span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        oneOf: [</span><br><span class="line">          &#123;</span><br><span class="line">            test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">            use: getStyleLoader()</span><br><span class="line">          &#125;, <span class="comment">// use执行顺序从右到左</span></span><br><span class="line">          &#123;</span><br><span class="line">            test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">            use: getStyleLoader(<span class="string">&#x27;less-loader&#x27;</span>)</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            test: <span class="regexp">/\.s[ac]ss$/</span>,</span><br><span class="line">            use: getStyleLoader(<span class="string">&#x27;sass-loader&#x27;</span>)</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            test: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">            use: getStyleLoader(<span class="string">&#x27;stylus-loader&#x27;</span>)</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            test: <span class="regexp">/\.(png|jpg|webp|svg|jpeg)$/</span>,</span><br><span class="line">            type: <span class="string">&#x27;asset&#x27;</span>, <span class="comment">//asset通用资源类型  自动地在 resource 和 inline 之间进行选择：</span></span><br><span class="line">            <span class="comment">// 小于 8kb 的文件，将会视为 inline 模块类型，否则会被视为 resource 模块类型。</span></span><br><span class="line">            parser: &#123;</span><br><span class="line">              dataUrlCondition: &#123;</span><br><span class="line">                maxSize: <span class="number">10</span> * <span class="number">1024</span> <span class="comment">// 8kb</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            generator: &#123;</span><br><span class="line">              filename: <span class="string">&#x27;static/images/[hash][ext][query]&#x27;</span> <span class="comment">// 输出文件名,将某些资源发送到指定目录：</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            test: <span class="regexp">/\.(ttf|woff|woff2)$/</span>, <span class="comment">// 字体资源</span></span><br><span class="line">            type: <span class="string">&#x27;asset/resource&#x27;</span>,</span><br><span class="line">            generator: &#123;</span><br><span class="line">              filename: <span class="string">&#x27;static/media/[hash][ext][query]&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">            use: [</span><br><span class="line">              &#123;</span><br><span class="line">                loader: <span class="string">&#x27;thread-loader&#x27;</span>,</span><br><span class="line">                options: &#123;</span><br><span class="line">                  works: threads <span class="comment">// 进程数量</span></span><br><span class="line">                &#125;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                loader: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">                options: &#123;</span><br><span class="line">                  cacheDirectory: <span class="literal">true</span>, <span class="comment">// 开启babel缓存</span></span><br><span class="line">                  cacheCompression: <span class="literal">false</span>, <span class="comment">// 关闭缓存文件压缩</span></span><br><span class="line">                  plugins: [<span class="string">&quot;@babel/plugin-transform-runtime&quot;</span>] <span class="comment">// 减少代码体积</span></span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            ]</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="comment">// &#123;</span></span><br><span class="line">          <span class="comment">//   test: /\.js$/,</span></span><br><span class="line">          <span class="comment">//   use: [&#x27;./loaders/clean-log-loader&#x27;]</span></span><br><span class="line">          <span class="comment">// &#125; // 自定义loader</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// css压缩优化</span></span><br><span class="line">  optimization: &#123;</span><br><span class="line">    minimizer: [</span><br><span class="line">      <span class="comment">// 在 webpack@5 中，你可以使用 `...` 语法来扩展现有的 minimizer（即 `terser-webpack-plugin`），将下一行取消注释</span></span><br><span class="line">      <span class="comment">// `...`,</span></span><br><span class="line">      <span class="keyword">new</span> CssMinimizerPlugin(),</span><br><span class="line">      <span class="keyword">new</span> TerserPlugin(&#123;</span><br><span class="line">        parallel: threads <span class="comment">// 开启多进程和设置多进程数量</span></span><br><span class="line">      &#125;) <span class="comment">// 压缩js</span></span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 插件</span></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="comment">// new TestPlugin(),</span></span><br><span class="line">    <span class="keyword">new</span> BannerWebpackPlugin(&#123;</span><br><span class="line">      author: <span class="string">&#x27;zjy&#x27;</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> EslintPlugin(&#123;</span><br><span class="line">      <span class="comment">// 指定文件根目录，类型为字符串,检测哪些文件</span></span><br><span class="line">      context: path.resolve(__dirname, <span class="string">&#x27;../src&#x27;</span>),</span><br><span class="line">      exclude: <span class="string">&quot;node_modules&quot;</span>,</span><br><span class="line">      cache: <span class="literal">true</span>, <span class="comment">// 开启缓存</span></span><br><span class="line">      cacheLocation: path.resolve(__dirname, <span class="string">&#x27;../node_modules/.cache/eslint-webpack-plugin/.eslintcache&#x27;</span>),</span><br><span class="line">      threads <span class="comment">// 开启多进程和设置多进程数量</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      <span class="comment">// 以public/index.html为模版，自动引入bundles到body的script</span></span><br><span class="line">      template: path.resolve(__dirname, <span class="string">&#x27;../public/index.html&#x27;</span>)</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">      filename: <span class="string">&quot;static/css/main.css&quot;</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> ImageMinimizerPlugin(&#123;</span><br><span class="line">      minimizer: &#123;</span><br><span class="line">        implementation: ImageMinimizerPlugin.imageminGenerate,</span><br><span class="line">        options: &#123;</span><br><span class="line">          <span class="comment">// Lossless optimization with custom option</span></span><br><span class="line">          <span class="comment">// Feel free to experiment with options for better result for you</span></span><br><span class="line">          plugins: [</span><br><span class="line">            [<span class="string">&quot;gifsicle&quot;</span>, &#123; <span class="attr">interlaced</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">            [<span class="string">&quot;jpegtran&quot;</span>, &#123; <span class="attr">progressive</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">            [<span class="string">&quot;optipng&quot;</span>, &#123; <span class="attr">optimizationLevel</span>: <span class="number">5</span> &#125;],</span><br><span class="line">            <span class="comment">// Svgo configuration here https://github.com/svg/svgo#configuration</span></span><br><span class="line">            [</span><br><span class="line">              <span class="string">&quot;svgo&quot;</span>,</span><br><span class="line">              &#123;</span><br><span class="line">                plugins: [</span><br><span class="line">                  <span class="string">&quot;preset-default&quot;</span>,</span><br><span class="line">                  <span class="string">&quot;prefixIds&quot;</span></span><br><span class="line">                ],</span><br><span class="line">              &#125;,</span><br><span class="line">            ],</span><br><span class="line">          ],</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// 模式</span></span><br><span class="line">  mode: <span class="string">&#x27;production&#x27;</span>,</span><br><span class="line">  devtool: <span class="string">&#x27;source-map&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="keyword">new</span> BannerWebpackPlugin(&#123;</span><br><span class="line">  author: <span class="string">&#x27;zjy&#x27;</span></span><br><span class="line">&#125;),</span><br></pre></td></tr></table></figure>
<h3 id="原型的作用是什么？"><a href="#原型的作用是什么？" class="headerlink" title="原型的作用是什么？"></a>原型的作用是什么？</h3><p>之所以实现原型，是因为javascript语言要实现面向对象，而原型是实现面向对象的方式之一。</p>
<p>一个能支持面向对象的语音的特点：能判定一个实例的类型。在javascript中通过原型能知道某个对象所属类型。<br>原型的存在避免了对象类型的丢失。</p>
<h3 id="Promise解决了什么问题？"><a href="#Promise解决了什么问题？" class="headerlink" title="Promise解决了什么问题？"></a>Promise解决了什么问题？</h3><p>Promise出现最重要的是为了统一js中的异步实现方案。</p>
<p>Promise也无法消除回调，它只不过通过链式调用的方式让回调变得可控</p>
<h3 id="async-await"><a href="#async-await" class="headerlink" title="async await"></a>async await</h3><ul>
<li>async 表示这是一个async函数， await只能用在async函数里面，不能单独使用</li>
<li>async函数返回一个Promise对象，await就是等待这个promise的返回结果后，再继续执行</li>
<li>await等待的是一个Promise对象，如果不是Promise对象则用Promise.resolve包装</li>
<li>异步async 调用和普通函数的使用方式一样</li>
<li>await 相当于 Promise 的 then ，then指的是成功，不指失败</li>
<li>await 和 then 的区别就是：then还需要传回调进去，但 await 可以直接得到值</li>
<li>await后面表达式promise的状态resolve才会执行后面代码，reject需要捕获错误，状态没有改变后面代码不会执行<br>try…catch 可捕获异常，代替了 Promise的 catch</li>
</ul>
<p>vue3小记-2024-01-16</p>
<h2 id="vue3小记"><a href="#vue3小记" class="headerlink" title="vue3小记"></a>vue3小记</h2><h3 id="优点特性"><a href="#优点特性" class="headerlink" title="优点特性"></a>优点特性</h3><p>体积减少、内存占用减少、渲染速度更快</p>
<p>更好支持ts</p>
<p>源码：使用Proxy代替defineProperty实现响应式</p>
<p>重写虚拟DOM实现Tree-shaking</p>
<h3 id="setup"><a href="#setup" class="headerlink" title="setup"></a>setup</h3><ul>
<li>不能访问this，是undefined</li>
<li>在beforeCreate钩子之前执行，领先所有钩子</li>
<li>返回值是对象或者函数：<ul>
<li>返回值是对象，对象里的方法，属性等都可以在模版中使用</li>
<li>返回值是函数，<code>return () =&gt; &#39;hello&#39;</code>, 则返回内容渲染到页面</li>
</ul>
</li>
</ul>
<p>setup和options API的关系：</p>
<ul>
<li>setup中的属性、方法可以在data、methods中访问</li>
<li>data、methods中的配置不能在setup中使用</li>
<li>两者冲突，setup优先</li>
</ul>
<h3 id="ref定义响应式对象"><a href="#ref定义响应式对象" class="headerlink" title="ref定义响应式对象"></a>ref定义响应式对象</h3><p>ref用来定义响应式变量，基本数据类型或者对象类型都可以，返回一个RefImpl对象，简称ref对象或者ref,ref对象的value属性是响应式的。若定义的是对象类型的变量，内部也会调用reactive函数</p>
<p><code>let name = ref(&#39;zhangsan&#39;)</code>,name不是响应式的，name.value才是响应式的，模版可以直接用name</p>
<h3 id="reactive定义对象类型的响应式对象"><a href="#reactive定义对象类型的响应式对象" class="headerlink" title="reactive定义对象类型的响应式对象"></a>reactive定义对象类型的响应式对象</h3><p>只能定义对象类型的响应式对象，基本类型用ref</p>
<p><code>let person = reactive(&#123; name: &#39;Susan&#39;, age: 20&#125;)</code>,是深层次结构的响应式对象</p>
<p>注意：<code>person = reactive(&#123;name: &#39;susan&#39;, age: 21&#125;)</code>会断开响应式的连接，若需修改整个对象可使用</p>
<p><code>person = Object.assign(person, &#123;...&#125;)</code></p>
<h3 id="ref和reactive的对比"><a href="#ref和reactive的对比" class="headerlink" title="ref和reactive的对比"></a>ref和reactive的对比</h3><p>ref用来定义：基本类型数据、对象类型数据</p>
<p>reactive用来定义：对象类型数据</p>
<p>区别：</p>
<ul>
<li>ref对象使用value属性访问</li>
<li>reactive重新分配一个对象会失去响应式，可以用Object.assign替换整体</li>
</ul>
<p>使用：</p>
<ul>
<li>基本数据类型必用ref定义</li>
<li>层级不深的响应式对象可以用ref也可以用reactive</li>
<li>层级深的响应式对象用reactive</li>
</ul>
<h3 id="toRefs和toRef"><a href="#toRefs和toRef" class="headerlink" title="toRefs和toRef"></a>toRefs和toRef</h3><p>作用：将一个响应式对象的属性转换为ref对象</p>
<p>区别：toRefs可以批量转换多个属性，toRef单个</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, toRefs, toRef &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">let</span> person = reactive(&#123;</span><br><span class="line">  name: <span class="string">&#x27;susan&#x27;</span>,</span><br><span class="line">  age: <span class="number">23</span>,</span><br><span class="line">  gender: <span class="string">&#x27;woman&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 通过toRefs将person对象中的n个属性批量取出，且依然保持响应式的能力</span></span><br><span class="line"><span class="keyword">let</span> &#123;name, age&#125; = toRefs(person)</span><br><span class="line"><span class="comment">// 通过toRef将person对象中的gender属性取出，且依然保持响应式的能力</span></span><br><span class="line"><span class="keyword">let</span> gender = toRef(person, <span class="string">&#x27;gender&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="computed计算属性"><a href="#computed计算属性" class="headerlink" title="computed计算属性"></a>computed计算属性</h3><p>根据已有数据计算出新数据</p>
<p>只读计算属性、可修改计算属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;ref, computed&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">let</span> firstName = ref(<span class="string">&#x27;zhang&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> lastName = ref(<span class="string">&#x27;san&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> readonlyFullName = computed(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> firstName.value + <span class="string">&#x27;-&#x27;</span> + lastName.value</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> writableFullName = computed(&#123;</span><br><span class="line">  <span class="function"><span class="title">get</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> firstName.value + <span class="string">&#x27;-&#x27;</span> + lastName.value</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">set</span>(<span class="params">value</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;value has been updated&#x27;</span>, value)</span><br><span class="line">    firstName.value = value.split(<span class="string">&#x27;-&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">    lastName.value = value.split(<span class="string">&#x27;-&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeFullName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  fullName.value = <span class="string">&#x27;li-si&#x27;</span></span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="watch监听数据"><a href="#watch监听数据" class="headerlink" title="watch监听数据"></a>watch监听数据</h3><p>第一个参数：侦听源</p>
<p>第二个参数：数据变化回调函数</p>
<p>第三个参数：配置项：deep,immediate…</p>
<p>侦听源：</p>
<ul>
<li>函数返回一个值（getter函数）</li>
<li>ref对象</li>
<li>响应式对象（reactive）</li>
<li>以上组合的数组</li>
</ul>
<p>当侦听ref对象或reactive对象时，newValue和oldValue相等，因为对象的地址一样，除非响应式连接丢失</p>
<p>当侦听源是响应式对象(reactive定义)时，侦听器会自动启用深层模式且不可关闭</p>
<p>如果侦听对象的某个属性，其值为基本类型，必须使用函数返回值形式：newValue和oldValue不相等</p>
<p>如果其值为对象类型，可直接使用<code>watch(obj.b, ()=&gt;&#123;&#125;,&#123;deep:true&#125;)</code>也可以使用函数式<code>watch(()=&gt;obj.b,()=&gt;&#123;&#125;)</code></p>
<p>watch也可监听多个源：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">watch([<span class="function">()=&gt;</span>person.name,person.car],<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;person.car变化了&#x27;</span>,newValue,oldValue)</span><br><span class="line">  &#125;,&#123;<span class="attr">deep</span>:<span class="literal">true</span>&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="watchEffect"><a href="#watchEffect" class="headerlink" title="watchEffect"></a>watchEffect</h3><p>作用：立即运行一个函数，响应式的追踪其依赖，并在依赖变化时执行函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 当高度大于等于180时，取消监听</span></span><br><span class="line"><span class="keyword">const</span> stopWatch = watchEffect(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (height &gt;= <span class="number">180</span>) &#123;</span><br><span class="line">    <span class="comment">// do something</span></span><br><span class="line">    stopWatch()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>和watch的对比：</p>
<ul>
<li>都能监听数据的响应式变化</li>
<li>watch需要明确指出数据源</li>
<li>watchEffect不用明确指出数据源，根据函数中用到哪些属性就监听哪些数据</li>
</ul>
<h3 id="标签的ref属性"><a href="#标签的ref属性" class="headerlink" title="标签的ref属性"></a>标签的ref属性</h3><p>用于注册模版的引用</p>
<ul>
<li>用在普通元素标签上获取的DOM节点</li>
<li>用在组件标签上获取组件的实例对象</li>
</ul>
<p>使用了 <code>&lt;script setup&gt;</code> 的组件是默认私有的：一个父组件无法访问到一个使用了 <code>&lt;script setup&gt;</code> 的子组件中的任何东西，除非子组件在其中通过 defineExpose 宏显式暴露</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Child.vue</span></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> a = <span class="number">1</span></span><br><span class="line"><span class="keyword">const</span> b = ref(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 像 defineExpose 这样的编译器宏不需要导入</span></span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  a,</span><br><span class="line">  b</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"><span class="comment">// Parent.vue</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Child ref=<span class="string">&#x27;c1&#x27;</span>/&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> c1 = ref()</span><br><span class="line">cl.value.a <span class="comment">// 1</span></span><br><span class="line">cl.value.b <span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 如果子组件没有显示暴露则a, b不可访问</span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="props属性"><a href="#props属性" class="headerlink" title="props属性"></a>props属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;script lang&#x3D;&quot;ts&quot; setup name&#x3D;&quot;Person&quot;&gt;</span><br><span class="line">import &#123;defineProps&#125; from &#39;vue&#39;</span><br><span class="line">import &#123;type PersonInter&#125; from &#39;@&#x2F;types&#39;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 第一种写法：仅接收</span><br><span class="line">&#x2F;&#x2F; const props &#x3D; defineProps([&#39;list&#39;])</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 第二种写法：接收+限制类型</span><br><span class="line">&#x2F;&#x2F; defineProps&lt;&#123;list:Persons&#125;&gt;()</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 第三种写法：接收+限制类型+指定默认值+限制必要性</span><br><span class="line">let props &#x3D; withDefaults(defineProps&lt;&#123;list?:Persons&#125;&gt;(),&#123;</span><br><span class="line">  list:()&#x3D;&gt;[&#123;id:&#39;asdasg01&#39;,name:&#39;小猪佩奇&#39;,age:18&#125;]</span><br><span class="line">&#125;)</span><br><span class="line">console.log(props)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h3><p>分为四个阶段：创建、挂载、更新、销毁</p>
<p>vue3生命周期：</p>
<p>创建阶段：setup</p>
<p>挂载阶段：onBeforeMount、onMounted</p>
<p>更新阶段：onBeforeUpdate、onUpdated</p>
<p>销毁阶段：onBeforeUnmount、onUnmounted</p>
<img src="https://cn.vuejs.org/assets/lifecycle_zh-CN.FtDDVyNA.png" alt="vue3生命周期1" style="zoom:50%;" />

<p>vue2生命周期：</p>
<p>创建阶段：beforeCreate、created</p>
<p>挂载阶段：beforeMount、mounted</p>
<p>更新阶段：beforeUpdate、updated</p>
<p>销毁阶段：beforeDetroy、destroyed</p>
<p><img src="/ZJY.github.io/images/lifestycle.png" alt="vue2生命周期"></p>
<h3 id="key的作用"><a href="#key的作用" class="headerlink" title="key的作用"></a>key的作用</h3><p>特殊的 <code>key</code> attribute 被作为 Vue 的虚拟 DOM 算法的提示，以保持对节点身份的持续跟踪。这样 Vue 就可以知道何时能够重用和修补现有节点，以及何时需要对它们重新排序或重新创建。</p>
<h2 id="vue3非兼容性改变"><a href="#vue3非兼容性改变" class="headerlink" title="vue3非兼容性改变"></a>vue3非兼容性改变</h2><h3 id="全局API"><a href="#全局API" class="headerlink" title="全局API"></a>全局API</h3><ul>
<li><p>全局API更改为使用应用程序实例</p>
<table>
<thead>
<tr>
<th align="center">2.x全局API</th>
<th align="center">3.x实例API</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Vue.component</td>
<td align="center">app.component</td>
</tr>
<tr>
<td align="center">Vue.directive</td>
<td align="center">app.directive</td>
</tr>
<tr>
<td align="center">Vue.config</td>
<td align="center">app.config</td>
</tr>
<tr>
<td align="center">Vue.mixin</td>
<td align="center">app.mixin</td>
</tr>
<tr>
<td align="center">Vue.use</td>
<td align="center">app.use</td>
</tr>
<tr>
<td align="center">Vue.prototype</td>
<td align="center">app.config.globalProperties</td>
</tr>
</tbody></table>
</li>
<li><p>全局和内部API都已经经过重构，现已支持TreeShaking（摇树优化）</p>
</li>
</ul>
<h3 id="模版指令"><a href="#模版指令" class="headerlink" title="模版指令"></a>模版指令</h3><ul>
<li><p>1、v-model在组件上使用已经重新设计，替换掉v-bind.sync</p>
<ul>
<li><p>用于自定义组件时，默认的prop属性和事件名已更改：</p>
<ul>
<li>prop：value-&gt;modelValue</li>
<li>event: input-&gt;update:modelValue</li>
</ul>
</li>
<li><p>v-bind的sync修饰符和组件的model属性已移除</p>
</li>
<li><p>新增：组件上支持绑定多个v-model</p>
</li>
<li><p>新增：v-model修饰符可自定义</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;ChildComponent v-model&#x3D;&quot;pageTitle&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-+ 是以下的简写: --&gt;</span><br><span class="line"></span><br><span class="line">&lt;ChildComponent</span><br><span class="line">  :modelValue&#x3D;&quot;pageTitle&quot;</span><br><span class="line">  @update:modelValue&#x3D;&quot;pageTitle &#x3D; $event&quot;</span><br><span class="line">&#x2F;&gt;</span><br><span class="line"> &lt;!-+ child --&gt;</span><br><span class="line">defineProps: [&#39;modelValue&#39;]</span><br><span class="line"></span><br><span class="line"> &lt;!-+ 绑定多个值: --&gt;</span><br><span class="line">&lt;ChildComponent v-model:title&#x3D;&quot;pageTitle&quot; v-model:content&#x3D;&quot;pageContent&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-+ 是以下的简写： --&gt;</span><br><span class="line"></span><br><span class="line">&lt;ChildComponent</span><br><span class="line">  :title&#x3D;&quot;pageTitle&quot;</span><br><span class="line">  @update:title&#x3D;&quot;pageTitle &#x3D; $event&quot;</span><br><span class="line">  :content&#x3D;&quot;pageContent&quot;</span><br><span class="line">  @update:content&#x3D;&quot;pageContent &#x3D; $event&quot;</span><br><span class="line">&#x2F;&gt;</span><br><span class="line"> &lt;!-+ child --&gt;</span><br><span class="line">defineProps: [&#39;title&#39;,&#39;pageContent&#39;]</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>2、在<code>&lt;template v-for&gt;</code>和v-if等分支使用key发生了变化</p>
<ul>
<li>新增：在v-if/v-else/v-else-if等分支可以不再使用key，key现在是自动生成的，如果要使用key，必须保证各分支key是唯一的</li>
<li>在<code>&lt;template v-for&gt;</code>上key不再添加到子组件，直接添加到template上</li>
</ul>
</li>
<li><p><code>v-if</code>和<code>v-for</code>用在同个元素身上优先级发生了变化</p>
<ul>
<li>2.x中<code>v-if</code>和<code>v-for</code>作用在同一个元素，<code>v-for</code>优先作用</li>
<li>3.x中<code>v-if</code>和<code>v-for</code>作用在同一个元素，<code>v-if</code>优先作用</li>
</ul>
</li>
<li><p><code>v-bind=&quot;object&quot;</code>现在是顺序敏感的</p>
<ul>
<li><p><code>v-bind=&quot;object&quot;</code>的绑定顺序影响渲染结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">2.x:独立 attribute 覆盖 object 中定义的内容</span><br><span class="line">&lt;!-+ 模板 --&gt;</span><br><span class="line">&lt;div id&#x3D;&quot;red&quot; v-bind&#x3D;&quot;&#123; id: &#39;blue&#39; &#125;&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;!-+ 结果 --&gt;</span><br><span class="line">&lt;div id&#x3D;&quot;red&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">3.x: 绑定顺序影响渲染结果</span><br><span class="line">&lt;!-+ 模板 --&gt;</span><br><span class="line">&lt;div id&#x3D;&quot;red&quot; v-bind&#x3D;&quot;&#123; id: &#39;blue&#39; &#125;&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;!-+ 结果 --&gt;</span><br><span class="line">&lt;div id&#x3D;&quot;blue&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-+ 模板 --&gt;</span><br><span class="line">&lt;div v-bind&#x3D;&quot;&#123; id: &#39;blue&#39; &#125;&quot; id&#x3D;&quot;red&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;!-+ 结果 --&gt;</span><br><span class="line">&lt;div id&#x3D;&quot;red&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>v-on:event.native`事件修饰符移除</p>
<ul>
<li><code>v-on</code> 的 <code>.native</code> 修饰符已被移除。同时，<a target="_blank" rel="noopener" href="https://v3-migration.vuejs.org/zh/breaking-changes/emits-option">新增的 <code>emits</code> 选项</a>允许子组件定义真正会被触发的事件。</li>
</ul>
</li>
</ul>
<h3 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h3><ul>
<li>函数式组件只能通过纯函数创建<ul>
<li>函数式组件应用场景：（1）函数式组件比有状态组件初始化快得多（2）可以返回多个根组件</li>
<li>变化：<ul>
<li>3.x中有状态组件性能提升和函数式组件差距几乎不计，同时支持返回多个根节点</li>
<li>函数式组件只能接收props和context（attrs、slots、emit）的普通函数创建</li>
<li>去掉单文件SFC中的template标签的functional属性</li>
<li>去掉函数创建组件的functional:true选项</li>
</ul>
</li>
</ul>
</li>
<li>单文件组件SFC的template标签的functional属性和函数创建的组件的functional:true选项已移除</li>
<li>异步组件只能通过defineAsyncComponent方法进行创建</li>
<li>组件事件通过emits选项声明，定义子组件向父组件触发的事件</li>
</ul>
<h3 id="渲染函数"><a href="#渲染函数" class="headerlink" title="渲染函数"></a>渲染函数</h3><ul>
<li>渲染函数API已更改<ul>
<li><code>h</code>函数需要全局导入，不作为渲染函数的参数render(h,…)</li>
<li>渲染函数的参数重写，有状态组件和函数式组件表现更加一致</li>
<li>VNode具有更扁平化的prop结构</li>
</ul>
</li>
<li>$scopeSlots属性已移除，所有插槽都通过$slots作为函数暴露</li>
<li>$listeners属性移除整合到$attrs中</li>
<li>$attrs现在包含class和style属性<ul>
<li>$attrs<code>现在包含了所有传递给组件的 attribute，包括</code>class<code>和</code>style,在vue2中，class和style不在$attrs，被应用到组件的根元素</li>
</ul>
</li>
</ul>
<h3 id="自定义元素"><a href="#自定义元素" class="headerlink" title="自定义元素"></a>自定义元素</h3><ul>
<li>自定义元素检测在模版编译时执行而不在运行时</li>
<li><code>is</code>属性限制只能在<code>component</code>标签使用</li>
</ul>
<h3 id="其他小改变"><a href="#其他小改变" class="headerlink" title="其他小改变"></a>其他小改变</h3><ul>
<li>beforeDestroy、destroy生命周期更改为onBeforeUnmount、onUnmouted</li>
<li>组件的props属性的default工厂函数不再支持访问this上下文</li>
<li>自定义指令的生命周期已更改为与组件生命周期保持一致，且移除binding.expression</li>
<li>监听组件的生命周期由<code>@hook:</code>改为<code>@vue:</code></li>
<li>data选项只能被声明为一个函数</li>
<li>mixin的data合并只合并浅层</li>
<li><code>Transition</code>的class命名已更改：v-enter-&gt;v-enter-from</li>
<li><code>TransitionGroup</code>不再默认渲染包裹元素</li>
<li>当侦听watch一个数组时，数组被替换才能监听到，数组变更监听不到需要开启deep</li>
<li>没有特殊指令的template元素被渲染成普通元素，并将渲染为原生的 <code>&lt;template&gt;</code> 元素，而不是渲染其内部内容</li>
<li>vue2:当挂载一个具有template的应用时，会替换挂载目标，vue3中被渲染为挂载目标的子元素，即innerHTML</li>
</ul>
<h3 id="被移除的API"><a href="#被移除的API" class="headerlink" title="被移除的API"></a>被移除的API</h3><ul>
<li>移除keyCode作为v-on修饰符的支持</li>
<li>移除filter过滤器</li>
<li>移除$on,$off,$once</li>
<li>移除Sdestroy实例方法</li>
<li>移除$children,建议使用模版引用ref</li>
<li>全局的set和delete方法以及实例方法$set,$delete</li>
</ul>
<p>———————————————-这里是分割线———————————————-</p>
<h2 id="vue2小记"><a href="#vue2小记" class="headerlink" title="vue2小记"></a>vue2小记</h2><p>vue是用于创建用户界面的渐进式框架。</p>
<p>2016，2.0发布</p>
<p>2020，3.0发布</p>
<h3 id="vue特点"><a href="#vue特点" class="headerlink" title="vue特点"></a>vue特点</h3><ul>
<li>采用<strong>组件化</strong>模式，提高代码复用率，且让代码更好维护</li>
<li>声明式编码，模板语法来声明式地将数据渲染进 DOM 的系统</li>
<li>使用虚拟dom+diff算法，尽量复用dom节点</li>
</ul>
<h3 id="模版语法"><a href="#模版语法" class="headerlink" title="模版语法"></a>模版语法</h3><ul>
<li>插值语法：，用于解析标签体内容</li>
<li>指令语法：v-bind, v-if…，用于解析标签属性，解析标签体内容，绑定事件</li>
</ul>
<p>V-bind：单向数据绑定，数据只能从data流向页面</p>
<p>V-model: 双向数据绑定-用于表单元素，数据不仅能从data流向页面，也能从页面流向data</p>
<h3 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h3><ul>
<li>m：model模型，对应data中的数据</li>
<li>v：view试图负责用户界面，对应模板</li>
<li>vm：视图模型，vue实例对象，连接view和model之间的桥梁</li>
</ul>
<p>View——-viewmodel: dom listeners——&gt;model</p>
<p>view&lt;—–viewmodel: data binding———-model</p>
<p>View:Dom   viewmodel: vue.  Model: js object</p>
<p>viewmodel包含model的数据和view的逻辑，包括数据绑定、事件处理等。viewmodel将数据从model映射到view，并处理用户的交互；当model数据发生改变时，viewmodel更新view以反映变化。</p>
<p>mvvm的核心优势在于它提供了清晰的职责分离和关注点分离。Model只关心数据和业务逻辑；view只负责界面和布局；viewmodel负责将model的数据和view的显示结合起来，并处理用户的交互操作。</p>
<h3 id="defineProperty"><a href="#defineProperty" class="headerlink" title="defineProperty"></a>defineProperty</h3><ul>
<li>value</li>
<li>Configurable: 是否可配置的，可删除，默认false</li>
<li>writable：是否可修改，默认false</li>
<li>enumable：是否可枚举，默认false</li>
<li>get</li>
<li>set</li>
</ul>
<h3 id="vue中数据代理"><a href="#vue中数据代理" class="headerlink" title="vue中数据代理"></a>vue中数据代理</h3><p>1.vue中数据代理：vm._data.message,也可message</p>
<p>通过vm对象来代理data中的属性的操作-读/写</p>
<p>2.vue中数据代理的好处：</p>
<p>更加方便的操作data中的数据</p>
<p>3.基本原理：</p>
<p>通过Object.defineProperty()将data中所有属性添加到vm上</p>
<p>为每一个添加到vm上的属性都添加getter/setter</p>
<p>在getter/setter内部去操作（读/写）data中对应的属性</p>
<h3 id="事件监听"><a href="#事件监听" class="headerlink" title="事件监听"></a>事件监听</h3><p>1.绑定监听：</p>
<ul>
<li>v-on:xxx=”fun”</li>
<li>@xxx=”fun”</li>
<li>@xxx=”func(params)”</li>
<li>默认形参event</li>
<li>隐含属性对象：$event</li>
</ul>
<p>2.事件修饰符</p>
<ul>
<li>prevent: @event.prevent阻止事件的默认行为event.preventDefault()</li>
<li>stop: @event.stop阻止事件冒泡行为：event.stopPropagation()</li>
<li>once: @event.once事件只出发一次</li>
<li>capture: @event.capture使用事件的捕获模式，由外到内，默认是冒泡模式，由内向外</li>
<li>self：只有event.target是元素自身时才触发</li>
<li>passive：立即执行事件的默认行为，无需等待事件回调函数执行完毕，注意：不是所有事件都先执行回调再执行默认行为，比如scroll先滚动再执行回调，但是wheel滚轮事件先执行回调再执行默认行为</li>
<li>Native:把当前元素当作原生标签使用</li>
</ul>
<p>3.按键修饰符：</p>
<p>按键码：</p>
<ul>
<li><code>.enter</code></li>
<li><code>.delete</code>(捕获“删除”和“退格”键)</li>
<li><code>.tab</code>特殊，必须配合keydown事件使用</li>
<li><code>.esc</code></li>
<li><code>.space</code></li>
<li><code>.up</code></li>
<li><code>.down</code></li>
<li><code>.left</code></li>
<li><code>.right</code></li>
</ul>
<p>系统修饰健：</p>
<ul>
<li><code>.ctrl</code></li>
<li><code>.alt</code></li>
<li><code>.shift</code></li>
<li><code>.meta</code></li>
</ul>
<p><code>.exact</code> 修饰符允许你控制由精确的系统修饰符组合触发的事件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-+ 即使 Alt 或 Shift 被一同按下时也会触发 --&gt;</span><br><span class="line">&lt;button v-on:click.ctrl&#x3D;&quot;onClick&quot;&gt;A&lt;&#x2F;button&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-+ 有且只有 Ctrl 被按下的时候才触发 --&gt;</span><br><span class="line">&lt;button v-on:click.ctrl.exact&#x3D;&quot;onCtrlClick&quot;&gt;A&lt;&#x2F;button&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-+ 没有任何系统修饰符被按下的时候才触发 --&gt;</span><br><span class="line">&lt;button v-on:click.exact&#x3D;&quot;onClick&quot;&gt;A&lt;&#x2F;button&gt;</span><br></pre></td></tr></table></figure>
<p>你还可以通过全局 <code>config.keyCodes</code> 对象<a target="_blank" rel="noopener" href="https://v2.cn.vuejs.org/v2/api/#keyCodes">自定义按键修饰符别名</a>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 可以使用 `v-on:keyup.f1`</span></span><br><span class="line">Vue.config.keyCodes.f1 = <span class="number">112</span></span><br></pre></td></tr></table></figure>
<p>4、表单修饰符</p>
<ul>
<li>.lazy 修饰符的作用是将<code>v-model</code>从实时监听的状态变为<code>change</code>状态。换句话说，它会使<code>v-model</code>在输入框失去焦点或者按下回车键时才更新数据.只适用于<code>v-model</code>指令</li>
<li>.trim 删除内容前后空格</li>
<li>.number 输入时数字或转为数字</li>
</ul>
<h3 id="scroll和wheel事件"><a href="#scroll和wheel事件" class="headerlink" title="scroll和wheel事件"></a>scroll和wheel事件</h3><p>scroll是页面滚动事件，滚动到底部后不会再触发</p>
<p>wheel是鼠标滚轮事件，滚动到底部后继续滚轮还会触发</p>
<h3 id="computed计算属性-1"><a href="#computed计算属性-1" class="headerlink" title="computed计算属性"></a>computed计算属性</h3><p><strong>计算属性是基于它们的响应式依赖进行缓存的</strong>。只在相关响应式依赖发生改变时它们才会重新求值。如果你不希望有缓存，请用方法来替代。</p>
<p>计算属性默认只有 getter，不过在需要时你也可以提供一个 setter：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  fullName: &#123;</span><br><span class="line">    <span class="comment">// getter</span></span><br><span class="line">    get: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.firstName + <span class="string">&#x27; &#x27;</span> + <span class="built_in">this</span>.lastName</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// setter</span></span><br><span class="line">    set: <span class="function"><span class="keyword">function</span> (<span class="params">newValue</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> names = newValue.split(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">      <span class="built_in">this</span>.firstName = names[<span class="number">0</span>]</span><br><span class="line">      <span class="built_in">this</span>.lastName = names[names.length + <span class="number">1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>现在再运行 <code>vm.fullName = &#39;John Doe&#39;</code> 时，setter 会被调用，<code>vm.firstName</code> 和 <code>vm.lastName</code> 也会相应地被更新</p>
<h3 id="侦听器watch"><a href="#侦听器watch" class="headerlink" title="侦听器watch"></a>侦听器watch</h3><p>当需要在数据变化时执行异步或开销较大的操作时，watch更有用</p>
<h3 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h3><p><code>v-if</code> 指令用于条件性地渲染一块内容。这块内容只会在指令的表达式返回 truthy 值的时候被渲染。</p>
<p>另一个用于根据条件展示元素的选项是 <code>v-show</code> 指令。不同的是带有 <code>v-show</code> 的元素始终会被渲染并保留在 DOM 中。<code>v-show</code> 只是简单地切换元素的 CSS property <code>display</code></p>
<h3 id="v-if-vs-v-show"><a href="#v-if-vs-v-show" class="headerlink" title="v-if vs v-show"></a>v-if vs v-show</h3><p><code>v-if</code> 是“真正”的条件渲染，因为它会确保在切换过程中条件块内的事件监听器和子组件适当地被销毁和重建。</p>
<p><code>v-if</code> 也是<strong>惰性的</strong>：如果在初始渲染时条件为假，则什么也不做——直到条件第一次变为真时，才会开始渲染条件块。</p>
<p>相比之下，<code>v-show</code> 就简单得多——不管初始条件是什么，元素总是会被渲染，并且只是简单地基于 CSS 进行切换。</p>
<p>一般来说，<code>v-if</code> 有更高的切换开销，而 <code>v-show</code> 有更高的初始渲染开销。因此，如果需要非常频繁地切换，则使用 <code>v-show</code> 较好；如果在运行时条件很少改变，则使用 <code>v-if</code> 较好。</p>
<p>当 <code>v-if</code> 与 <code>v-for</code> 一起使用时，<code>v-for</code> 具有比 <code>v-if</code> 更高的优先级.</p>
<h3 id="key的作用-1"><a href="#key的作用-1" class="headerlink" title="key的作用"></a><code>key</code>的作用</h3><p>key的特殊attribute主要用于vue的虚拟dom算法，在新旧节点比对时标识vnodes。如果不使用key，vue会最大限度的减少使用动态元素且尽可能的尝试就地修改/复用元素。而使用key，会根据key的变化重新排列元素，并移除key不存在的元素。</p>
<h3 id="深入响应式原理"><a href="#深入响应式原理" class="headerlink" title="深入响应式原理"></a>深入响应式原理</h3><h4 id="如何追踪变化？"><a href="#如何追踪变化？" class="headerlink" title="如何追踪变化？"></a>如何追踪变化？</h4><p>当把一个普通js对象传给data选项时，vue会遍历data中所有属性，并使用Object.defineProperty()方法将属性转换为getter/setter。</p>
<p>每个组件实例都对应一个watcher实例，它会把组件渲染过程中所接触过的所有属性记录为依赖。之后当依赖项的setter触发时，会通知watcher实例，从而使它关联的组件重新渲染。</p>
<p><img src="/ZJY.github.io/images/image-20240121173248736.png" alt="image"></p>
<h4 id="检测变化的注意事项"><a href="#检测变化的注意事项" class="headerlink" title="检测变化的注意事项"></a>检测变化的注意事项</h4><p>对于对象：无法监听到对象属性的添加/删除，可使用Vue.set()/delete()或者实例的vm.$set()/$delete</p>
<p>对于数组：1.无法监听到通过数组下标修改值，可使用set或splice方法解决； 2.无法监听到数组长度变化：arr.length = 10,可使用splice方法解决；</p>
<p>Vue.set/delete,注意对象不能是 Vue 实例，或者 Vue 实例的根数据对象：即不能往vm或者vm._data中添加/删除属性</p>
<h4 id="数组更新检测"><a href="#数组更新检测" class="headerlink" title="数组更新检测"></a>数组更新检测</h4><p>Vue 将被侦听的数组的变更方法进行了包裹，所以它们也将会触发视图更新。这些被包裹过的方法包括：</p>
<ul>
<li><code>push()</code></li>
<li><code>pop()</code></li>
<li><code>shift()</code></li>
<li><code>unshift()</code></li>
<li><code>splice()</code></li>
<li><code>sort()</code></li>
<li><code>reverse()</code></li>
</ul>
<h4 id="异步更新队列"><a href="#异步更新队列" class="headerlink" title="异步更新队列"></a>异步更新队列</h4><p>vue在更新dom时是异步的。</p>
<p>当侦听到数据变化时，会开启一个队列，缓冲同一个事件循环队列中所有数据变化。每个组件实例都对应一个watcher实例。当同一个watcher实例被多次触发时，只会推入队列一次。组件数据变更时，vue会在下一次事件循环“tick”中更新组件。</p>
<p>vue在异步队列中尝试使用原生的<code>Promise.then</code>、<code>MutationObserver</code>、<code>setImmdiate</code>,如果执行环境不支持，则会采用 <code>setTimeout(fn, 0)</code> 代替。</p>
<h3 id="内置指令"><a href="#内置指令" class="headerlink" title="内置指令"></a>内置指令</h3><p>v-text: 更新元素的textContent</p>
<p>v-html: 更新元素的innerHTML</p>
<p>v-if：条件为true，才会渲染到页面</p>
<p>v-else：分支</p>
<p>v-show：不管条件是否为真，都渲染到页面，通过控制display属性控制显示/隐藏</p>
<p>v-for：遍历对象/数组</p>
<p>v-on：绑定事件监听，简写@</p>
<p>v-bind：绑定解析表达式。可以简写为：</p>
<p>v-model：双向数据绑定</p>
<p>v-clock：防止闪现，避免网速慢导致页面呈现未经vue编译的页面<code>&lt;h&gt;&#123;&#123; xx &#125;&#125;&lt;/h&gt;</code>，配合[v-cloak]{display:none}使用</p>
<h3 id="自定义指令"><a href="#自定义指令" class="headerlink" title="自定义指令"></a>自定义指令</h3><p>全局</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//简写时代表 bind 和 update 时触发相同行为</span></span><br><span class="line">Vue.directive(<span class="string">&#x27;my-dir&#x27;</span>, <span class="function"><span class="title">funtion</span>(<span class="params">el, binding</span>)</span> &#123;</span><br><span class="line">              el.innerHTML = binding.value.toUpperCase()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>局部指令：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  ...</span><br><span class="line">  directives: &#123;</span><br><span class="line">    <span class="string">&#x27;my-dir&#x27;</span>: &#123;</span><br><span class="line">      <span class="function"><span class="title">bind</span>(<span class="params">el, binding</span>)</span> &#123;</span><br><span class="line">        ...</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="title">inserted</span>(<span class="params">el, binding</span>)</span> &#123;</span><br><span class="line">        ...</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">  &lt;h v-my-dir=<span class="string">&#x27;xxx&#x27;</span>&gt;&lt;/h&gt;</span><br></pre></td></tr></table></figure>
<p>指令何时被调用？</p>
<p>1.指令与元素第一次绑定时（bind）</p>
<p>2.模版被重新解析时（update）</p>
<p>重要的指令生命周期：</p>
<p>bind(el, binding, vnode, oldNode): 指令与元素第一次绑定时</p>
<p>Inserted(el, binding, vnode, oldNode): 被绑定元素插入父节点时调用</p>
<p>Update(el, binding, vnode, oldNode): 指令所在模版被重新解析时</p>
<h3 id="组件生命周期"><a href="#组件生命周期" class="headerlink" title="组件生命周期"></a>组件生命周期</h3><p><img src="/ZJY.github.io/" alt="https://v2.cn.vuejs.org/images/lifecycle.png"></p>
<ul>
<li><p>new Vue()</p>
</li>
<li><p>Init event &amp; lifecycle:初始化生命周期、事件</p>
</li>
<li><p>beforeCreate：data和methods不可访问</p>
</li>
<li><p>初始化：数据代理、数据监测</p>
</li>
<li><p>created：可访问data中数据、methods方法</p>
</li>
<li><p>vue开始编译模版，生成虚拟dom（内存中）</p>
</li>
<li><p>beforeMount：页面呈现未经vue编译的dom（<code>&lt;h&gt;&#123;&#123; xx &#125;&#125;&lt;/h&gt;</code>），dom不可操作</p>
</li>
<li><p>将内存中虚拟dom生成真实dom并插入到页面</p>
</li>
<li><p>mounted：页面呈现经过编译的dom，可操作dom</p>
</li>
</ul>
<p>数据变化</p>
<ul>
<li><p>beforeUpate：数据已更新但页面还是旧的</p>
</li>
<li><p>生成新的虚拟dom与旧的虚拟节点比对patch</p>
</li>
<li><p>Updated：数据和页面保持同步</p>
</li>
<li><p>调用vm.$destroy方法</p>
</li>
<li><p>beforeDestroy：此时data、methods、指令还可用，但操作数据不再更新</p>
</li>
<li><p>移除watchers、子组件、和事件监听（移除自定义事件，原生事件保留）</p>
</li>
<li><p>destroyed：组件实例销毁</p>
</li>
</ul>
<h3 id="组件化编程"><a href="#组件化编程" class="headerlink" title="组件化编程"></a>组件化编程</h3><p>模块：</p>
<p>向外提供特定功能的js程序，一般就是一个js文件</p>
<p>作用：复用js，简化js的编写，提高js运行效率</p>
<p>组件：</p>
<p>用来实现特定功能的代码集合（html、css、js、images）</p>
<p>作用：复用编码，简化项目编码，提高运行效率</p>
<p>模块化：</p>
<p>当应用中的js都以模块来编写这个应用就是一个模块化的应用。</p>
<p>组件化：</p>
<p>当应用中的功能都是多组件的方式来编写这个应用就是一个组件化的应用</p>
<h3 id="vue的版本"><a href="#vue的版本" class="headerlink" title="vue的版本"></a>vue的版本</h3><ul>
<li>vue.js完整版的版本。包含：核心功能+模版解析器</li>
<li>vue.runtime.js运行时的版本，包含：核心功能</li>
</ul>
<p>单文件组件引入的是运行时的版本，因为运行时版本没有模版解析器，所以不能使用template选项，需要使用render函数接收到的createElement函数来指定渲染内容。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line"> render: <span class="function"><span class="params">h</span> =&gt;</span>h(<span class="string">&#x27;h1&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">&#x27;#app&#x27;</span></span><br><span class="line"> template: <span class="string">`&lt;app&gt;&lt;/app&gt;`</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>以及使用单文件组件需要vue-template-complier包来解析模版（vue2.x）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  ...,</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App),</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"><span class="comment">// 等价于</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  render: <span class="function"><span class="params">createElement</span> =&gt;</span> createElement(App),</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>将 <code>h</code> 作为 <code>createElement</code> 的别名是 Vue 生态系统中的一个通用惯例，实际上也是 JSX 所要求的。</p>
<p><code>createElement</code> 到底返回的不是一个真实的dom，是节点描述信息，包括及其子节点的描述信息。我们把这样的节点描述为“虚拟节点 (virtual node)”，也常简写它为“<strong>VNode</strong>”</p>
<h3 id="混入mixin"><a href="#混入mixin" class="headerlink" title="混入mixin"></a>混入mixin</h3><p>通过混入来分发组件中的可复用功能。混入对象可以包含任意组件选项。当组件使用混入对象时，所有混入对象的选项将被“混合”进入该组件本身的选项。</p>
<p>选项合并：</p>
<ul>
<li>数据对象data在内部会进行递归合并，发生冲突时以组件数据优先</li>
<li>同名钩子函数合并为一个数组，并且混入对象钩子函数在组件自身钩子函数之前调用</li>
<li>值为对象的选项，比如methods、components、directives，将会合并为一个对象，当键名冲突时，使用组件对象的键值对</li>
</ul>
<p>注意：<code>Vue.extend()</code> 也使用同样的策略进行合并。</p>
<p>混入也可以进行全局注册。使用时格外小心！一旦使用全局混入，它将影响<strong>每一个</strong>之后创建的 Vue 实例</p>
<h3 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h3><p>插件通常用来为 Vue 添加全局功能。插件的功能范围没有严格的限制——一般有下面几种：</p>
<ul>
<li>添加全局属性或方法</li>
<li>添加全局的资源：指令、过滤器、过渡等</li>
<li>通过全局混入添加一些组件选项，比如vue-router</li>
<li>添加vue实例方法通过把他们添加到Vue.prototype上</li>
<li>一个库，提供自己的api，同时具有以上一个多个功能，如vue-router</li>
</ul>
<h4 id="使用插件"><a href="#使用插件" class="headerlink" title="使用插件"></a>使用插件</h4><p>通过Vue.use(xxx), 在new Vue()之前调用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 调用 `MyPlugin.install(Vue)`</span></span><br><span class="line">Vue.use(MyPlugin)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="comment">// ...组件选项</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>开发插件通过install方法，传入Vue构造函数和可选options选项对象：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">MyPlugin.install = <span class="function"><span class="keyword">function</span>(<span class="params">Vue, options</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 添加全局方法</span></span><br><span class="line">  Vue.myGlobalMethods = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 添加全局资源</span></span><br><span class="line">   Vue.directive(<span class="string">&#x27;my-directive&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">el, binding</span>) </span>&#123;</span><br><span class="line">     ...</span><br><span class="line">   &#125;)</span><br><span class="line">   <span class="comment">// 添加全局混入</span></span><br><span class="line">   Vue.mixin(&#123;</span><br><span class="line">     <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">       ...</span><br><span class="line">     &#125;</span><br><span class="line">      ...</span><br><span class="line">   &#125;)</span><br><span class="line">   <span class="comment">// 添加实例方法</span></span><br><span class="line">   Vue.prototype.$myMthods = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="函数式组件"><a href="#函数式组件" class="headerlink" title="函数式组件"></a>函数式组件</h3><p>无状态 (没有<a target="_blank" rel="noopener" href="https://v2.cn.vuejs.org/v2/api/#%E9%80%89%E9%A1%B9-%E6%95%B0%E6%8D%AE">响应式数据</a>)，也没有实例 (没有 <code>this</code> 上下文)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">&#x27;my-component&#x27;</span>, &#123;</span><br><span class="line">  functional: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// Props 是可选的</span></span><br><span class="line">  props: &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 为了弥补缺少的实例</span></span><br><span class="line">  <span class="comment">// 提供第二个参数作为上下文</span></span><br><span class="line">  render: <span class="function"><span class="keyword">function</span> (<span class="params">createElement, context</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 单文件组件-函数式组件</span></span><br><span class="line">&lt;template functional&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h3 id="配置webpack"><a href="#配置webpack" class="headerlink" title="配置webpack"></a>配置webpack</h3><p>Vue 脚手架隐藏了所有 webpack 相关的配置，若想查看具体的 webpakc 配置， 请执行:vue inspect &gt; output.js</p>
<p>如果想更改webpack配置，根目录下新建vue.config.js或者package.json中配置”vue”选项</p>
<h3 id="组件传参-组件通信"><a href="#组件传参-组件通信" class="headerlink" title="组件传参/组件通信"></a>组件传参/组件通信</h3><p>1.父子传参，props传递属性和方法:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Child :name&#x3D;&quot;name&quot; :getNameFn&#x3D;&quot;getNameFn&quot; &#x2F;&gt;</span><br><span class="line">getNameFn() &#123;...&#125;</span><br><span class="line">&#x2F;&#x2F; child.vue</span><br><span class="line">props: [&#39;name&#39;, &#39;getNameFn&#39;]</span><br><span class="line">&#x2F;&#x2F; 调用父组件传递方法来向父组件传参</span><br><span class="line">this.getNameFn(params)</span><br></pre></td></tr></table></figure>
<p>2.父子传参，自定义事件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Child :name&#x3D;&quot;name&quot; @getNameFn&#x3D;&quot;getNameFn&quot; &#x2F;&gt;</span><br><span class="line">getNameFn() &#123;...&#125;</span><br><span class="line">&#x2F;&#x2F; child.vue</span><br><span class="line">props: [&#39;name&#39;]</span><br><span class="line">&#x2F;&#x2F; 调用子组件自定义方法传参</span><br><span class="line">this.$emit(&#39;getNameFn&#39;, params)</span><br></pre></td></tr></table></figure>
<p>3.父子传参，父组件监听子组件触发事件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;Child :name&#x3D;&quot;name&quot; ref&#x3D;&quot;child&quot; &#x2F;&gt;</span><br><span class="line">mounted() &#123;</span><br><span class="line"> this.$refs.child.$on(&#39;getNameFn&#39;, cb)</span><br><span class="line"> &#x2F;&#x2F; 注意回调函数this指向</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; child.vue</span><br><span class="line">props: [&#39;name&#39;]</span><br><span class="line">&#x2F;&#x2F; 调用子组件自定义方法传参</span><br><span class="line">this.$emit(&#39;getNameFn&#39;, params)</span><br></pre></td></tr></table></figure>
<p>4.父子传参，v-bind.sync,子组件修改props传参同步给父组件（双向绑定）:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;Child :name.sync&#x3D;&quot;name&quot;&#x2F;&gt;</span><br><span class="line">&#x2F;&#x2F; 等价于</span><br><span class="line">&lt;Child v-bind:name.sync&#x3D;&quot;name&quot; &#x2F;&gt;</span><br><span class="line">&#x2F;&#x2F; 等价于</span><br><span class="line">&lt;Child :name&#x3D;&quot;name&quot; @update:name&#x3D;&quot;name &#x3D; $event&quot;&#x2F;&gt;</span><br><span class="line">&#x2F;&#x2F; child</span><br><span class="line">props: [&#39;name&#39;]</span><br><span class="line">&#x2F;&#x2F; 子组件修改props传参同步给父组件</span><br><span class="line">this.$emit(&#39;update:name&#39;, name)</span><br></pre></td></tr></table></figure>
<p>5.父子传参，自定义组件的v-model：</p>
<p>一个组件上的 <code>v-model</code> 默认会利用名为 <code>value</code> 的 prop 和名为 <code>input</code> 的事件，但是像单选框、复选框等类型的输入控件需要配置model选项：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(&#39;base-checkbox&#39;, &#123;</span><br><span class="line">  model: &#123;</span><br><span class="line">    prop: &#39;checked&#39;,</span><br><span class="line">    event: &#39;change&#39;</span><br><span class="line">  &#125;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    checked: Boolean</span><br><span class="line">  &#125;,</span><br><span class="line">  template: &#96;</span><br><span class="line">    &lt;input</span><br><span class="line">      type&#x3D;&quot;checkbox&quot;</span><br><span class="line">      v-bind:checked&#x3D;&quot;checked&quot;</span><br><span class="line">      v-on:change&#x3D;&quot;$emit(&#39;change&#39;, $event.target.checked)&quot;</span><br><span class="line">    &gt;</span><br><span class="line">  &#96;</span><br><span class="line">&#125;)</span><br><span class="line">&#x2F;&#x2F; 使用</span><br><span class="line">&lt;base-checkbox v-model&#x3D;&quot;lovingVue&quot;&gt;&lt;&#x2F;base-checkbox&gt;</span><br></pre></td></tr></table></figure>
<p>这里的 <code>lovingVue</code> 的值将会传入这个名为 <code>checked</code> 的 prop。同时当 <code>&lt;base-checkbox&gt;</code> 触发一个 <code>change</code> 事件并附带一个新的值的时候，这个 <code>lovingVue</code> 的 property 将会被更新。</p>
<p>6.跨组件通信，全局事件总线$bus:</p>
<p>$on(eventName, listener): 绑定自定义事件监听</p>
<p>$emit(eventName, data): 分发自定义事件</p>
<p>$off(eventName): 解绑自定义事件</p>
<p>$once(eventName, listener): 绑定自定义事件只触发一次</p>
<p>所有组件实例对象的原型对象指向vue的原型对象</p>
<p>   <code>VueComponent.prototype.__proto__ === Vue.protype</code></p>
<p>所有vc组件对象都能访问vue原型对象上的属性和方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="function"><span class="title">beforeCreate</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 尽量早的执行挂载全局事件总线对象的操作</span></span><br><span class="line">    Vue.prototype.$bus = <span class="built_in">this</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 绑定事件</span></span><br><span class="line"><span class="built_in">this</span>.$bus.$on(<span class="string">&#x27;eventName&#x27;</span>, cb)</span><br><span class="line"><span class="comment">// 分发事件</span></span><br><span class="line"><span class="built_in">this</span>.$bus.$emit(<span class="string">&#x27;eventName&#x27;</span>, params)</span><br><span class="line"><span class="comment">// 解绑事件</span></span><br><span class="line"><span class="built_in">this</span>.$bus.$off(<span class="string">&#x27;eventName&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>7.跨组件通信，消息订阅与发布：PubSubJS</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 安装 npm install -S pubsub-js</span></span><br><span class="line"><span class="keyword">import</span> pubsub <span class="keyword">from</span> <span class="string">&#x27;pubsub-js&#x27;</span></span><br><span class="line"><span class="comment">// 订阅</span></span><br><span class="line">pubsub.subscribe(<span class="string">&#x27;eventName&#x27;</span>, cb)</span><br><span class="line"><span class="comment">// 发布</span></span><br><span class="line">pubsub.publish(<span class="string">&#x27;eventName&#x27;</span>, params)</span><br><span class="line"><span class="comment">// 取消订阅</span></span><br><span class="line">pubsub.unsubscribe(<span class="string">&#x27;eventName&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>8.祖孙组件通信，provide/inject</p>
<p>9.祖孙组件通信，$attrs,$listeners</p>
<h3 id="插槽"><a href="#插槽" class="headerlink" title="插槽"></a>插槽</h3><ul>
<li>默认插槽default</li>
<li>具名插槽</li>
<li>作用域插槽</li>
</ul>
<p>父级模板里的所有内容都是在父级作用域中编译的；子模板里的所有内容都是在子作用域中编译的。</p>
<p>默认插槽default：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 默认插槽-一个不带 name 的 &lt;slot&gt; 出口会带有隐含的名字“default”。</span><br><span class="line">&lt;slot &#x2F;&gt;</span><br><span class="line">&#x2F;&#x2F; 使用</span><br><span class="line"> &lt;my-com&gt;</span><br><span class="line">   &lt;div&gt;</span><br><span class="line">     this is an default slot</span><br><span class="line">   &lt;&#x2F;div&gt;</span><br><span class="line"> &lt;&#x2F;my-com&gt;</span><br></pre></td></tr></table></figure>
<p> 具名插槽:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;container&quot;&gt;</span><br><span class="line">  &lt;header&gt;</span><br><span class="line">    &lt;slot name&#x3D;&quot;header&quot;&gt;&lt;&#x2F;slot&gt;</span><br><span class="line">  &lt;&#x2F;header&gt;</span><br><span class="line">  &lt;main&gt;</span><br><span class="line">    &lt;slot&gt;&lt;&#x2F;slot&gt;</span><br><span class="line">  &lt;&#x2F;main&gt;</span><br><span class="line">  &lt;footer&gt;</span><br><span class="line">    &lt;slot name&#x3D;&quot;footer&quot;&gt;&lt;&#x2F;slot&gt;</span><br><span class="line">  &lt;&#x2F;footer&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">  &#x2F;&#x2F; 使用</span><br><span class="line"> &lt;base-layout&gt;</span><br><span class="line">  &lt;template v-slot:header&gt;</span><br><span class="line">    &lt;h1&gt;Here might be a page title&lt;&#x2F;h1&gt;</span><br><span class="line">  &lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">  &lt;template v-slot:default&gt;</span><br><span class="line">    &lt;p&gt;A paragraph for the main content.&lt;&#x2F;p&gt;</span><br><span class="line">    &lt;p&gt;And another one.&lt;&#x2F;p&gt;</span><br><span class="line">  &lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">  &lt;template v-slot:footer&gt;</span><br><span class="line">    &lt;p&gt;Here&#39;s some contact info&lt;&#x2F;p&gt;</span><br><span class="line">  &lt;&#x2F;template&gt;</span><br><span class="line">&lt;&#x2F;base-layout&gt;</span><br><span class="line">&#x2F;&#x2F; 注意 v-slot 只能添加在 &lt;template&gt; 上 </span><br><span class="line">&lt;div slot&#x3D;&quot;footer&quot;&gt;</span><br><span class="line">  &lt;p&gt;Here&#39;s some contact info&lt;&#x2F;p&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>作用域插槽:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> &lt;span&gt;</span><br><span class="line">  &lt;slot v-bind:user&#x3D;&quot;user&quot;&gt;</span><br><span class="line">    &#123;&#123; user.lastName &#125;&#125;</span><br><span class="line">  &lt;&#x2F;slot&gt;</span><br><span class="line">&lt;&#x2F;span&gt;</span><br><span class="line">&#x2F;&#x2F; 使用</span><br><span class="line">&lt;current-user&gt;</span><br><span class="line">  &lt;template v-slot:default&#x3D;&quot;slotProps&quot;&gt;</span><br><span class="line">    &#123;&#123; slotProps.user.firstName &#125;&#125;</span><br><span class="line">  &lt;&#x2F;template&gt;</span><br><span class="line">&lt;&#x2F;current-user&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 解构插槽</span><br><span class="line">&lt;current-user&gt;</span><br><span class="line">  &lt;template v-slot&#x3D;&quot;&#123;user&#125;&quot;&gt;</span><br><span class="line">    &#123;&#123; user.firstName &#125;&#125;</span><br><span class="line">  &lt;&#x2F;template&gt;</span><br><span class="line">&lt;&#x2F;current-user&gt;</span><br></pre></td></tr></table></figure>
<h3 id="vuex"><a href="#vuex" class="headerlink" title="vuex"></a>vuex</h3><p>是专门为vuejs应用程序开发的状态管理模式。</p>
<p>适用于：</p>
<ul>
<li>多个组件依赖于同一个状态</li>
<li>多个组件的行为变更同一个状态</li>
</ul>
<p>每个vuex应用的核心是store仓库。存储应用的状态。</p>
<ul>
<li><p>vuex的状态存储是响应式的</p>
</li>
<li><p>不能直接更改store中的状态，必须显式的提交comit mutation</p>
</li>
</ul>
<h4 id="核心概念"><a href="#核心概念" class="headerlink" title="核心概念"></a>核心概念</h4><ul>
<li>state： vuex管理的状态对象，唯一数据源；Vuex 的状态存储是响应式的</li>
<li>getters：从 store 中的 state 中派生出一些状态，包含返回数据的函数。Getter 接受 state 作为其第一个参数。</li>
<li>mutations：改 Vuex 的 store 中的状态的唯一方法是提交 mutation。Vuex 中的 mutation 非常类似于事件：每个 mutation 都有一个字符串的 <strong>事件类型 (type)</strong> 和 一个 **回调函数 (handler)**。这个回调函数就是我们实际进行状态更改的地方，并且它会接受 state 作为第一个参数：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">mutations: &#123;</span><br><span class="line">  increment (state, n) &#123;</span><br><span class="line">    state.count += n</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">store.commit(<span class="string">&#x27;increment&#x27;</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//  在组件中使用</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapMutations &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    ...mapMutations([</span><br><span class="line">      <span class="string">&#x27;increment&#x27;</span>, <span class="comment">// 将 `this.increment()` 映射为 `this.$store.commit(&#x27;increment&#x27;)`</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// `mapMutations` 也支持载荷：</span></span><br><span class="line">      <span class="string">&#x27;incrementBy&#x27;</span> <span class="comment">// 将 `this.incrementBy(amount)` 映射为 `this.$store.commit(&#x27;incrementBy&#x27;, amount)`</span></span><br><span class="line">    ]),</span><br><span class="line">    ...mapMutations(&#123;</span><br><span class="line">      add: <span class="string">&#x27;increment&#x27;</span> <span class="comment">// 将 `this.add()` 映射为 `this.$store.commit(&#x27;increment&#x27;)`</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用常量替代 Mutation 事件类型</p>
<p>mutation必须是同步函数</p>
<ul>
<li>actions：类似于mutation，不同的是<ul>
<li>action提交的是mutation，而不是直接修改状态</li>
<li>action可以包含任意异步操作</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">actions: &#123;</span><br><span class="line">    increment (context) &#123;</span><br><span class="line">      context.commit(<span class="string">&#x27;increment&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    incrementAsync (&#123; commit &#125;) &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        commit(<span class="string">&#x27;increment&#x27;</span>)</span><br><span class="line">      &#125;, <span class="number">1000</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">// 分发action</span></span><br><span class="line"><span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;increment&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//  在组件中使用</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapActions &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    ...mapActions([</span><br><span class="line">      <span class="string">&#x27;increment&#x27;</span>, <span class="comment">// 将 `this.increment()` 映射为 `this.$store.dispatch(&#x27;increment&#x27;)`</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// `mapActions` 也支持载荷：</span></span><br><span class="line">      <span class="string">&#x27;incrementBy&#x27;</span> <span class="comment">// 将 `this.incrementBy(amount)` 映射为 `this.$store.dispatch(&#x27;incrementBy&#x27;, amount)`</span></span><br><span class="line">    ]),</span><br><span class="line">    ...mapActions(&#123;</span><br><span class="line">      add: <span class="string">&#x27;increment&#x27;</span> <span class="comment">// 将 `this.add()` 映射为 `this.$store.dispatch(&#x27;increment&#x27;)`</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Module:模块</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> moduleA = &#123;</span><br><span class="line">  state: <span class="function">() =&gt;</span> (&#123; ... &#125;),</span><br><span class="line">  mutations: &#123; ... &#125;,</span><br><span class="line">  actions: &#123; ... &#125;,</span><br><span class="line">  getters: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> moduleB = &#123;</span><br><span class="line">  state: <span class="function">() =&gt;</span> (&#123; ... &#125;),</span><br><span class="line">  mutations: &#123; ... &#125;,</span><br><span class="line">  actions: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  modules: &#123;</span><br><span class="line">    a: moduleA,</span><br><span class="line">    b: moduleB</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">store.state.a <span class="comment">// -&gt; moduleA 的状态</span></span><br><span class="line">store.state.b <span class="comment">// -&gt; moduleB 的状态</span></span><br></pre></td></tr></table></figure>
<p><img src="/ZJY.github.io/images/vuex.png" alt="vuex"></p>
<h3 id="栈Stack和堆Heap的区别？"><a href="#栈Stack和堆Heap的区别？" class="headerlink" title="栈Stack和堆Heap的区别？"></a>栈Stack和堆Heap的区别？</h3><ul>
<li>存储方式：<ul>
<li>栈：线性数据结构，采用先进后出的原则。基本数据类型和引用数据类型的值存储在栈中</li>
<li>堆：用于动态分配内存的内存池，采用哈希表的数据结构。引用数据类型（数组、对象、函数）的实际值存储在堆中，栈中存储的是是该对象的引用。</li>
</ul>
</li>
<li>内存管理：<ul>
<li>栈：内存管理是自动的，通过栈指针的上移和下移来自动分配内存和释放内存。</li>
<li>堆：堆的内存需要程序员手动释放和分配。js中通过垃圾回收器来回收不再使用的对象的内存</li>
</ul>
</li>
<li>大小：<ul>
<li>栈：大小是固定的，在程序编译阶段就能确定</li>
<li>堆：大小是动态变化的，需要在运行阶段根据需求动态调整</li>
</ul>
</li>
<li>生命周期<ul>
<li>栈：具有短暂的生命周期，在函数或代码块执行完毕就释放内存</li>
<li>堆：具有较长的生命周期，需要手动释放，否则容易内存泄露</li>
</ul>
</li>
</ul>
<h3 id="js原型链"><a href="#js原型链" class="headerlink" title="js原型链"></a>js原型链</h3><p>所有对象都是通过new 函数创建的，包括let obj = {}</p>
<p>函数是通过new Function创建的对象</p>
<p>每个函数都有一个属性prototype,叫做原型，prototype也是个对象，所以也叫原型对象。</p>
<p>原型的作用：</p>
<ul>
<li>1、存放属性和方法共享给实例对象</li>
<li>2、在js中通过原型实现继承</li>
</ul>
<p>每个对象都有一个  <code>__proto__</code>  属性，指向它构造函数的原型对象。</p>
<p>原型链：</p>
<p>对象都有<code>__proto__</code>属性，指向他的构造函数的原型对象，原型对象也是原型，也有<code>__proto__</code>属性，指向它的构造函数的原型，这样一层一层形成的链式结构称为原型链，顶层为null。</p>
<p>prototype 原型对象：</p>
<ul>
<li>是函数的一个属性</li>
<li>是一个对象</li>
<li>创建函数后自动拥有的一个属性</li>
</ul>
<p><code>__proto__</code>隐式原型：</p>
<ul>
<li>对象的一个属性</li>
<li>实例的<code>__proto__</code>属性指向它构造函数的prototype</li>
</ul>
<p>constructor:</p>
<ul>
<li>对象的一个属性</li>
<li>指向创建该实例对象的构造函数</li>
<li>除了 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object#null_%E5%8E%9F%E5%9E%8B%E5%AF%B9%E8%B1%A1"><code>null</code> 原型对象</a>之外，任何对象都会在其 <code>[[Prototype]]</code> 上有一个 <code>constructor</code> 属性</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testFun</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> testFun()</span><br><span class="line">obj.__proto__ === testFun.prototype <span class="comment">// true</span></span><br><span class="line">testFun.prototype.__proto__ === <span class="built_in">Object</span>.prototype <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.__proto__ === <span class="literal">null</span> <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">obj.constructor === testFun</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line">obj.__proto__ === testFun.prototype</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line">obj.__proto__ === obj.constructor.prototype</span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>对象有的属性：</p>
<ul>
<li><code>__proto__</code></li>
<li>constructor</li>
</ul>
<p>函数有的属性(也是对象)：</p>
<ul>
<li><code>__proto__</code>(作为对象)</li>
<li>constructor(作为对象)</li>
<li>prototype(作为函数)</li>
</ul>
<p>[[Prototype]]和<code>__proto__</code>:</p>
<p><code>__proto__</code> 属性是 <code>Object.prototype</code> 上一个简单的访问器属性，由 getter 和 setter 函数组成.</p>
<p><code>__proto__</code> 的 getter 函数暴露了一个对象内部的 <code>[[Prototype]]</code> 的值。对于使用对象字面量创建的对象，该值是 <code>Object.prototype</code>。对于使用数组字面量创建的对象，该值是 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array"><code>Array.prototype</code></a>。对于函数，该值是 <code>Function.prototype</code>.</p>
<p><code>__proto__</code> 的 setter 允许修改一个对象的 <code>[[Prototype]]</code>。提供的值必须是一个对象或 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/null"><code>null</code></a>。提供任何其他值都不会产生任何作用</p>
<h3 id="Ajax、xhr、fetch、axios、promise、jQuery的区别？"><a href="#Ajax、xhr、fetch、axios、promise、jQuery的区别？" class="headerlink" title="Ajax、xhr、fetch、axios、promise、jQuery的区别？"></a>Ajax、xhr、fetch、axios、promise、jQuery的区别？</h3><p>XHR（XMLHttpRequest）：XHR是一种用于发送HTTP请求和接收服务器响应的API，支持异步</p>
<p>Ajax：Ajax（Asynchronous JavaScript and XML）是一种基于XHR的技术。用于在不刷新页面的情况下实现异步数据交互。</p>
<p>fetch：是现代浏览器原生提供的API，用于进行网络请求。它返回Promise对象。</p>
<p>axios：第三方封装库，Axios是一个基于Promise的HTTP客户端，用于浏览器和Node.js</p>
<p>jQuery：JavaScript库，简化了DOM操作和事件处理，也包括Ajax方法。</p>
<p>promise：提供了更结构化的异步代码，使得回调地狱（callback hell）问题得以解决，提高了可读性。</p>
<p>———————————————-这里是分割线———————————————-</p>
<p>元素垂直水平居中：父元素设置display: flex;子元素设置margin:auto</p>
<p>padding和margin区别？padding作用于自身，margin作用于外部元素间距</p>
<p>vw和百分比？vw是可视窗口的width，百分比相对于包含块计算，元素的位置和尺寸由包含块决定，默认是最近祖先块元素的内容区域，width\top\bottom百分比值由包含块的width决定，height\left\right\margin\padding百分比值由包含块的height决定;</p>
<h3 id="内联元素和块级元素？"><a href="#内联元素和块级元素？" class="headerlink" title="内联元素和块级元素？"></a>内联元素和块级元素？</h3><ul>
<li>块级元素：block，在正常的流中块级元素前后另起一个新行，从上到下排列;可包含行内元素和其他块级元素；块级元素有：h1-h6, article, div, p, footer, table, audio, video, ul, dd, from, canvas等；可设置width, height, padding, margin值</li>
<li>内联元素：inline，不以新行开始，从左到右排列可包含数据和其他行内元素，行内元素有：b, big, i, small, tt, abbr, acronym, cite, code, dfn, em, kbd, strong, samp, var, a, bdo, br, img, map, object, q, script, span, sub, sup, button, input, label, select, textarea；可设置padding，margin-left/right值，不可设置width, height, margin-top/bottom</li>
</ul>
<p>如何让浏览器支持小于12px字体？缩放：transform: scale(0.5); transform-origin:left top;</p>
<h3 id="浅拷贝和深拷贝？"><a href="#浅拷贝和深拷贝？" class="headerlink" title="浅拷贝和深拷贝？"></a>浅拷贝和深拷贝？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 赋值</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">4</span></span><br><span class="line"><span class="keyword">let</span> b = a</span><br><span class="line">a = <span class="number">5</span></span><br><span class="line"><span class="built_in">console</span>.log(a, b) <span class="comment">// 5 4</span></span><br><span class="line"><span class="comment">// 解构赋值：一维数组和对象是深拷贝，多维是浅拷贝</span></span><br><span class="line"><span class="keyword">let</span> arr = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]]</span><br><span class="line"><span class="keyword">let</span> arr1 = [...arr]</span><br><span class="line">arr1[<span class="number">0</span>].push(<span class="number">7</span>) <span class="comment">// 浅拷贝</span></span><br><span class="line"><span class="comment">// Object.assign(obj1, obj2) // 浅拷贝</span></span><br><span class="line"><span class="comment">// 深拷贝</span></span><br><span class="line"><span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(obj)) <span class="comment">//不能处理undefined、函数、symbol、Date、NaN等值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 递归-深拷贝</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepClone</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> value !== <span class="string">&#x27;object&#x27;</span> || value === <span class="literal">null</span>) <span class="keyword">return</span> value</span><br><span class="line">  <span class="keyword">let</span> obj = <span class="built_in">Array</span>.isArray(value) ? [] : &#123;&#125;</span><br><span class="line">  <span class="built_in">Object</span>.setPrototypeOf(obj, <span class="built_in">Object</span>.getPrototypeOf(value)) <span class="comment">// 原型统一</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> value) &#123;</span><br><span class="line">    <span class="keyword">if</span> (value.hasOwnProperty(key)) &#123;</span><br><span class="line">      <span class="comment">// obj[key] = value[key] // 浅拷贝</span></span><br><span class="line">      obj[key] = deepClone(value[key])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="性能优化？"><a href="#性能优化？" class="headerlink" title="性能优化？"></a>性能优化？</h3><ul>
<li>加载：<ul>
<li>1、减少http请求（精灵图，文件合并）</li>
<li>2、减少文件大小（资源压缩，图片压缩、代码压缩）</li>
<li>3、CDN（第三方库，大文件，大图放第三方）</li>
<li>4、SSR服务端渲染、预渲染</li>
<li>5、懒加载</li>
<li>6、分包（小程序，加快主页加载速度）</li>
</ul>
</li>
<li>减少DOM操作，避免回流重绘，使用文档碎片</li>
</ul>
<h3 id="while循环快还是for循环快？"><a href="#while循环快还是for循环快？" class="headerlink" title="while循环快还是for循环快？"></a>while循环快还是for循环快？</h3><p>for循环比while循环执行速度快。这是因为for循环在内部执行代码块时自增计数器；而while循环需要手动进行边界检查和变量i的自增操作。</p>
<h3 id="css层叠规则？"><a href="#css层叠规则？" class="headerlink" title="css层叠规则？"></a>css层叠规则？</h3><ul>
<li>比较优先级</li>
<li>比较特殊性，权重，四位，前一位相同比较下一位：<ul>
<li>内联样式为1，否则为0</li>
<li>所属元素选择器id个数，一个为1，100个为100</li>
<li>所属元素选择器的类选择器+伪类选择器+属性选择器的个数</li>
<li>所属元素选择器的元素选择器+伪元素选择器的个数</li>
</ul>
</li>
<li>比较源次序，出现在代码中的次序，后面覆盖前面</li>
</ul>
<h3 id="页面上隐藏元素方法？"><a href="#页面上隐藏元素方法？" class="headerlink" title="页面上隐藏元素方法？"></a>页面上隐藏元素方法？</h3><ul>
<li>不占位<ul>
<li>给元素设置hidden属性</li>
<li>display: none;</li>
<li>width: 0;height: 0;transform: scale(0);但是有些元素设置border宽度会占据空间</li>
<li>width: 0;height: 0;overflow: hidden;但是有些元素设置border宽度会占据空间</li>
<li>position: absolute; left/margin-left: -100%;脱离文档流</li>
<li>position: absolute; z-index: -1;脱离文档流,后面元素覆盖该元素，如果后面元素小可能会覆盖不完全</li>
<li>font-size: 0;仅对文本内容有效</li>
</ul>
</li>
<li>占位<ul>
<li>opacity: 0;</li>
<li>filter: opacity(0);</li>
<li>visibility: hidden;</li>
</ul>
</li>
</ul>
<h3 id="元素水平垂直居中？"><a href="#元素水平垂直居中？" class="headerlink" title="元素水平垂直居中？"></a>元素水平垂直居中？</h3><ul>
<li>定位+margin: 已知被水平垂直居中元素宽高，父相对定位，子绝对定位+top:50%+left:50%+margin: -1/2w 0 0 -1/2h;</li>
<li>定位+transform:未知居中元素宽高，父相对定位，子绝对定位+top:50%+left:50%+transform: translate(-50%, -50%)</li>
<li>定位+margin:auto:未知居中元素宽高，父相对定位，子绝对定位+top/left/right/bottom:0+margin: auto;</li>
<li>flex: 父元素设置display:flex;aligin-items:center;justify-content:center;</li>
<li>Flex/grid+margin:auto:父元素display:flex/grid;子元素margin:auto;</li>
</ul>
<h3 id="Css元素选择器有哪些？"><a href="#Css元素选择器有哪些？" class="headerlink" title="Css元素选择器有哪些？"></a>Css元素选择器有哪些？</h3><ul>
<li>通配符选择器*</li>
<li>元素选择器，p, div</li>
<li>id选择器</li>
<li>类选择器</li>
<li>属性选择器: a[class=’test’]</li>
<li>伪类选择器：:before,:active</li>
<li>组合选择器：div + p,h1,h2</li>
</ul>
<p>css三大特性：继承、层叠、优先级</p>
<h3 id="css可以继承的属性？"><a href="#css可以继承的属性？" class="headerlink" title="css可以继承的属性？"></a>css可以继承的属性？</h3><ul>
<li>字体系列的属性：font-size,font-family,font-style,font-weight…</li>
<li>文本系列的属性：text-align,color,line-height,letter-spacing,word-spacing…</li>
<li>元素的可见性：visibility, opacity</li>
<li>表格布局的属性：border-spacing</li>
<li>列表的属性：list-style</li>
<li>光标的属性：cursor</li>
<li>…</li>
</ul>
<h3 id="css预处理器？"><a href="#css预处理器？" class="headerlink" title="css预处理器？"></a>css预处理器？</h3><p>css预处理器是一种语言为css添加一些编程的特性，可以在css中使用变量，函数等功能，使css更加直观简洁。</p>
<p>Sass,less,stylus三种预处理器都有:嵌套，颜色函数，混入，继承，运算符等功能。</p>
<h3 id="JS组成？"><a href="#JS组成？" class="headerlink" title="JS组成？"></a>JS组成？</h3><p>ECMAscript是国际通过的ecma-262标准化的脚本程序设计语言，js是ecmascript的一种实现</p>
<ul>
<li>浏览器中javascript组成：ECMAscript + BOM(浏览器对象模型) + DOM(文档对象模型)</li>
<li>nodejs中的javascript组成：ECMAscript + NPM（包管理系统）+ Native</li>
<li>小程序中的javascript组成：ECMAscript + 小程序框架 + 小程序API</li>
</ul>
<h3 id="js内置对象有哪些？"><a href="#js内置对象有哪些？" class="headerlink" title="js内置对象有哪些？"></a>js内置对象有哪些？</h3><p>String,Number,Boolean,Function,Date,Math,RegExp,Array,Object…</p>
<p>Math.abs(),sqrt(),min();String.concat(),slice(),split(),new Date().getFullYear()…</p>
<h3 id="操作数组的方法？"><a href="#操作数组的方法？" class="headerlink" title="操作数组的方法？"></a>操作数组的方法？</h3><ul>
<li>改变数组本身的方法：copyWithin() fill() push() pop() unshift() shift() sort() reverse() splice()</li>
<li>不改变数组本身的方法：concat() join() slice() indexOf() lastIndexOf() toString()…</li>
<li>迭代/遍历方法：遍历数组每个元素前每个回调函数执行一次，执行回调函数前先缓存数据长度。forEach() map() filter() some() every() reduce() reduceRight() entries() keys() values() find() findIndex()</li>
</ul>
<h3 id="js类型检查方法？"><a href="#js类型检查方法？" class="headerlink" title="js类型检查方法？"></a>js类型检查方法？</h3><ul>
<li>typeof: 可以检测基本数据类型，但不能判断对象，数组和null</li>
<li>instanceof：判断构造函数的prototype属性是否在实例对象的原型链上，可以判断引用数据类型，但不能判断基本数据类型；依赖于原型链，一旦原型链被修改结果并不准确</li>
<li>constructor：返回创建对象的构造函数的引用，可以判断number,string, boolean, object,function, array,但是constructor可以被修改结果也并不准确</li>
<li>Object.prototype.toString.call()返回表示对象的字符串，不依赖于原型链，是一个可靠的类型检查方法，但是对象的Symbol.toStringTag属性的值会改变toString返回字符串的结果。</li>
<li>Array.isArray()判断一个对象是否是数组</li>
</ul>
<h3 id="闭包的理解？"><a href="#闭包的理解？" class="headerlink" title="闭包的理解？"></a>闭包的理解？</h3><p>闭包是由函数以及声明该函数的词法环境组合而成。该环境包含创建闭包时作用域内任何局部变量。</p>
<p>闭包的特点：</p>
<p>1、函数嵌套函数 2、函数内部可以访问外部的参数和变量 3、参数和变量不会被垃圾回收机制回收</p>
<p>闭包是为了设计私有方法和变量。</p>
<p>优点：避免全局变量的污染</p>
<p>缺点：由于保留了作用域链，闭包常驻内存，加大内存消耗，使用不当容易造成内存泄露</p>
<p>解决方法：退出函数前，把不使用的局部变量删除</p>
<h3 id="事件委托？"><a href="#事件委托？" class="headerlink" title="事件委托？"></a>事件委托？</h3><p>又叫事件代理，基于事件冒泡的机制将事件监听添加到父元素上而不是给子元素添加。事件逐层冒泡到父元素被捕获。</p>
<p>事件经历三个阶段：</p>
<p>1、捕获阶段：window对象自上而下到目标对象传播的阶段</p>
<p>2、目标阶段：真正的目标对象正在处理事件的阶段</p>
<p>3、冒泡阶段：目标对象从下到上到window对象传播的阶段</p>
<p>addEventListener(‘eventName’, callback, true/false); 第三个参数，false默认为冒泡，true事件捕获，阻止冒泡，事件委托失效。</p>
<p>优点：</p>
<ul>
<li>减少内存占用，减少事件注册</li>
<li>新增子元素不需要再注册事件</li>
</ul>
<h3 id="基本数据类型和引用数据类型的区别？"><a href="#基本数据类型和引用数据类型的区别？" class="headerlink" title="基本数据类型和引用数据类型的区别？"></a>基本数据类型和引用数据类型的区别？</h3><p>基本数据类型：string, number, boolean, null, undefined, symbol, bigint,值保存在栈内存中</p>
<p>引用数据类型：object, function, array，对象的引用（地址）保存在栈内存中，真实的值保存在堆内存中</p>
<h3 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h3><p>每一个对象都有一个私有属性__proto__指向另一个名为原型prototype的对象。原型对象也有自己的原型，层层向上直到一个原型为null，null没有原型，作为原型链的终止。</p>
<p>每个引用对象都有一个__proto__属性，是一个对象</p>
<p>每个函数都有一个prototype原型属性，是一个对象</p>
<p>每个对象的__proto__指向它构造函数的原型prototype</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let obj &#x3D; &#123;&#125;</span><br><span class="line">obj.__proto__ &#x3D;&#x3D;&#x3D; Object.prototype &#x2F;&#x2F; true</span><br><span class="line">obj.__proto__.constructor &#x3D;&#x3D;&#x3D; Object &#x2F;&#x2F; true</span><br><span class="line">Object.prototype.constructor &#x3D;&#x3D;&#x3D; Object &#x2F;&#x2F; true</span><br></pre></td></tr></table></figure>
<p>每个构造函数都有一个原型属性prototype，该构造函数的实例对象共享原型对象的方法和属性。</p>
<p>当访问对象的属性或方法时，从自身开始查找，如果查找不到则从__proto__隐式原型中即构造函数的原型对象查找，原型的原型查找，这样一层一层的向上查找形成的链式结构叫原型链。</p>
<p>一直往上层查找，直到null还没有找到，返回undefined</p>
<p><code>Object.prototype.__proto__ === null</code></p>
<h3 id="new关键字的操作"><a href="#new关键字的操作" class="headerlink" title="new关键字的操作"></a>new关键字的操作</h3><ul>
<li>创建一个空的对象{}</li>
<li>将新建对象的原型链连接到构造函数的原型对象上(obj._<em>proto</em> = Fn.prototype)</li>
<li>执行构造函数并将构造函数的this绑定到新建对象上（const _this = Fn.apply(obj, args)）</li>
<li>如果构造函数返回一个对象则返回这个对象否则返回新创建的对象；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_new</span>(<span class="params">Fn, ...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line">  obj.__proto__ = Fn.prototype</span><br><span class="line">  <span class="keyword">const</span> _this = Fn.apply(obj, args)</span><br><span class="line">  <span class="keyword">return</span> _this <span class="keyword">instanceof</span> <span class="built_in">Object</span> ? _this : obj</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="js如何实现继承的？"><a href="#js如何实现继承的？" class="headerlink" title="js如何实现继承的？"></a>js如何实现继承的？</h3><ul>
<li>1、原型链继承</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = <span class="string">&#x27;parent&#x27;</span></span><br><span class="line">  <span class="built_in">this</span>.play = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">&#125;</span><br><span class="line">Parent.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.name</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.type = <span class="string">&#x27;child&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">Child.prototype = <span class="keyword">new</span> Parent() <span class="comment">// 继承了Parent，通过原型</span></span><br><span class="line"><span class="keyword">var</span> child1 = <span class="keyword">new</span> Child()</span><br><span class="line">child1.play.push(<span class="number">4</span>)</span><br><span class="line"><span class="built_in">console</span>.log(child1.play) <span class="comment">// [1,2,3,4]</span></span><br><span class="line"><span class="built_in">console</span>.log(child1.getName()) <span class="comment">// parent</span></span><br><span class="line"><span class="keyword">var</span> child2 = <span class="keyword">new</span> Child()</span><br><span class="line"><span class="built_in">console</span>.log(child2.play) <span class="comment">// [1,2,3,4]</span></span><br><span class="line"><span class="built_in">console</span>.log(child2.getName()) <span class="comment">// parent</span></span><br></pre></td></tr></table></figure>
<p>原型链继承的方式，如果子类实例修改了原型上的属性那么所有子类实例都会被影响。</p>
<ul>
<li>2、借用构造函数继承（借用父类的构造函数继承父类的属性）</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = <span class="string">&#x27;parent&#x27;</span></span><br><span class="line">  <span class="built_in">this</span>.play = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  Parent.call(<span class="built_in">this</span>) <span class="comment">// 继承Parent的属性</span></span><br><span class="line">  <span class="built_in">this</span>.type = <span class="string">&#x27;child&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> child1 = <span class="keyword">new</span> Child()</span><br><span class="line">child1.play.push(<span class="number">4</span>)</span><br><span class="line"><span class="built_in">console</span>.log(child1.play) <span class="comment">// [1, 2, 3, 4]</span></span><br><span class="line"><span class="built_in">console</span>.log(child1.name) <span class="comment">// parent</span></span><br><span class="line"><span class="keyword">var</span> child2 = <span class="keyword">new</span> Child()</span><br><span class="line"><span class="built_in">console</span>.log(child2.play) <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure>
<p>这种方式解决了原型链继承中子类实例修改原型上的属性影响所有实例的问题。但是父类的方法，每个子类实例都需要重新创建一份</p>
<ul>
<li>3、组合继承（原型链+借用构造函数）</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = <span class="string">&#x27;parent&#x27;</span></span><br><span class="line">  <span class="built_in">this</span>.play = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">&#125;</span><br><span class="line">Parent.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.name</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  Parent.call(<span class="built_in">this</span>) <span class="comment">// 继承Parent的属性</span></span><br><span class="line">  <span class="built_in">this</span>.type = <span class="string">&#x27;child&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">Child.prototype = <span class="keyword">new</span> Parent() <span class="comment">// 继承Parent的方法</span></span><br><span class="line">Child.prototype.constructor = Child <span class="comment">// 修正构造函数指向</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> child1 = <span class="keyword">new</span> Child()</span><br><span class="line">child1.play.push(<span class="number">4</span>)</span><br><span class="line"><span class="built_in">console</span>.log(child1.play) <span class="comment">// [1, 2, 3, 4]</span></span><br><span class="line"><span class="built_in">console</span>.log(child1.getName()) <span class="comment">// parent</span></span><br><span class="line"><span class="keyword">var</span> child2 = <span class="keyword">new</span> Child()</span><br><span class="line"><span class="built_in">console</span>.log(child2.play) <span class="comment">// [1, 2, 3]</span></span><br><span class="line"><span class="built_in">console</span>.log(child2.getName()) <span class="comment">// parent</span></span><br></pre></td></tr></table></figure>
<p>这种方式既解决了原型链继承中子类实例修改原型属性影响所有实例的问题，又解决了借用构造函数继承中子类实例无法继承父类的方法的问题。</p>
<ul>
<li>4、Es6 class通过extends实现继承</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = <span class="string">&#x27;parent&#x27;</span></span><br><span class="line">    <span class="built_in">this</span>.play = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">getName</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span> <span class="keyword">extends</span> <span class="title">Parent</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>() <span class="comment">// 调用父类的构造函数</span></span><br><span class="line">    <span class="built_in">this</span>.type = <span class="string">&#x27;child&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> child1 = <span class="keyword">new</span> Child()</span><br><span class="line">child1.play.push(<span class="number">4</span>)</span><br><span class="line"><span class="built_in">console</span>.log(child1.getName()) <span class="comment">// Parent</span></span><br><span class="line"><span class="built_in">console</span>.log(child1.play) <span class="comment">// [1, 2, 3, 4]</span></span><br><span class="line"><span class="keyword">var</span> child2 = <span class="keyword">new</span> Child()</span><br><span class="line"><span class="built_in">console</span>.log(child2.play) <span class="comment">// [1, 2, 3]</span></span><br><span class="line"><span class="built_in">console</span>.log(child2.getName()) <span class="comment">// Parent</span></span><br></pre></td></tr></table></figure>
<p>这种方式的实现原理其实是基于原型链继承和借用构造函数继承的组合，拥有这两种方式的特点。</p>
<h3 id="js设计原理"><a href="#js设计原理" class="headerlink" title="js设计原理"></a>js设计原理</h3><ul>
<li>解释型语言：不需要编译，运行时解析和和执行代码</li>
<li>动态类型：变量类型在运行时确定</li>
<li>单线程和异步编程：单线程是异步的原因；事件循环是实现异步的一种方式；回调是处理异步操作的关键</li>
<li>垃圾回收机制：为了防止内存泄露，内置垃圾回收机制。定期寻找不再使用的变量，并释放他们占用的内存。</li>
</ul>
<h3 id="js中的this指向"><a href="#js中的this指向" class="headerlink" title="js中的this指向"></a>js中的this指向</h3><ul>
<li>在方法中使用，this表示该方法所属的对象</li>
<li>在全局中使用，this指window对象（浏览器环境）</li>
<li>在函数中使用，this指window对象（浏览器环境）</li>
<li>在函数中使用，严格模式下，this为undefined</li>
<li>在事件监听器中使用，this指接收事件的元素</li>
<li>显式绑定：可以使用<code>call</code>、<code>apply</code>或<code>bind</code>方法来显式地设置<code>this</code>的值</li>
<li>构造函数调用：new Person()…Person作为构造函数，this指向新创建的实例对象</li>
<li>箭头函数中的this：箭头函数没有this，在定义的时候就确定了，如果外层函数有this，就是外层函数的this，否则就是window</li>
<li>匿名函数中的this：this的值取决于它是如何被调用的。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 作为普通函数被调用，this指向全局window对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">  <span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>);  </span><br><span class="line">  &#125;;  </span><br><span class="line">  func(); <span class="comment">// this 指向全局对象，通常是 window  </span></span><br><span class="line">&#125;  </span><br><span class="line">example();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 作为某个对象的方法被调用，this指向那个对象</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;  </span><br><span class="line">  prop: <span class="string">&#x27;Hello&#x27;</span>,  </span><br><span class="line">  method: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.prop); <span class="comment">// this 指向 obj  </span></span><br><span class="line">    &#125;)();  </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;;  </span><br><span class="line">  </span><br><span class="line">obj.method(); <span class="comment">// 输出 &quot;Hello&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 当使用call apply bind显示设置this时，指向设置的对象</span></span><br><span class="line"><span class="keyword">var</span> value = <span class="string">&#x27;global&#x27;</span>;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">var</span> obj = &#123;  </span><br><span class="line">  value: <span class="string">&#x27;local&#x27;</span>  </span><br><span class="line">&#125;;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.value);  </span><br><span class="line">&#125;;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// 使用 call 方法调用匿名函数，并将 this 显式地绑定到 obj  </span></span><br><span class="line">func.call(obj); <span class="comment">// 输出 &quot;local&quot;</span></span><br></pre></td></tr></table></figure>
<p>匿名函数中的<code>this</code>值取决于它是如何被调用的，而不是它是否是一个匿名函数</p>
<h3 id="script标签的加载和执行"><a href="#script标签的加载和执行" class="headerlink" title="script标签的加载和执行"></a>script标签的加载和执行</h3><p>同步脚本：浏览器遇到script标签先暂停页面解析，加载完成后执行脚本，继续页面解析渲染；同步脚本会阻塞页面的解析</p>
<p>把脚本放在head标签里，会等待脚本下载，执行，然后继续后续解析，浏览器在遇到body标签之前不会渲染页面任何部分，造成页面空白且无法进行交互，体验非常不好。推荐将script标签放在body结束标签的前面。</p>
<p>浏览器允许并行下载js资源，但是script标签的下载仍要阻塞其他资源的下载，如图片，样式表。</p>
<p>非阻塞脚本：defer</p>
<p>当解析到带有defer属性的script标签时，会立即下载此js文件，等到页面解析完成后执行js脚本，只针对外部js脚本，严格按照出现顺序执行。脚本加载不阻塞页面解析</p>
<p>异步脚本：async</p>
<p>当解析到带有async属性的script标签时，会立即下载此js文件，下载完成后立即执行，执行完成后继续文档解析，只针对外部脚本，因为加载完成后立即执行所以执行脚本顺序不确定。脚本加载不阻塞页面解析</p>
<p>动态创建script标签：监听window的load事件执行回调（创建script标签并插入body）</p>
<h3 id="DOMContentLoaded和load事件"><a href="#DOMContentLoaded和load事件" class="headerlink" title="DOMContentLoaded和load事件"></a>DOMContentLoaded和load事件</h3><ul>
<li>DOMContentLoaded：当初始的文档被解析和加载完成后就触发该事件，而无需等待其他资源比如样式表、图像、子框架的完全加载</li>
<li>load：当文档和所依赖的资源比如样式表、图像都加载完成后触发该事件</li>
<li>区别：DOMContentLoaded是HTML文档被解析完成后触发，load在HTML文档及其相关资源都加载完后触发</li>
</ul>
<h3 id="setTimeout和setInterval最小执行时间？"><a href="#setTimeout和setInterval最小执行时间？" class="headerlink" title="setTimeout和setInterval最小执行时间？"></a>setTimeout和<code>setInterval</code>最小执行时间？</h3><p>根据HTML5标准，<code>setTimeout</code>的最小执行时间是<strong>4毫秒</strong>，而<code>setInterval</code>的最小执行时间是<strong>10毫秒</strong>。这意味着，如果你尝试设置一个少于这些时间间隔的延迟，浏览器会自动调整它以达到这个最小时间间隔</p>
<p>这些间隔受操作系统和浏览器等其他因素的影响。</p>
<h3 id="ES6和ES5的区别？"><a href="#ES6和ES5的区别？" class="headerlink" title="ES6和ES5的区别？"></a>ES6和ES5的区别？</h3><p>js：ECMAscript + BOM + DOM</p>
<p>ES5: ECMAscript5，ECMAscript的第五次修订，2009</p>
<p>ES6: ECMAscript6，ECMAscript的第六次修订，2015</p>
<h3 id="ES6新增哪些特性？"><a href="#ES6新增哪些特性？" class="headerlink" title="ES6新增哪些特性？"></a>ES6新增哪些特性？</h3><ul>
<li>1、新增let 和const关键字提供块级作用域</li>
<li>2、新增类class关键字实现继承</li>
<li>3、新增模块化：import和export实现模块化</li>
<li>4、新增箭头函数</li>
<li>5、新增函数参数默认值和剩余参数</li>
<li>6、新增对象和数组的解构赋值</li>
<li>7、新增对象和数组的扩展运算符</li>
<li>8、新增模版字符串``</li>
<li>9、新增Promise异步编程方案，使得异步可以像同步操作一样进行链式调用解决回调地狱问题</li>
<li>10、新增Symbol原始数据类型，代表独一无二的值</li>
<li>11、新增字符和数组的方法：如<code>Array.prototype.includes</code>，<code>String.prototype.startsWith</code>，<code>String.prototype.endsWith</code>等。</li>
<li>12、新增新的集合类型：如map, set, WeakMap, WeakSet</li>
<li>13、迭代器和生成器：引入interato接口和for…of循环，以及Generator函数</li>
</ul>
<h3 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h3><p>箭头函数提供了一种更简洁的函数书写方式，是匿名函数。当需要维护this上下文的时候使用箭头函数。</p>
<p>箭头函数没有this绑定，使用外层作用域的this绑定即外层函数的this对象。</p>
<p>箭头函数没有this、super、arguments和new.target绑定，不可以作为构造函数。</p>
<p>不可以使用call\apply\bind改变this的指向。</p>
<h3 id="call-apply-bind三者区别？"><a href="#call-apply-bind三者区别？" class="headerlink" title="call apply bind三者区别？"></a>call apply bind三者区别？</h3><p>都是用来改变this指向和函数的调用，第一个参数都是要调用的函数对象即函数体内的this值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Fun.call(obj, arg1, arg2)</span><br><span class="line">Fun.apply(obj, [arg1, arg2])</span><br><span class="line">Fun.bind(obj)(arg1, arg2) <span class="comment">// bind不能直接调用，返回一个函数后再调用</span></span><br><span class="line">Fun.bind(obj, arg1, arg2)()</span><br></pre></td></tr></table></figure>
<p>call参数传递参数列表，apply传参是数组，bind返回一个函数再调用，传参和call方法一样</p>
<h3 id="递归遇到的问题？"><a href="#递归遇到的问题？" class="headerlink" title="递归遇到的问题？"></a>递归遇到的问题？</h3><p>递归的本质是函数调用自身来解决问题。</p>
<p>递归每次调用都会在函数调用栈新增一个层级，函数调用栈是有大小限制的，调用栈层级过深，可能会超出栈的大小限制导致栈溢出错误。如果不设置递归终止条件会导致无限递归陷入死循环消耗资源。</p>
<h3 id="ajax是什么？"><a href="#ajax是什么？" class="headerlink" title="ajax是什么？"></a>ajax是什么？</h3><p>ajax是基于XHR的一种技术，用来无需刷新页面异步获取数据并更新页面</p>
<p>xhr是用来发送http请求和接收服务器响应的api，支持异步</p>
<p>1、创建xhr对象，let xhr = new XmlHttpRequest()</p>
<p>2、调用xhr对象的open方法与服务器建立连接</p>
<p>3、调用xhr对象的send方法发送请求给服务器</p>
<p>4、监听对象的onreadystate change事件监听服务器与客户端的通信状态</p>
<p>5、接收并处理服务器响应的数据</p>
<p>6、将数据更新到页面上</p>
<h3 id="get和post"><a href="#get和post" class="headerlink" title="get和post"></a>get和post</h3><p>get和post是http协议中两种请求方式。在功能和使用上有些区别：</p>
<p>1、URL可见性：GET请求的参数通过URL传递，在地址栏可见；POST请求的参数在http请求体中，不可见</p>
<p>2、传输数据的大小限制：GET请求的数据大小是有限制的，取决于URL的最大长度，这个长度由浏览器和服务器决定，通常是2048个字符；POST请求对数据大小没有限制。</p>
<p>3、安全性：由于GET请求参数在URL中，会被浏览器缓存、记录在历史记录中，或者被服务器、代理服务器、或用户代理记录到日志文件，因此安全性低；POST请求参数不可见，因此安全性高</p>
<p>4、编码方式：GET请求只支持URL编码，POST请求支持多种编码方式</p>
<p>5、缓存：GET请求是可以被缓存的，如果相同的请求被发送，浏览器可能从缓存中读取数据而不像服务器发送请求。POST请求不会被缓存</p>
<p>6、历史记录：GET请求可以被缓存到浏览器历史记录，而post请求不会。</p>
<p>7、用途：GET请求通常用来查找或获取数据，而post请求用来提交数据，修改或建立新的资源。</p>
<h3 id="Promise的内部原理是什么？"><a href="#Promise的内部原理是什么？" class="headerlink" title="Promise的内部原理是什么？"></a>Promise的内部原理是什么？</h3><p>Promise的内部实现原理主要依赖于状态机和事件循环机制。</p>
<p>Promise有三种状态：pending（进行中）、fulfilled（已成功）、rejected（已失败）。初始状态为pending，并且状态只能从pending转变为fulfilled或rejected，一旦转变就不能再改变。Promise的构造函数接受一个执行器函数作为参数，这个执行器函数内部包含异步操作。执行器函数有两个参数，分别是resolve和reject。当异步操作成功时，调用resolve函数将Promise状态转变为fulfilled；当异步操作失败时，调用reject函数将Promise状态转变为rejected。</p>
<p>在Promise内部使用了一个叫做thenable的对象用来管理回调函数。当Promise状态转变为fulfilled或rejected时，会依次执行thenable对象中的回调函数。thenable对象具有一个叫做value的属性，用来存储异步操作的结果。</p>
<p>Promise还有一个核心方法叫做then，用于注册回调函数。then方法接受两个参数，分别是成功回调函数和失败回调函数。当Promise状态已经是fulfilled时，会直接调用成功回调函数，并将value作为参数传入；当Promise状态已经是rejected时，会直接调用失败回调函数，并将value作为参数传入。如果then方法在Promise状态还是pending时被调用，则会将成功回调函数和失败回调函数分别放入thenable对象的回调数组中，待Promise状态转变时再执行。</p>
<p>在使用Promise时，可以通过链式调用多个then方法，这样可以方便地处理多个异步操作，并保持代码的可读性。在链式调用中，前一个then方法返回的是一个新的Promise对象，后一个then方法中的回调函数会作为这个新Promise对象的回调函数注册。</p>
<p>总的来说，Promise内部原理主要是通过状态机来管理异步操作的状态，并使用thenable对象和then方法来处理异步操作的结果。这种机制使得Promise能够方便地处理异步操作，提高代码的可读性和可维护性。</p>
<p>缺点：</p>
<ol>
<li><strong>无法取消Promise</strong>：一旦Promise对象被创建并已经开始执行，就无法中途取消。这可能会在一些需要取消异步操作的情况下造成问题。</li>
<li><strong>错误处理需要显式调用</strong>：如果Promise对象内部抛出了错误，但没有设置<code>.catch</code>方法或<code>reject</code>的回调函数，那么这个错误不会被捕获，也不会抛出到外部，这可能会导致一些问题。</li>
<li><strong>无法获知进展</strong>：Promise对象只有三种状态：pending、fulfilled、rejected，无法获知异步操作的进展信息（比如完成了多少百分比）。如果需要获知进展，可能需要使用其他方式（比如使用Progress对象）。</li>
</ol>
<h3 id="Promise和async-await的区别？"><a href="#Promise和async-await的区别？" class="headerlink" title="Promise和async/await的区别？"></a>Promise和async/await的区别？</h3><p>Promise和async/await都是JavaScript中用于处理异步操作的解决方案，它们有一些相似之处，但也有一些明显的区别。</p>
<ol>
<li><strong>语法差异</strong>：Promise使用then()和catch()方法来处理异步操作的结果和错误，而async/await使用更直观的语法，通过async关键字定义异步函数，并在函数内部使用await关键字等待异步操作完成。这使得异步代码看起来更像同步代码，提高了代码的可读性和可维护性。</li>
<li><strong>错误处理</strong>：Promise通过链式调用的catch()方法来捕获错误，而async/await可以使用try-catch语句来捕获错误。这使得错误处理更加直观和方便。</li>
<li><strong>应用场景</strong>：Promise更适用于一连串的异步请求，而async/await更适合串行的异步请求之间的依赖关系比较复杂或需要控制执行顺序的情况。async/await更适合业务逻辑处理较为复杂的场景。</li>
<li><strong>错误堆栈追踪</strong>：使用Promise时，如果发生错误，堆栈追踪会包含Promise内部的异步操作，这可能会使得定位错误变得更加困难。而使用async/await时，错误堆栈追踪会显示在出错的地方，这更方便调试和定位错误。</li>
</ol>
<p>在一些简单的异步操作中，Promise可能更加简洁和高效；而在需要处理复杂异步逻辑和错误处理的场景中，async/await可能更加适合。</p>
<h3 id="浏览器常用存储方式有哪些？"><a href="#浏览器常用存储方式有哪些？" class="headerlink" title="浏览器常用存储方式有哪些？"></a>浏览器常用存储方式有哪些？</h3><ul>
<li>cookie：由服务器发送并存储在浏览器，并且在同一服务器请求下携带cookies。大小有限通常为4KB，可以通过Expires设置过期时间。通常用来存储用户登录信息、个性化设置等。</li>
<li>localStorage：本地持久化存储，以key-value形式存储字符串数据，大小为5M或更大。除非主动删除否则永久化存储。</li>
<li>sessionStorage：用于本地存储，只保存在当前浏览器会话中，关闭浏览器窗口或标签就会被删除。适用于临时数据存储。</li>
<li>IndexedDB: 基于事务的数据库存储，可以存储大量结构化数据。</li>
<li>WebSQL：使用SOL数据库在浏览器中存储数据（兼容性和性能不好已被indexedDB取代）</li>
</ul>
<p>浏览器中cookie和sessionStorage/localStorage的区别？</p>
<ul>
<li>存储大小：cookie存储大小通常为4KB，sessionStorage/localStorage可以达到5M或更大。</li>
<li>存储位置：cookie存储在浏览器中，sessionStorage/localStorage存储在浏览器内存中，若浏览器设置不保存数据，数据会丢失</li>
<li>有效时间：cookie在设置有效期内都可用，即使关闭浏览器；localStorage除非主动删除永久可用；sessionStorage在当前浏览器会话中可用，浏览器窗口或标签关闭就被删除</li>
<li>数据共享：三者都遵循同源共享数据。cookie和localStorage在同源浏览器窗口数据都共享即使不是同一个页面；sessionStorage只在当前会话当前标签/窗口共享数据。</li>
<li>通信方式：cookie参与服务器通信，sessionStorage/localStorage不会被发送到服务器</li>
<li>生成方式：cookie由服务器生成发送到浏览器，sessionStorage/localStorage由前端创建</li>
</ul>
<h3 id="token存储在哪里？"><a href="#token存储在哪里？" class="headerlink" title="token存储在哪里？"></a>token存储在哪里？</h3><p>token是验证身份的令牌，用户登录成功后服务器根据凭证加密后得倒的字符串。</p>
<ul>
<li>localstorage：持久化存储数据，每次调用接口发送请求将token当作字段传给后台。将Token存储在Local Storage中可能会面临XSS攻击的风险，特别是当项目中引入了很多第三方JS类库时。</li>
<li>sessionStorage：与Local Storage类似，但数据只在当前浏览器会话中有效</li>
<li>cookies：由服务器发送给浏览器，每次浏览器向同一服务器发送请求都会携带cookies，将token存储在cookies可用自动发送但是不能跨域。容易收到csrf攻击。</li>
</ul>
<h3 id="DOM树和渲染树有什么区别？"><a href="#DOM树和渲染树有什么区别？" class="headerlink" title="DOM树和渲染树有什么区别？"></a>DOM树和渲染树有什么区别？</h3><p>DOM树和HTML标签一一对应的，包括head标签和隐藏元素</p>
<p>DOM树和CSSOM树生成渲染树，渲染树和DOM树不一一对应，只包含可见元素，比如display：none元素包含在DOM树但是不在渲染树，比如伪元素不在DOM树但是在渲染树。</p>
<h3 id="JWT"><a href="#JWT" class="headerlink" title="JWT"></a>JWT</h3><p>jwt（Json web token）用于在网络间安全的传输信息。用于认证、授权、信息交换等场景。</p>
<p>JWT由Header（头部）、Payload（负载）、Signature（签名）三部分组成，三者都经过base64转码。</p>
<p>Header头部包含类型和签名算法；Payload负载包含实体（用户）和其他数据的声明；Signature签名：为了验证数据在传输过程中是否被篡改，对头部和负载使用算法进行签名。</p>
<p>JWT的优点：</p>
<ul>
<li>紧凑：非常小巧，可以在URL、HTML表单、HTTP头中使用</li>
<li>自包含：包含有关用户、签发者等必要信息，不需要从服务器多次查询</li>
</ul>
<p>JWT的缺点：</p>
<ul>
<li>无法撤销：JWT一经签发不能被更改和撤销，在过期之前即使被窃取都可使用</li>
<li>增加服务器的负载：因为JWT中信息需要被解码和验证会增加服务器的负载</li>
</ul>
<p>JWT通常通过sessionStorage\localStorage\cookies存储在浏览器。</p>
<p>jwt认证流程：</p>
<p>1、客户端把账号密码发送给后端接口</p>
<p>2、服务端核对成功后把用户信息等作为负载，然后把头部和负载分别进行base64编码后进行签名，形成一个jwt</p>
<p>3、客户端每次发送请求http请求头携带jwt（Authorization）</p>
<p>4、服务端验证jwt的有效性</p>
<p>5、验证通过后使用jwt中的用户信息进行操作返回结果</p>
<h3 id="精灵图和base64区别？"><a href="#精灵图和base64区别？" class="headerlink" title="精灵图和base64区别？"></a>精灵图和base64区别？</h3><p>精灵图：将多张小图整合到一张大图上，通过定位将小图展示到页面上，多次访问可以减少请求，提高加载速度</p>
<p>Base64图：将图像数据编码为base64字符串的形式。</p>
<p>base64优点：</p>
<ul>
<li>减少http请求次数：图像直接嵌入网页不再发送图片请求，减少http请求次数提高加载速度</li>
<li>避免跨域问题：图片跟随网页下载，避免了跨域</li>
</ul>
<p>缺点：</p>
<ul>
<li>增加css文件大小：如果使用大量base64图片会增加css文件大小，影响加载速度</li>
<li>增加css解析时间：base64编码较长，增加css解析时间，影响网页性能</li>
<li>浏览器兼容性：老版本浏览器不支持base64格式的图片</li>
</ul>
<h3 id="SVG"><a href="#SVG" class="headerlink" title="SVG"></a>SVG</h3><p>svg是基于XML语法的图像格式，全称可缩放矢量图。不同于png等基于像素的位图，svg基于矢量数据描述图像内容。</p>
<p>可无损放大和缩小图片，保持图片的清晰度；svg基于文本可以被编辑和修改；兼容性好，可以同页面元素一样与js和css进行交互。</p>
<h3 id="npm的底层环境是什么？"><a href="#npm的底层环境是什么？" class="headerlink" title="npm的底层环境是什么？"></a>npm的底层环境是什么？</h3><p>Node Package Manager，node的包管理和分发工具，已经称为分发node模块的标准，是js 的运行环境。</p>
<p>npm允许开发者从注册表（一个公共的存储库）中安装、更新和管理nodejs所需的库和工具，这些库和工具称为包</p>
<p>npm组成：网站、注册表、命令行工具</p>
<h3 id="http协议的协议头和请求头有什么？"><a href="#http协议的协议头和请求头有什么？" class="headerlink" title="http协议的协议头和请求头有什么？"></a>http协议的协议头和请求头有什么？</h3><p>协议头包含请求头和响应头</p>
<p>请求头：</p>
<ul>
<li>Accept：客户端告诉服务器支持的数据类型</li>
<li>Accept-encoding：客户端告诉服务器支持的压缩格式如gzip</li>
<li>Accept-Language：客户端告诉服务器所采用的语言</li>
<li>Host：客户端告诉服务器想要访问的主机名。</li>
<li>Referer：客户端告诉服务器从那个网页跳转过来</li>
<li>If-Modified-Since：客户端告诉服务器缓存最后修改时间</li>
<li>cookie：客户端向服务器发送cookie信息</li>
<li>user-agent：客户端告诉服务器其所使用的浏览器类型、版本等信息。</li>
<li>Connection：是否需要持久连接keep-alive</li>
</ul>
<p>响应头：</p>
<ul>
<li>Content-type：告诉客户端响应体的媒体类型</li>
<li>Content-length：响应体的长度</li>
<li>Cache-control：控制网页缓存</li>
<li>Date：消息被发送的时间和日期</li>
<li>Server：服务器的名称、版本等信息</li>
<li>Set-Cookie：向客户端发送cookie</li>
<li>Location：重定向资源的位置</li>
</ul>
<h3 id="浏览器缓存策略"><a href="#浏览器缓存策略" class="headerlink" title="浏览器缓存策略"></a>浏览器缓存策略</h3><p>强缓存：本地读取缓存，从内存(会话级)或硬盘读取   Expires cache-control</p>
<p>协商缓存：强缓存命中失败，向服务器发送请求，协商缓存，if-modified-since/last-modified.  If-none-match/etag</p>
<h3 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h3><p>浏览器的同源策略：它限制一个源的文档或加载的脚本如何能与另一个源的资源进行交互。它能隔离恶意文档，减少被攻击的媒介。</p>
<p>如果两个url的协议/域名/端口都相同的话，则这两个url是同源。</p>
<p>script、link、iframe、img、video、object标签引入的资源可以跨域</p>
<p>跨域解决方案：</p>
<ul>
<li>JSONP：动态创建script标签并插入head中，浏览器会执行script代码，只能发送get请求</li>
<li>CORS：基于http1.1的跨域解决方案，全称跨域资源共享。简单来说就是浏览器要想跨域访问服务器资源必须经过服务器的允许。</li>
</ul>
<p>针对不同请求，cors有三种交互模式：简单请求、带预检的请求、携带cookie的请求</p>
<p>简单请求：请求方式为get、post、head；请求头仅包含安全的字段Accept、Accept-lanuage、content-type等；有content-type字段且值只能为text/plain application/x-www-form-urlencoded multipart/form-data;</p>
<p>简单请求请求头携带Origin表明发送跨域请求的源地址，服务器收到请求如果允许跨域访问则在响应头添加Access-Control-Allow-Origin字段</p>
<p>带预检的请求：非简单请求，先发送预检请求访问服务器是否允许，服务器接收请求允许访问，浏览器发送真实的请求，服务器完成真实的响应</p>
<p>携带cookie的请求：设置withCredentials: true,当一个请求附带cookie时，无论简单还是预检请求都会在请求头添加cookie字段，而服务器需要在响应头明确表示是否允许Access-Control-Allow-Credential:true</p>
<ul>
<li>代理服务器：客户端向代理服务器发送请求，代理服务器再向目标服务器发送请求，然后将结果返回给客户端</li>
<li>WebSocket：在单tcp连接进行双工通信的协议，允许跨域通信</li>
<li>window.postMessage:h5的postMessage方法允许跨窗口/跨域通信</li>
<li>第三方库：jQuery、Axios等也提供了跨域请求的支持</li>
</ul>
<h3 id="防抖和节流"><a href="#防抖和节流" class="headerlink" title="防抖和节流"></a>防抖和节流</h3><p>防抖：连续触发事件在一段时间内只执行一次，如果时间内再次触发，则重新计时.</p>
<p>使用场景：用户重复点击按钮，搜索框实时搜索，窗口大小调整</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">func, wait</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> timer</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> context = <span class="built_in">this</span></span><br><span class="line">    <span class="keyword">let</span> args = <span class="built_in">arguments</span></span><br><span class="line">    <span class="keyword">if</span> (timer) timer = <span class="literal">null</span></span><br><span class="line">    timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      func.apply(context, args)</span><br><span class="line">    &#125;, wait)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>节流：连续触发函数在一段时间内只执行一次，稀释了函数的执行频率。</p>
<p>使用场景：鼠标icon定位，页面scorll，窗口调整，抢购和疯狂点击</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">func, wait</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> timer</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> context = <span class="built_in">this</span></span><br><span class="line">    <span class="keyword">let</span> args = <span class="built_in">arguments</span></span><br><span class="line">    <span class="keyword">if</span> (!timer) &#123;</span><br><span class="line">      timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        func.apply(context, args)</span><br><span class="line">        timer = <span class="literal">null</span></span><br><span class="line">      &#125;, wait)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>防抖和节流都用于降低函数的执行频率。不同的是防抖在一段时间后操作，在这段时间内再次触发任务，则重新计时；而节流是一段时间内只执行一次任务，若这段时间内再次触发也不会生效。</p>
<h3 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h3><p>一种轻量级的数据交换格式。是ecmascript的一个子集，使用文本格式来存储和表示数据。简洁、容易阅读。</p>
<p>SON的基本语法规则包括：</p>
<ul>
<li>数据为键值对（key/value pairs）。</li>
<li>数据由逗号分隔。</li>
<li>花括号保存对象。</li>
<li>方括号保存数组。</li>
</ul>
<p>JSON的两种基本结构是对象和数组。对象是一个无序的键值对集合，其中每个键值对使用一个冒号分隔，多个键值对之间使用逗号分隔。数组则是一个有序的值列表，其中每个值之间使用逗号分隔。</p>
<h3 id="当数据没有请求过来时该怎么做"><a href="#当数据没有请求过来时该怎么做" class="headerlink" title="当数据没有请求过来时该怎么做"></a>当数据没有请求过来时该怎么做</h3><p>可以考虑采用一些备选方案，如使用缓存数据、提供占位符或加载默认值等，以保证用户界面的友好性和可用性</p>
<h3 id="无感登录"><a href="#无感登录" class="headerlink" title="无感登录"></a>无感登录</h3><p>token+refreshToken模式：用户在认证中心登录成功后返回给客户端token+refreshToken,其中token有效期短，refreshToken长期有效，客户端访问业务系统携带token，由业务系统验证通过后返回响应数据，若token过期则返回客户端对应状态码，客户端在响应拦截中拿refreshToken换取新的token保存并替换在本地，用新的token去重新发送业务请求。如果refreshToken过期了，则清除所有token重新进行登录认证。</p>
<p>方式：1.在响应中拦截，判断过期后调用刷新token接口</p>
<p>2、设置定时器刷新token接口    3、后端返回过期时间，前端判断token过期调用刷新token接口</p>
<h3 id="大文件上传"><a href="#大文件上传" class="headerlink" title="大文件上传"></a>大文件上传</h3><h3 id="前端工程化"><a href="#前端工程化" class="headerlink" title="前端工程化"></a>前端工程化</h3><p>组织管理：发挥资源的最大效能</p>
<p>前端工程化：前端开发的管理工具、降低开发成本，提升开发效率</p>
<p>项目规模越大，团队成员越多，项目越复杂，管理成本就越高，工程化价格越大。</p>
<p>前端工程化，选择什么样的工具，如何把这些工具组织起来，形成我们的项目结构，让初中级开发者能够在这套系统里完美的进行协作，高效率的进行开发，是非常有价值的一件事。</p>
<p>一些官方的脚手架工具比如cli, vite是众多方案里现成的解决方案，不一定适合所有项目，一些复杂的项目需要自行开发脚手架。</p>
<p>开发者和架构师最大的区别是工程化能力的区别。</p>
<h4 id="模块化和包管理"><a href="#模块化和包管理" class="headerlink" title="模块化和包管理"></a>模块化和包管理</h4><p>问题、标准、实现</p>
<p>随着项目的复杂，用分解和聚合的思想来管理项目</p>
<p>模块化：分解和聚合，解决文件的分解（全局污染）和聚合（依赖混乱）</p>
<p>模块化：</p>
<ul>
<li>标准： CommonJS（CJS，社区标准-nodejs） AMD CMD UMD Ecmascript Module(ESM，官方标准)，常用commonjs、ESM<ul>
<li>cjs是运行时，运行后才能确定依赖关系<code>const xxx = require(&#39;./1.js&#39;)</code>；ESM是编译时，运行之前就判断依赖关系<code>import xxx from &#39;./1.js&#39;</code>,ESM不需要运行就能确定依赖关系，方便做优化。</li>
</ul>
</li>
<li>实现：浏览器、node、构建工具<ul>
<li>浏览器支持ESM，只支持官方,<code>&lt;script src=&quot;./1.js&quot; type=&quot;module&quot; &gt;</code></li>
<li>node支持CJS和ESM</li>
<li>构建工具：一般都支持CJS和ESM，vue-cli vite car umijs 脚手架内部内置构建工具：webpack、rollup、esbuilder等，推荐使用ESM</li>
</ul>
</li>
</ul>
<p>包管理：</p>
<ul>
<li>包：package，一系列模块的集合, 函数-&gt;文件-&gt;包</li>
<li>npm：包管理工具，包含：包的属性、registry(包含包的仓库)、cli（command-line interface命令行工具界面），pnpm, yarn, cnpm, bower为了弥补npm的不足，bower支持浏览器环境，其他npm等都是在node环境，常用npm, pnpm, yarn</li>
</ul>
<p>框架：约束代码结构，比如vue单文件组件</p>
<p>库：原本就有自己的结构，调用库的功能</p>
<p>工程化是前端开发工具，降低开发成功，提高开发效率</p>
<h4 id="JS工具链"><a href="#JS工具链" class="headerlink" title="JS工具链"></a>JS工具链</h4><p>开发项目除了业务代码外还有别的问题需要解决：</p>
<ul>
<li><p>语言问题：html、css（sass/less/stylus等）、js的兼容性和语言增强，兼容性：api兼容（babel、polypill）、语法增强</p>
<ul>
<li><p>js语言的处理</p>
<ul>
<li>js中常用2个工具Babel,Core-js,Babel负责将最新的ES语法转换为浏览器兼容的语法（比如let, const）；而Core-js提供了必要的polyfill，使开发者使用最新的js特性，而不必担心兼容性问题(比如promise, async/await)；</li>
<li>Babel: 是一个JavaScript编译器，将最新版本es代码转换为向后兼容的js版本，以便在旧版本浏览器运行。这一功能通过各种插件实现，每一种插件负责转换一种语法，为了简化插件的使用，babe提供一组预设presets，presets是插件的集合，可以预先配置好常用的插件方便开发者使用。babel将代码转换为AST抽象语法树，又转换为代码。babel的插件影响抽象语法树从而最终影响转换结果。</li>
<li>Core-js：是一个包含javascript标准库polyfill的集合。Polyfill是填充浏览器对ES6+新语法支持不足的工具，为浏览器添加缺失的特性，使开发者可以使用最新的js特性，而不用担心兼容性问题。</li>
</ul>
</li>
<li><p>css语言的处理</p>
<ul>
<li><p>css语言的问题：语法缺失（循环、判断、拼接）、功能缺失（颜色函数、数学函数、自定义函数）</p>
</li>
<li><p>新语言：在css基础上扩展，sass/less/stylus包含css，新语言-&gt;css预编译器-&gt;css语言, css语言还需要处理别的问题：厂商前缀（autoprefixer）、代码压缩（cssnano）、代码剪枝（purgecss）等，处理这些的问题的工具称为后处理器，处理完成后生成css代码；</p>
</li>
<li><p>Sass/less/stylus–&gt;预编译器–&gt;css–&gt;后处理器–&gt;css</p>
</li>
<li><p>PostCSS：是一个使用javascript工具转换css的库，不是一个预处理器，而是用来转换css代码的。主要功能包括：</p>
<ul>
<li><p>解析css代码转换为抽象语法树AST</p>
</li>
<li><p>提供API以修改AST</p>
</li>
<li><p>将修改后的AST格式化为新的CSS代码</p>
<p>postcss本身并不提供任务功能而是依赖于插件来进行css转换，对基于css的AST进行各种操作，包括支持变量和混入、添加浏览器前缀等。postcss使用多种场景包括在css预处理阶段和后处理阶段进行代码转换，也可以结合sass/less/stylus工具使用，以扩展css的功能和兼容性。Tailwind是postcss的一个插件，是个样式库，封装的是css；使用Tailwind时，只需要给组件添加class即可；特点是可定制化程度高和响应式设计。</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>工程问题</p>
</li>
<li><p>流程问题</p>
</li>
</ul>
<p>开发和维护的代码于运行时需要的代码不一致，需要进行工程转换，就是构建工具，用来进行工程转换。</p>
<p>webpack是一种模块打包工具，用于前端资源构建，可以处理js、css、图片等各种文件并将其打包成浏览器可以识别的静态资源。</p>
<h3 id="html语义化的理解"><a href="#html语义化的理解" class="headerlink" title="html语义化的理解"></a>html语义化的理解</h3><ul>
<li>使内容更加结构化，即使失去样式也能呈现清晰的结构</li>
<li>有利于爬虫和seo</li>
<li>语义化更有可读性，方便团队开发</li>
<li>方便其他设备解析，比如盲人阅读器渲染页面更易于阅读</li>
</ul>
<h3 id="html5的新特性"><a href="#html5的新特性" class="headerlink" title="html5的新特性"></a>html5的新特性</h3><ul>
<li>语义化的标签</li>
<li>新增video、audio</li>
<li>画布canvas</li>
<li>svg</li>
<li>drag &amp; drog 拖拽释放API</li>
<li>input类型：date、datetime、email</li>
<li>localStorage/sessionStorage</li>
</ul>
<h3 id="css3新特性"><a href="#css3新特性" class="headerlink" title="css3新特性"></a>css3新特性</h3><ul>
<li>边框</li>
<li>背景属性</li>
<li>文本阴影</li>
<li>transform</li>
<li>transition过渡动画</li>
<li>animation动画</li>
<li>渐变</li>
<li>媒体查询</li>
<li>弹性盒</li>
<li>新增选择器：属性、伪类、伪元素选择器</li>
</ul>
<h3 id="解决了哪些移动端的兼容问题？"><a href="#解决了哪些移动端的兼容问题？" class="headerlink" title="解决了哪些移动端的兼容问题？"></a>解决了哪些移动端的兼容问题？</h3><p>1、在移动端（特别是 iOS 设备）上，当使用 <code>overflow: scroll</code> 或 <code>overflow: auto</code> 样式时，确实可能会遇到滑动卡顿的问题。</p>
<p>原因：IOS safari试图减少绘制和合成操作来进行滚动性能优化。</p>
<p>解决：使用<code>-webkit-overflow-scrolling: touch</code>启用IOS上滚动性能优化。这个属性告诉浏览器使用原生滚动机制，通常可以提供更流畅的滚动体验。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.scroll-element</span> &#123;</span><br><span class="line">  <span class="attribute">overflow</span>: scroll;</span><br><span class="line">  <span class="attribute">-webkit-overflow-scrolling</span>: touch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2、在移动端安卓设备上，<code>placeholder</code> 文字在设置行高 (<code>line-height</code>) 后偏上</p>
<p>解决：避免给有placeholder属性的input/textarea设置行高（line-height: normal）</p>
<p>3、移动端字体小于12px时异常显示</p>
<p>解决：先将元素整体尺寸放大一倍，再用transform:scale(0.5)进行缩小，设置基点transform-origin: 0 0;</p>
<p>4、ios系统在input框禁用时，disabled：true文本内容不显示</p>
<p>原因：ios系统在input:disabled时透明度为0.3导致视觉上文本不显示</p>
<p>解决：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:disabled</span>, <span class="selector-tag">input</span><span class="selector-attr">[type=<span class="string">&quot;button&quot;</span>]</span><span class="selector-pseudo">:disabled</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>5、IOS端input输入框首字母会大写</p>
<p>原因：在 iOS 设备上，虚拟键盘默认会开启首字母大写功能</p>
<p>解决：<code>autocapitalize=&quot;off&quot;</code> 告诉键盘不要自动将输入的首字母大写，而 <code>autocorrect=&quot;off&quot;</code> 则禁用了自动更正功能</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">autocapitalize</span>=<span class="string">&quot;off&quot;</span> <span class="attr">autocorrect</span>=<span class="string">&quot;off&quot;</span></span></span><br></pre></td></tr></table></figure>
<p>6、禁用移动端选中文字</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 禁止用户选择文本 */</span>  </span><br><span class="line">* &#123;  </span><br><span class="line">  <span class="attribute">-webkit-touch-callout</span>: none; <span class="comment">/* iOS Safari */</span>  </span><br><span class="line">  <span class="attribute">-webkit-user-select</span>: none; <span class="comment">/* Safari */</span>  </span><br><span class="line">  <span class="attribute">-khtml-user-select</span>: none; <span class="comment">/* Konqueror HTML */</span>  </span><br><span class="line">  <span class="attribute">-moz-user-select</span>: none; <span class="comment">/* Firefox */</span>  </span><br><span class="line">  <span class="attribute">-ms-user-select</span>: none; <span class="comment">/* Internet Explorer/Edge */</span>  </span><br><span class="line">  <span class="attribute">user-select</span>: none; <span class="comment">/* 非前缀版本，目前被大多数浏览器支持 */</span>  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">/* 如果需要允许 input 元素内的文本选择，可以单独设置 */</span>  </span><br><span class="line"><span class="selector-tag">input</span> &#123;  </span><br><span class="line">  <span class="attribute">-webkit-user-select</span>: auto; <span class="comment">/* 允许 input 内的文本选择 */</span>  </span><br><span class="line">&#125;</span><br><span class="line">​```</span><br></pre></td></tr></table></figure>
<p>7、ios识别长串数字为电话</p>
<p>解决：<code>&lt;meta name=&quot;fomat-dection&quot; content=&quot;telphone=no&quot;</code></p>
<h3 id="v-for中key的作用"><a href="#v-for中key的作用" class="headerlink" title="v-for中key的作用"></a>v-for中key的作用</h3><p>1、作为元素的唯一标识，避免<code>v-for</code>的“就地更新”策略导致的问题。</p>
<p>2、更高效的更新虚拟DOM，提高渲染效率</p>
<p>3、避免带有输入框的DOM产生错误更新造成数据混乱</p>
<h3 id="created和mounted请求数据有什么区别"><a href="#created和mounted请求数据有什么区别" class="headerlink" title="created和mounted请求数据有什么区别"></a>created和mounted请求数据有什么区别</h3><ul>
<li><code>created</code>：在组件实例被创建后立即调用，此时组件的DOM尚未被挂载。</li>
<li><code>mounted</code>：在组件的DOM挂载完成后调用，此时组件已经可以访问到DOM元素。</li>
</ul>
<p>通常，<code>created</code>用于在DOM挂载之前发起数据请求并进行预处理，而<code>mounted</code>则用于在DOM挂载完成后执行依赖于DOM的操作</p>
<h3 id="keep-alive"><a href="#keep-alive" class="headerlink" title="keep-alive"></a>keep-alive</h3><p><code>keep-alive</code> 是 Vue.js 中提供的一个内置组件，用于缓存不活动的组件实例，而不是销毁它们。当组件在 <code>&lt;keep-alive&gt;</code> 内被切换时，它的激活和停用状态会被相应触发。</p>
<p>包裹在动态组件中使用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive&gt;  </span><br><span class="line">  &lt;component :is&#x3D;&quot;currentComponent&quot;&gt;&lt;&#x2F;component&gt;  </span><br><span class="line">&lt;&#x2F;keep-alive&gt;</span><br></pre></td></tr></table></figure>
<p>特性</p>
<ul>
<li><code>include</code>（字符串或正则表达式）：只有名称匹配的组件会被缓存。</li>
<li><code>exclude</code>（字符串或正则表达式）：任何名称匹配的组件都不会被缓存。</li>
</ul>
<p>生命周期钩子</p>
<p>当组件被 <code>&lt;keep-alive&gt;</code> 包裹时，会触发两个额外的生命周期钩子：</p>
<ul>
<li><code>activated</code>：当组件从缓存中激活时调用。</li>
<li><code>deactivated</code>：当组件被停用（但不是销毁）时调用。</li>
</ul>
<h3 id="element-ui怎么进行表单验证"><a href="#element-ui怎么进行表单验证" class="headerlink" title="element-ui怎么进行表单验证"></a>element-ui怎么进行表单验证</h3><p>Form组件设置model属性进行数据绑定，Form-item组件设置prop属性验证字段名，Form 组件上设置 <code>:rules</code> 属性绑定验证规则对象</p>
<p>表单校验方式：</p>
<ul>
<li><strong>基础校验</strong>：在 <code>el-form-item</code> 中通过 <code>rules</code> 属性进行校验规则的设置或者在<code>form</code>组件添加<code>rules</code>属性绑定表单全部属性检验规则对象</li>
<li>自定义校验：通过 <code>validator</code> 函数来自定义校验规则。<code>validator</code> 是一个函数，它接收三个参数：<code>rule</code>（校验规则）、<code>value</code>（字段值）和 <code>callback</code>（回调函数）。</li>
</ul>
<h3 id="封装axios"><a href="#封装axios" class="headerlink" title="封装axios"></a>封装axios</h3><p>封装axios可以简化代码、同一错误处理、请求拦截和响应拦截等。封装步骤：</p>
<ul>
<li>1、安装下载axios</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install axios</span><br></pre></td></tr></table></figure>
<ul>
<li>2、创建请求文件：在项目的src目录下，创建一个utils文件夹，并在该文件夹下创建一个request.js文件。这个文件将用于封装axios。</li>
<li>3、在request.js中引入依赖,引入axios和其他你可能需要的依赖，如qs（用于序列化post请求的数据）。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;  </span><br><span class="line"><span class="keyword">import</span> qs <span class="keyword">from</span> <span class="string">&#x27;qs&#x27;</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>4、<strong>配置axios</strong>：</li>
</ul>
<p>在axios配置默认设置、如baseURL、timeout、请求拦截、响应拦截等</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> service = axios.create(&#123;</span><br><span class="line">  baseURL: process.env.VUE_APP_BASE_API, <span class="comment">// api的base_url  </span></span><br><span class="line">  timeout: <span class="number">5000</span> <span class="comment">// 请求超时时间   </span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 请求拦截</span></span><br><span class="line">service.interceptors.request.use(</span><br><span class="line"> config =&gt; &#123;</span><br><span class="line">    <span class="comment">// 在发送请求之前做些什么  </span></span><br><span class="line">    <span class="comment">// 例如，添加token到请求头  </span></span><br><span class="line">    <span class="keyword">if</span> (store.getters.token) &#123;  </span><br><span class="line">      config.headers[<span class="string">&#x27;Authorization&#x27;</span>] = <span class="string">&#x27;Bearer &#x27;</span> + store.getters.token;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">return</span> config; </span><br><span class="line">  &#125;，</span><br><span class="line">  error =&gt; &#123;</span><br><span class="line">   <span class="comment">// 对请求错误做些什么  </span></span><br><span class="line">    <span class="built_in">console</span>.log(error); <span class="comment">// for debug  </span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);  </span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"><span class="comment">// 响应拦截</span></span><br><span class="line">service.interceptors.response.use(</span><br><span class="line"> response =&gt; &#123;</span><br><span class="line">    <span class="comment">// 对响应数据做点什么  </span></span><br><span class="line">    <span class="keyword">return</span> response.data;  </span><br><span class="line">  &#125;,</span><br><span class="line">  error =&gt; &#123;</span><br><span class="line">    <span class="comment">// 对响应错误做点什么  </span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;err&#x27;</span> + error); <span class="comment">// for debug  </span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);  </span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service</span><br></pre></td></tr></table></figure>
<ul>
<li>5、创建API管理文件</li>
</ul>
<p>创建API文件夹，创建管理对应功能模块的api文件，比如用户模块，user.js</p>
<ul>
<li>6、在API文件中引入axios</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// user.js</span></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getUserList</span>(<span class="params">params</span>) </span>&#123;  </span><br><span class="line">  <span class="keyword">return</span> request(&#123;  </span><br><span class="line">    url: <span class="string">&#x27;/user/list&#x27;</span>,  </span><br><span class="line">    method: <span class="string">&#x27;get&#x27;</span>,  </span><br><span class="line">    params  </span><br><span class="line">  &#125;);  </span><br><span class="line">&#125;  </span><br><span class="line"> </span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createUser</span>(<span class="params">data</span>) </span>&#123;  </span><br><span class="line">  <span class="keyword">return</span> request(&#123;  </span><br><span class="line">    url: <span class="string">&#x27;/user/create&#x27;</span>,  </span><br><span class="line">    method: <span class="string">&#x27;post&#x27;</span>,  </span><br><span class="line">    data: qs.stringify(data)  </span><br><span class="line">  &#125;);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>7、在组件中使用</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getUserList, createUser &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/user&#x27;</span>;  </span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;  </span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;  </span><br><span class="line">    <span class="keyword">return</span> &#123;  </span><br><span class="line">      userList: []  </span><br><span class="line">    &#125;;  </span><br><span class="line">  &#125;,  </span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;  </span><br><span class="line">    getUserList().then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;  </span><br><span class="line">      <span class="built_in">this</span>.userList = response;  </span><br><span class="line">    &#125;);  </span><br><span class="line">  &#125;,  </span><br><span class="line">  methods: &#123;  </span><br><span class="line">    <span class="function"><span class="title">createNewUser</span>(<span class="params">newData</span>)</span> &#123;  </span><br><span class="line">      createUser(newData).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;  </span><br><span class="line">        <span class="comment">// 处理响应  </span></span><br><span class="line">      &#125;);  </span><br><span class="line">    &#125;  </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="vue路由传参方式？"><a href="#vue路由传参方式？" class="headerlink" title="vue路由传参方式？"></a>vue路由传参方式？</h3><ul>
<li>查询参数query传参：</li>
</ul>
<p><code>http://localhost:8080/user?id=123</code>参数显示在url中，通过<code>$route.query.id</code>获取参数</p>
<ul>
<li>路由参数：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;  </span><br><span class="line">  path: <span class="string">&#x27;/user/:id&#x27;</span>,  </span><br><span class="line">  component: User  </span><br><span class="line">&#125;</span><br><span class="line">http:<span class="comment">//localhost:8080/user/123</span></span><br></pre></td></tr></table></figure>
<p>通过<code>$route.params.id</code>访问这个参数</p>
<ul>
<li>编程式导航传参</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// params</span></span><br><span class="line"><span class="built_in">this</span>.$router.push(&#123; <span class="attr">name</span>: <span class="string">&#x27;User&#x27;</span>, <span class="attr">params</span>: &#123; <span class="attr">userId</span>: <span class="number">123</span> &#125;&#125;);</span><br><span class="line"><span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">`/user/<span class="subst">$&#123;userId&#125;</span>`</span> &#125;);</span><br><span class="line"><span class="comment">// query</span></span><br><span class="line"><span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">&#x27;/user&#x27;</span>, <span class="attr">query</span>: &#123;<span class="attr">userId</span>: <span class="number">123</span>&#125; &#125;);</span><br></pre></td></tr></table></figure>
<p>查询参数（query parameters）与路由参数（route parameters）不同。路由参数是定义在路由配置中的，并且作为 URL 的一部分出现，但它们不会显示在 URL 中（除非你特别配置它们这样做）</p>
<ul>
<li><p>路由组件传参</p>
<ul>
<li><p>布尔模式：props属性设置为true，<code>route.params</code> 将会被设置为组件属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> User = &#123;</span><br><span class="line">  props: [<span class="string">&#x27;id&#x27;</span>],</span><br><span class="line">  template: <span class="string">&#x27;&lt;div&gt;User &#123;&#123; id &#125;&#125;&lt;/div&gt;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">routes: [</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/user/:id&#x27;</span>, <span class="attr">component</span>: User, <span class="attr">props</span>: <span class="literal">true</span> &#125;</span><br><span class="line"> ]</span><br></pre></td></tr></table></figure></li>
<li><p>对象模式：如果 <code>props</code> 是一个对象，它会被按原样设置为组件属性。当 <code>props</code> 是静态的时候有用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;/user&#x27;</span>,</span><br><span class="line">      component: User,</span><br><span class="line">      props: &#123; <span class="attr">id</span>: <span class="number">123</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br></pre></td></tr></table></figure></li>
<li><p>函数模式:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">routes: [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/user&#x27;</span>,</span><br><span class="line">    component: User,</span><br><span class="line">    props: <span class="function"><span class="params">route</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        query: route.query.q,</span><br><span class="line">        name: route.params.name</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li>
<li><p>全局前置守卫传参: 可以在beforeEach中访问to和from对象处理和修改传入的参数</p>
</li>
</ul>
</li>
</ul>
<h3 id="vue的路由hash模式和history模式的区别？"><a href="#vue的路由hash模式和history模式的区别？" class="headerlink" title="vue的路由hash模式和history模式的区别？"></a>vue的路由hash模式和history模式的区别？</h3><p>vue的路由hash模式和history模式主要区别体现在URL表现形式、页面刷新行为、后端配置需求等方面。</p>
<ul>
<li>URL表现形式：hash模式下，页面地址栏地址中URL中会带有“#”以及后面的字符，history模式下URL表现正常。</li>
<li>页面刷新行为：hash模式下，地址栏回车页面路由正常导航显示，而history模式下，页面刷新可能会404.这是因为history模式的URL资源在服务器中不存在，需要后端进行相应的配置。</li>
<li>后端配置需求：history模式的URL需要后端进行重写或重定向以便访问不存在的URL资源能正确的返回index.html文件</li>
<li>兼容性：hash模式支持低版本浏览器，history不支持，因为是html5的api</li>
</ul>
<p><code>history.pushState(data, title, url)</code>, <code>history.replace(data, title, url)</code>新增/替换当前历史记录，不会触发<code>window.onpopstate = function()&#123;&#125;</code>监听历史栈的改变的事件，<code>history.forward()前进，history.back()后退,history.go()</code>会触发历史展改变的事件；</p>
<p>window对象提供了onhashchange事件来监听hash值的改变,一旦url中的hash值发生改变,便会触发该事件。</p>
<h3 id="路由拦截是怎么实现的？"><a href="#路由拦截是怎么实现的？" class="headerlink" title="路由拦截是怎么实现的？"></a>路由拦截是怎么实现的？</h3><p>一般路由分为静态路由和权限路由，静态路由为登录页面，错误处理404页面等不需要鉴权的路由，在白名单内；权限路由为需要鉴定权限即校验是否登录等校验的路由。一般在全局导航守卫进行拦截：</p>
<p><strong>全局路由拦截：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">&#x27;router&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.use(Router)</span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  <span class="comment">// ...路由配置  </span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 校验是否登录/认证</span></span><br><span class="line"><span class="keyword">const</span> isValidateLogin = ()&#123;&#125;</span><br><span class="line"><span class="keyword">const</span> whiteList = [<span class="string">&#x27;login&#x27;</span>, <span class="string">&#x27;404&#x27;</span>]</span><br><span class="line"><span class="comment">// 全局前置守卫</span></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 不在白名单内，需要校验</span></span><br><span class="line">  <span class="keyword">if</span> (!whiteList.includes(to.name)) &#123;</span><br><span class="line">    <span class="keyword">if</span> (isValidateLogin()) &#123;</span><br><span class="line">      next()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      next(&#123;</span><br><span class="line">        name: <span class="string">&#x27;login&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    next()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>路由独享的拦截：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> Router(&#123;  </span><br><span class="line">  routes: [  </span><br><span class="line">    &#123;  </span><br><span class="line">      path: <span class="string">&#x27;/user/:id&#x27;</span>,  </span><br><span class="line">      name: <span class="string">&#x27;user&#x27;</span>,  </span><br><span class="line">      component: User,  </span><br><span class="line">      beforeEnter: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;  </span><br><span class="line">        <span class="comment">// 这里的逻辑和全局守卫类似  </span></span><br><span class="line">        <span class="keyword">const</span> isValidateLogin = ()&#123;&#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">if</span> (!isValidateLogin) &#123;  </span><br><span class="line">          next(<span class="literal">false</span>); <span class="comment">// 阻止导航  </span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">          next(); <span class="comment">// 确保一定要调用 next()  </span></span><br><span class="line">        &#125;  </span><br><span class="line">      &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="comment">// ...其他路由配置  </span></span><br><span class="line">  ]  </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><strong>组件内的拦截:</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="function"><span class="title">beforeRouteEnter</span>(<span class="params">to, <span class="keyword">from</span>, next</span>)</span> &#123;  </span><br><span class="line">    <span class="comment">// 在路由进入之前被调用  </span></span><br><span class="line">    <span class="comment">// 不能使用 this，因为此时组件实例还没被创建  </span></span><br><span class="line">    next(<span class="function"><span class="params">vm</span> =&gt;</span> &#123;  </span><br><span class="line">      <span class="comment">// 通过 `vm` 访问组件实例  </span></span><br><span class="line">    &#125;);  </span><br><span class="line">  &#125;,  </span><br></pre></td></tr></table></figure>
<h3 id="vue的动态路由"><a href="#vue的动态路由" class="headerlink" title="vue的动态路由"></a>vue的动态路由</h3><p>vue的动态路由是根据应用程序的状态或用户的权限动态的添加、删除、修改路由。是由<code>router.addRoutes</code>方法实现的，这个方法运行你在运行时向路由表添加更多的路由。</p>
<p><strong>首先，安装并引入Vue Router</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-router</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">&#x27;router&#x27;</span></span><br><span class="line">Vue.use(Router)</span><br></pre></td></tr></table></figure>
<p><strong>创建一个基本的路由配置：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> baseRoutes = [  </span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>, <span class="attr">component</span>: Login &#125;,  </span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/404&#x27;</span>, <span class="attr">component</span>: NotFound &#125;  </span><br><span class="line">]  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> Router(&#123;  </span><br><span class="line">  routes: baseRoutes  </span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>
<p><strong>创建权限路由：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> authRouter = [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/admin&#x27;</span>, <span class="attr">component</span>: AdminPanel, <span class="attr">meta</span>: &#123; <span class="attr">auth</span>: <span class="string">&#x27;AdminPanel&#x27;</span>&#125; &#125;,  </span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/admin/dashboard&#x27;</span>, <span class="attr">component</span>: AdminDashboard, <span class="attr">meta</span>: &#123; <span class="attr">auth</span>: <span class="string">&#x27;AdminDashboard&#x27;</span> &#125; &#125;,</span><br><span class="line">]</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> authRouter</span><br></pre></td></tr></table></figure>
<p><strong>使用addRoutes方法添加动态路由：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> authRouter <span class="keyword">from</span> <span class="string">&#x27;./authRouter&#x27;</span></span><br><span class="line"><span class="comment">// 根据用户权限获取权限路由</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getAuthRoutes</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> authRouter.filter(<span class="function"><span class="params">item</span> =&gt;</span> store.state.auth[item.meta.auth])</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 根据用户权限动态添加路由  </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addDynamicRoutes</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> authRoutes = getAuthRoutes()</span><br><span class="line">  <span class="comment">// 确保总是有一个通配符路由指向404页面  </span></span><br><span class="line">  router.addRoutes([  </span><br><span class="line">    ...authRoutes</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;*&#x27;</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/404&#x27;</span> &#125;  </span><br><span class="line">  ]); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局路由守卫拦截判断是否获取获取用户权限，拿到权限后调用addDynamicRoutes()方法添加动态路由</span></span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong></p>
<p>在Vue.js中，当页面刷新时，Vue Router会重新加载路由配置，并且只会加载在初始化时定义的路由（即在创建<code>router</code>实例时通过<code>routes</code>选项传入的路由）。动态添加的路由在页面刷新后会丢失，因为它们是在运行时通过<code>addRoutes</code>方法添加到路由表中的。</p>
<p>如果你希望在页面刷新后仍然保留动态添加的路由，你需要将这些路由持久化到某种存储机制中，并在应用启动时从该存储中恢复它们。</p>
<p>或者全局路由守卫拦截判断是否获取用户权限，拿到权限后动态添加权限路由；用户权限数据存储在store里不做持久化存储，每次刷新重新拿取用户权限数据进而实现重新添加动态路由。</p>
<h3 id="如何避免刷新页面二次加载路由"><a href="#如何避免刷新页面二次加载路由" class="headerlink" title="如何避免刷新页面二次加载路由"></a>如何避免刷新页面二次加载路由</h3><p>1、window.location.reload()</p>
<p>2、新创建的router的matcher替换旧的路由matcher</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> createRouter = <span class="function">() =&gt;</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  <span class="comment">// mode: &#x27;history&#x27;, // require service support</span></span><br><span class="line">  scrollBehavior: <span class="function">() =&gt;</span> (&#123; <span class="attr">y</span>: <span class="number">0</span> &#125;),</span><br><span class="line">  routes: constantRouterMap</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = createRouter()</span><br><span class="line"></span><br><span class="line"><span class="comment">// Detail see: https://github.com/vuejs/vue-router/issues/1234#issuecomment-357941465</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">resetRouter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> newRouter = createRouter()</span><br><span class="line">  <span class="comment">// matcher包含了关于路径匹配的所有信息</span></span><br><span class="line">  router.matcher = newRouter.matcher <span class="comment">// reset router</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="vuex刷新数据会丢失吗"><a href="#vuex刷新数据会丢失吗" class="headerlink" title="vuex刷新数据会丢失吗"></a>vuex刷新数据会丢失吗</h3><p>会丢失。vuex的数据是保存在运行内存中的，页面刷新会重新加载vue实例，vuex数据会重新进行初始化。</p>
<p>解决：</p>
<p>1、把数据保存在浏览器中cookie, sessionStorage, localStorage</p>
<p>2、页面刷新的时候再次请求数据达到动态更新</p>
<p>3、页面刷新前保存数据到本地，初始化state数据从本地存储里获取：<code>beforeunload</code>事件在即将卸载页面（即刷新或关闭页面）时触发，<code>beforeunload</code>事件存储vuex数据</p>
<h3 id="watch和computed有什么区别？"><a href="#watch和computed有什么区别？" class="headerlink" title="watch和computed有什么区别？"></a>watch和computed有什么区别？</h3><p>watch:</p>
<ol>
<li><p>watch 是观察的作用，类似于某些数据的监听回调，可以监听data数据和计算属性</p>
</li>
<li><p>无缓存性，页面重新渲染时，即使值没有改变也执行</p>
</li>
<li><p>能调用异步函数。</p>
</li>
</ol>
<p>computed：</p>
<ol>
<li><p>计算属性，用于计算值等场景</p>
</li>
<li><p>computed的值具有缓存性，computed的值在getter执行后是会缓存的，只有它依赖的属性值改变后，下一次获取computed的值才会重新调用getter来计算。</p>
</li>
<li><p>computed适用于计算比较消耗性能的计算场景</p>
</li>
<li><p>不能调用异步函数。</p>
</li>
</ol>
<p>如果需要基于已有的数据进行计算并缓存结果，那么应该使用<code>computed</code>。而如果需要监听数据的变化并在变化时执行某些操作，那么应该使用<code>watch</code>。</p>
<h3 id="vuex什么场景使用，属性有哪些？"><a href="#vuex什么场景使用，属性有哪些？" class="headerlink" title="vuex什么场景使用，属性有哪些？"></a>vuex什么场景使用，属性有哪些？</h3><p>vuex用来组件间进行通信。使用场景：用户的个人信息管理模块、购物车模块、订单模块</p>
<p>vuex属性：</p>
<ul>
<li>state：是应用程序中所有组件的状态集合，存储变量</li>
<li>getters：基于state的计算属性，用于逻辑复杂计算</li>
<li>mutations：用于提交更改state，同步函数</li>
<li>actions：类似事件，可以提交mutations来修改state，可以异步操作</li>
<li>modules：将state分割成模块，每个模块都有state、getters、mutations、actions，使得代码更加模块化和清晰易懂。</li>
</ul>
<h3 id="资源提示符"><a href="#资源提示符" class="headerlink" title="资源提示符"></a>资源提示符</h3><p>Script标签:</p>
<ul>
<li>defer：边解析HTML文档边下载脚本，解析HTML文档完成后执行脚本；严格按照顺序执行脚本</li>
<li>async：边解析HTML文档边下载脚本，脚本下载完成后立即执行脚本，然后继续解析文档；因为是下载完成后立即执行，和脚本下载事件有关，所以脚本执行顺序不一致</li>
</ul>
<p>link标签：preload和prefetch都是浏览器优化资源加载的机制</p>
<ul>
<li>preload：允许浏览器在解析HTML文档时，提前加载资源并缓存那些当前页面需要的资源。</li>
<li>prefetch：利用浏览器的空闲时间来加载页面将来可能需要的资源的机制。</li>
</ul>
<p>Preload和Prefetch的主要区别在于它们加载资源的时机和目的。Preload是在页面渲染过程中提前加载并缓存当前页面需要的资源，以提高页面的渲染速度和性能；而Prefetch则是在浏览器空闲时加载并缓存页面将来可能需要的资源，以提高后续页面的加载速度。这两种机制可以相互结合使用，以最大程度地优化页面的加载速度和性能。</p>
<h3 id="vue的双向数据绑定的原理"><a href="#vue的双向数据绑定的原理" class="headerlink" title="vue的双向数据绑定的原理"></a>vue的双向数据绑定的原理</h3><p>vue的双向数据绑定是通过数据劫持和发布-订阅模式实现的。劫持和监听所有属性的变动，数据有变动时，触发setter，去通知相关订阅者进行更新。</p>
<p>实现一个Observer类，递归遍历data，劫持和监听所有属性的变化。数据变动时，触发setter，通知依赖进行更新</p>
<p>实现一个解析器Compile，解析指令，替换页面中所有变量为数据，初始化渲染页面视图；并对指令的对应节点的绑定相应的更新函数，添加监听数据的订阅者，一旦有变动就进行更新</p>
<p>实现一个Dep依赖收集起为每个属性设置对应的Dep实例，存储订阅者</p>
<p>依赖是vue实例、组件中的属性、模版中的表达式等，将依赖抽象为Watcher进行管理，Watcher作为Observer和Compile之间通信的桥梁，可以订阅每个属性的变动，执行绑定的回调函数，从而更新视图。</p>
<p>整个流程为Data数据通过Observer转换为setter/getter形式来追踪变化，当外界通过Watcher读取数据时，会触发getter从而将watcher添加到依赖中。<br>当数据发生变化，会触发setter，从而向Dep中的依赖（Watcher）发送通知。<br>Watcher接收到通知后，会向外界发送通知，变化通知到外界可能会触发视图更新，也有可能触发用户某个回调函数。</p>
<h3 id="diff算法和虚拟dom"><a href="#diff算法和虚拟dom" class="headerlink" title="diff算法和虚拟dom"></a>diff算法和虚拟dom</h3><p>虚拟dom，描述元素与元素之间的关系，是一个js对象</p>
<p>组件内响应式数据，数据变动时，render函数会重新生成一个新的虚拟dom，新的虚拟dom和旧的虚拟dom进行比对，算出最小量更新，最后反映在真实dom上。</p>
<p>数据更新-&gt;虚拟dom计算变更-&gt;操作真实的dom-&gt;视图更新</p>
<p>虚拟DOM 表现为一个 Object对象。并且最少包含标签名 (tag)、属性 (attrs) 和子元素对象 (children) 三个属性</p>
<p>diff算法就是进行虚拟节点对比，并返回一个patch对象，用来存储两个节点不同的地方，最后用patch记录的消息去局部更新Dom。通俗的讲就是：diff的过程就是调用名为patch的函数，比较新旧节点，一边比较一边给真实的DOM打补丁</p>
<p>通过diff算法比较 新 旧 两个VDOM，将不同的地方进行修改，相同的地方就地复用，最后再通过render函数渲染页面。</p>
<p><strong>diff算法：</strong></p>
<p>key是节点的唯一标识，用来表明新旧节点是否同一个dom</p>
<p>只比对同一层级，不跨级比较</p>
<p>只有是同一个虚拟节点才比对，不是直接暴力删除生成并插入新dom</p>
<p>过程：</p>
<ul>
<li>调用patch函数，判断oldVnode是不是虚拟节点，不是转换为虚拟节点</li>
<li>判断oldVnode和vnode是否是同一节点（元素选择器相同且key相同），如果不是，则创建新的节点并删除旧的节点</li>
<li>是同一个虚拟节点进行精细比较，调用patchVnode函数判断oldVnode和vnode是否指向同一个对象，是则直接返回</li>
<li>如果oldVnode和vnode都有文本节点且不相同，vnode的文本节点设置为真实dom的文本节点</li>
<li>如果oldVnode有子节点，vnode没有，删除真实dom对应子节点</li>
<li>如果oldVnode没有子节点，vnode有，将vnode的子节点真实化后添加到真实dom</li>
<li>如果oldVnode和vnode都有子节点则执行updateChildren函数比较子节点</li>
</ul>
<p>diff比较同级节点：为保证dom顺序和新节点保持一致采用while循环和首尾节点进行比较，给oldVnode和vnode节点数组设置开始结束索引，遍历的过程往中间移动。这样既能实现排序也减小了时间复杂度。两节点比较，有四种比对方式：</p>
<p>oldStartIndex —&gt; newEndIndex</p>
<p>oldEndIndex —&gt; newStartIndex</p>
<p>oldStartIndex —&gt; newStartIndex</p>
<p>oldEndIndex —&gt; newEndIndex</p>
<p>如果oldStartIndex和newEndIndex匹配，则将真实dom的第一个元素移动到最右；</p>
<p>如果oldEndIndex和newStartIndex匹配，则将真实dom的最后一个元素移动到最左；</p>
<p>匹配过程指针中间移动，直到while循环结束</p>
<p>如果四种方式都没有匹配，那么：</p>
<ul>
<li>遍历vnode数组，在oldVnode用key进行查找</li>
<li>如果没有找到，当前节点是新节点，创建对应dom元素并插入到真实dom</li>
<li>如果找到，判断选择器是否相同<ul>
<li>如果相同：说明是同一个节点，移动到dom元素的最左边</li>
<li>如果不同，不是一个节点，创建对应的dom元素并插入到真实dom树中</li>
</ul>
</li>
<li>循环结束后，判断oldVnode和vnode是否有剩余：<ul>
<li>oldVnode有剩余，说明节点被删除，找到dom删除对应节点</li>
<li>vnode有剩余，说明节点是新增的，则将剩余子节点真实化后添加到真实dom</li>
</ul>
</li>
</ul>
<h3 id="a链接下载文件"><a href="#a链接下载文件" class="headerlink" title="a链接下载文件"></a>a链接下载文件</h3><p>一、a链接下载文件地址，服务器设置响应头Content-Disposition为attachment告诉浏览器该文件应该被视为附件并进行下载，而不是直接在浏览器中打开。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;/download&quot;</span>&gt;点击下载&lt;/a&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 服务器设置</span></span><br><span class="line">res.setHeader(<span class="string">&#x27;Content-Disposition&#x27;</span>, <span class="string">`attachment; filename=<span class="subst">$&#123;fileName&#125;</span>`</span>); </span><br></pre></td></tr></table></figure>
<p>二、a链接使用HTML的<code>download</code>属性。<code>download</code>属性告诉浏览器该链接是用于下载</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;/path/to/file.ext&quot;</span> download=<span class="string">&quot;file.ext&quot;</span>&gt;点击下载&lt;/a&gt;</span><br></pre></td></tr></table></figure>
<p>需要注意的是，<code>download</code>属性只在同源文件下载时有效。如果尝试跨域下载文件，或者从第三方平台下载文件（例如微信公众号资源图片），浏览器将不会执行下载操作，而是尝试打开或显示该文件。</p>
<p>三、通过接口请求文件下载，需要传递token验证权限情况</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 假设你的服务器端点是 /api/download  </span></span><br><span class="line">fetch(<span class="string">&#x27;/api/download&#x27;</span>, &#123;  </span><br><span class="line">  method: <span class="string">&#x27;GET&#x27;</span>, <span class="comment">// 或者 &#x27;POST&#x27;，取决于你的服务器端点要求  </span></span><br><span class="line">  mode: <span class="string">&#x27;cors&#x27;</span>, <span class="comment">// 允许跨域请求  </span></span><br><span class="line">  credentials: <span class="string">&#x27;include&#x27;</span> <span class="comment">// 如果需要发送cookies  </span></span><br><span class="line">&#125;)  </span><br><span class="line">.then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;  </span><br><span class="line">  <span class="comment">// 检查响应状态  </span></span><br><span class="line">  <span class="keyword">if</span> (!response.ok) &#123;  </span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;Network response was not ok&#x27;</span>);  </span><br><span class="line">  &#125;  </span><br><span class="line">    </span><br><span class="line">  <span class="comment">// 由于安全限制，浏览器不会直接处理文件下载，因此我们需要创建一个Blob对象  </span></span><br><span class="line">  <span class="comment">// 并使用URL.createObjectURL()来生成一个指向该Blob的URL，然后创建一个a标签来下载  </span></span><br><span class="line">  <span class="keyword">return</span> response.blob();  </span><br><span class="line">&#125;)  </span><br><span class="line">.then(<span class="function"><span class="params">blob</span> =&gt;</span> &#123;  </span><br><span class="line">  <span class="keyword">const</span> url = <span class="built_in">window</span>.URL.createObjectURL(blob);  </span><br><span class="line">  <span class="keyword">const</span> a = <span class="built_in">document</span>.createElement(<span class="string">&#x27;a&#x27;</span>);  </span><br><span class="line">  a.href = url;  </span><br><span class="line">  a.download = <span class="string">&#x27;filename.ext&#x27;</span>; <span class="comment">// 设置下载的文件名  </span></span><br><span class="line">  a.style.display = <span class="string">&#x27;none&#x27;</span>;  </span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(a);  </span><br><span class="line">  a.click();  </span><br><span class="line">  <span class="built_in">window</span>.URL.revokeObjectURL(url); <span class="comment">// 释放URL对象  </span></span><br><span class="line">  <span class="built_in">document</span>.body.removeChild(a); <span class="comment">// 清理a标签  </span></span><br><span class="line">&#125;)  </span><br><span class="line">.catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;  </span><br><span class="line">  <span class="built_in">console</span>.error(<span class="string">&#x27;There was a problem with the fetch operation:&#x27;</span>, error);  </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>注意这种下载文件方式，要浏览器先传输文件到内存中，再触发下载到本地，如果文件过大会占用浏览器大量内存，且等待一段时间才触发下载弹出下载保存窗口。</p>
<p>四、解决需要验证权限的文件下载</p>
<p>先发送请求服务器返回set-cookie，浏览器保存在本地，再创建a标签下载文件，a标签会自动携带cookie，服务器验证通过后将文件传输直接触发文件下载，从网络IO变为文件IO，不经过浏览器，下载更快</p>
<h3 id="设计私有属性"><a href="#设计私有属性" class="headerlink" title="设计私有属性"></a>设计私有属性</h3><p>1、通常约定在属性名称前加上一个下划线<code>_</code></p>
<p>2、使用Symbol类型来创建一个唯一的、不可变的属性键</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PRIVATE_ATTR = <span class="built_in">Symbol</span>(<span class="string">&#x27;privateAttr&#x27;</span>);  </span><br><span class="line">  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;  </span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;  </span><br><span class="line">    <span class="built_in">this</span>[PRIVATE_ATTR] = <span class="literal">null</span>;  </span><br><span class="line">  &#125;  </span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="title">setPrivateAttr</span>(<span class="params">value</span>)</span> &#123;  </span><br><span class="line">    <span class="built_in">this</span>[PRIVATE_ATTR] = value;  </span><br><span class="line">  &#125;  </span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="title">getPrivateAttr</span>(<span class="params"></span>)</span> &#123;  </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>[PRIVATE_ATTR];  </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// 使用示例  </span></span><br><span class="line"><span class="keyword">const</span> obj = <span class="keyword">new</span> MyClass();  </span><br><span class="line">obj.setPrivateAttr(<span class="string">&#x27;hello&#x27;</span>);  </span><br><span class="line"><span class="built_in">console</span>.log(obj.getPrivateAttr()); <span class="comment">// 输出: hello  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment">// 尝试直接访问私有属性会失败  </span></span><br><span class="line"><span class="comment">// console.log(obj.PRIVATE_ATTR); // undefined</span></span><br><span class="line"><span class="comment">// 但是可以通过Object.getOwnPropertySymbols()方法获取</span></span><br></pre></td></tr></table></figure>
<p>3、es6中在属性名称前加<code>#</code></p>
<p>4、使用对象weakmap：WeakMap允许你存储对象的私有数据，这些数据只能通过WeakMap本身来访问</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> privateData = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();  </span><br><span class="line">  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;  </span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;  </span><br><span class="line">    privateData.set(<span class="built_in">this</span>, &#123; <span class="attr">privateAttr</span>: <span class="literal">null</span> &#125;);  </span><br><span class="line">  &#125;  </span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="title">setPrivateAttr</span>(<span class="params">value</span>)</span> &#123;  </span><br><span class="line">    <span class="keyword">const</span> data = privateData.get(<span class="built_in">this</span>);  </span><br><span class="line">    data.privateAttr = value;  </span><br><span class="line">  &#125;  </span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="title">getPrivateAttr</span>(<span class="params"></span>)</span> &#123;  </span><br><span class="line">    <span class="keyword">const</span> data = privateData.get(<span class="built_in">this</span>);  </span><br><span class="line">    <span class="keyword">return</span> data.privateAttr;  </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// 使用示例  </span></span><br><span class="line"><span class="keyword">const</span> obj = <span class="keyword">new</span> MyClass();  </span><br><span class="line">obj.setPrivateAttr(<span class="string">&#x27;hello&#x27;</span>);  </span><br><span class="line"><span class="built_in">console</span>.log(obj.getPrivateAttr()); <span class="comment">// 输出: hello  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment">// 尝试直接访问私有属性会失败  </span></span><br><span class="line"><span class="comment">// console.log(obj.privateAttr); // undefined</span></span><br></pre></td></tr></table></figure>
<p>5、使用ts的private声明定义变量</p>
<p>6、使用闭包和弱引用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个只能在类的实例内部访问的属性。</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyClass</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">  <span class="comment">// 私有属性  </span></span><br><span class="line">  <span class="keyword">let</span> _privateAttr = <span class="literal">null</span>;  </span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 公共方法  </span></span><br><span class="line">  <span class="built_in">this</span>.setPrivateAttr = <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;  </span><br><span class="line">    _privateAttr = value;  </span><br><span class="line">  &#125;;  </span><br><span class="line">  </span><br><span class="line">  <span class="built_in">this</span>.getPrivateAttr = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">return</span> _privateAttr;  </span><br><span class="line">  &#125;;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// 使用示例  </span></span><br><span class="line"><span class="keyword">const</span> obj = <span class="keyword">new</span> MyClass();  </span><br><span class="line">obj.setPrivateAttr(<span class="string">&#x27;hello&#x27;</span>);  </span><br><span class="line"><span class="built_in">console</span>.log(obj.getPrivateAttr()); <span class="comment">// 输出: hello  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment">// 尝试直接访问私有属性会失败  </span></span><br><span class="line"><span class="comment">// console.log(obj._privateAttr); // undefined</span></span><br></pre></td></tr></table></figure>
<h3 id="vuex是如何实现响应式的？"><a href="#vuex是如何实现响应式的？" class="headerlink" title="vuex是如何实现响应式的？"></a>vuex是如何实现响应式的？</h3><p>在 Vuex 中，state 对象在初始化时被递归地应用了 Object.defineProperty()，将其属性转换为 getter/setter，从而使得当 state 中的数据发生变化时，Vue 能够感知到这些变化并触发相应的更新。</p>
<p>需要注意的是，Vuex 的 state 中的数据必须是提前定义好的初始化属性，动态添加的属性是无法保证响应式的。如果需要动态添加属性，可以使用 Vue.set(obj, key, value) 方法或者通过创建一个新的对象来替换旧的对象。</p>
<h3 id="如何封装一个组件"><a href="#如何封装一个组件" class="headerlink" title="如何封装一个组件"></a>如何封装一个组件</h3><ul>
<li>定义组件，包含模版、脚本、样式</li>
<li>注册组件：<ul>
<li>全局注册：main.js文件引入组件，Vue.components(‘Child’, Child)</li>
<li>局部注册：父组件引入组件，components选项配置</li>
</ul>
</li>
<li>使用组件：组件模版中直接使用组件<code>&lt;Child /&gt;</code></li>
<li>传递数据：<ul>
<li>父向子传值：通过props属性</li>
<li>子与父通信：子组件$emit事件与父组件通信</li>
</ul>
</li>
<li>插槽：可以在组件模版中插入内容</li>
</ul>
<h3 id="如何搭建一个脚手架？"><a href="#如何搭建一个脚手架？" class="headerlink" title="如何搭建一个脚手架？"></a>如何搭建一个脚手架？</h3><ul>
<li>安装nodejs、npm、vue-cli <code>npm install -g @vue/cli</code></li>
<li>命令创建vue项目：<code>vue create my-project</code></li>
<li>选择预设配置</li>
<li>安装依赖</li>
<li>启动开发服务器</li>
</ul>
<h3 id="如何封装一个可复用的组件？"><a href="#如何封装一个可复用的组件？" class="headerlink" title="如何封装一个可复用的组件？"></a>如何封装一个可复用的组件？</h3><ul>
<li>简洁的API提供清晰的props和events作为输入和输出，避免直接操作父组件的状态或子组件的数据；</li>
<li>良好的文档和示例；</li>
<li>无副作用不依赖于外部的全局状态或变量；避免修改全局状态；</li>
<li>良好的错误处理；</li>
<li>组件尽可能独立，不依赖于其他特定组件或库；</li>
<li>随着项目的发展和需求的变化持续进行维护；</li>
<li>考虑扩展性比如提供插槽或mixins使组件更加灵活和可扩展；</li>
<li>提供默认样式组：但也要允许通过CSS变量或自定义类名来覆盖这些样式</li>
</ul>
<h3 id="首屏优化怎么做？"><a href="#首屏优化怎么做？" class="headerlink" title="首屏优化怎么做？"></a>首屏优化怎么做？</h3><ul>
<li>使用路由懒加载</li>
<li>非首屏组件使用异步组件</li>
<li>首屏不重要的组件延迟加载</li>
<li>静态资源放cdn上</li>
<li>减少首屏js、css等资源文件的大小</li>
<li>使用服务端渲染</li>
<li>使用精灵图和base64图减少http请求</li>
<li>开启gzip压缩</li>
<li>图片懒加载</li>
<li>做loading动画优化用户体验</li>
</ul>
<h3 id="vue3性能为什么比vue2好？"><a href="#vue3性能为什么比vue2好？" class="headerlink" title="vue3性能为什么比vue2好？"></a>vue3性能为什么比vue2好？</h3><p>基于proxy的响应式系统提供了更精细的控制和更好的性能</p>
<p>vue3对模版编译器和运行时进行了重构和优化，减少了库的体积，提高了加载速度。</p>
<p>Vue 3 中的编译器增加了更多的编译时优化，包括模板中静态节点的标记、事件处理函数的缓存等：</p>
<ul>
<li>静态节点标记：vue3在编译阶段就将静态节点提取出来，并在运行时使用，避免了不必要的渲染。</li>
<li>事件处理函数的缓存：vue3的编译器会识别出不依赖于响应式数据的事件处理函数，并将他们缓存起来，以避免每次渲染时都重新创建分配内存</li>
</ul>
<p>diff算法优化：</p>
<ul>
<li>静态节点提升：在编译阶段将静态节点提取出来，在运行时不需要参与diff算法比对，减少了需要比较的节点数量</li>
</ul>
<h3 id="vue3为什么使用proxy？"><a href="#vue3为什么使用proxy？" class="headerlink" title="vue3为什么使用proxy？"></a>vue3为什么使用proxy？</h3><p><strong>更全面的数据劫持</strong>：</p>
<p>Proxy 可以劫持整个对象，而不仅仅是对象的属性。这意味着无论对象如何变化（例如属性的添加、删除或修改），Proxy 都能捕捉到这些变化，并触发相应的响应。相比之下，Object.defineProperty 只能劫持已经存在的属性，对于新增或删除的属性无法感知。</p>
<p><strong>数组的支持</strong>：</p>
<p>Proxy 对数组的支持更好。在 Vue 2 中，为了实现对数组方法的劫持，不得不通过重写数组原型上的方法来实现。这样做不仅增加了代码的复杂性，而且可能引发一些不易察觉的问题。而 Proxy 可以直接监听数组的变化，无需额外处理。</p>
<h3 id="对组件的理解"><a href="#对组件的理解" class="headerlink" title="对组件的理解"></a>对组件的理解</h3><p>可复用的vue实例，拥有完整的生命周期，接收特定的输入以产生输出。</p>
<p>组件的目的就是将UI划分出可独立的、可复用的部分，使代码可维护提高开发效率。</p>
<h3 id="nuxtjs"><a href="#nuxtjs" class="headerlink" title="nuxtjs"></a>nuxtjs</h3><p>是基于vuejs的框架，关注的是应用的ui渲染。它预设了使用vuejs开发服务端渲染应用所需的各种配置。并提供了<code>nuxt generate</code>命令对基于vuejs的应用生成静态站点的功能。</p>
<p>优点：</p>
<ul>
<li>基于服务端ssr渲染：生成的带有html的内容，有利于搜索引擎的搜索，并优化了首屏加载时间</li>
<li>强大的路由管理，开发者可以实现单页应用（SPA）和多页应用（MPA）之间的无缝切换</li>
<li>Nuxt.js还支持异步数据加载、中间件、布局、EcmaScript6和EcmaScript7的语法</li>
</ul>
<h3 id="渲染方式"><a href="#渲染方式" class="headerlink" title="渲染方式"></a>渲染方式</h3><p>客户端渲染：用户访问url，请求html文件，前端根据路由动态渲染页面内容，关键链路较长，有一定的白屏时间</p>
<p>服务端渲染：用户访问url，服务端根据访问路径请求所需数据，拼接成html字符串，返回给前端，前端接收到html已有部分内容</p>
<p>预渲染：构建阶段生成匹配预渲染路径的html文件（每个需要预渲染的路由都有一个对应的 html），构建处理的html已有部分内容</p>
<p>服务端渲染：发送请求-服务器请求数据渲染html-包含首屏的html</p>
<p>预渲染：发送请求-包含首屏的html</p>
<p>客户端渲染：发送请求-html-js加载并动态渲染</p>
<h3 id="工作中遇到的难题"><a href="#工作中遇到的难题" class="headerlink" title="工作中遇到的难题"></a>工作中遇到的难题</h3><p>开发app对接高德地图，实现员工当天轨迹图展示，配置好权限和key后，发现真机运行正常，打包到测试机上运行其他页面正常，轨迹图页面白屏（android）。</p>
<p>android studio真机运行，排查后发现缺少高德地图的依赖库，导致页面白屏，下载最新依赖并引入后，仍然存在问题；<br>初步排查是离线打包配置及相关文件和最新依赖资源版本不匹配的原因，重新创建android/ios原生工程，进行基础库和应用配置，完成后再次打包地图页面正常。得出结论依赖库版本和工程相关配置及文件相关联，需要同步配置。</p>
<p>接着根据需求，绘制员工轨迹图，且缩放视野以包含所有给定的坐标点（include-points， markers， polyline），发现android地图标记点气泡消失，经排查发现缩放过程中地图放大再移动到某个标记点后，标记点气泡消失，缩小后气泡又出现；因ios版本正常，确定非api使用问题，社区上报bug并证实是官方bug。</p>
<h3 id="will-change"><a href="#will-change" class="headerlink" title="will-change"></a>will-change</h3><p>will-change是CSS中的一个属性，用于提前通知浏览器哪些元素的属性即将发生变化，以便浏览器能提前做好对应的优化准备工作，提高浏览器的页面渲染性能。有助于避免元素属性变化时导致页面卡顿失帧等交互体验不佳的问题。此外，当元素的属性变化完成后，应尽快移除will-change属性，以避免不必要的性能损耗。</p>
<h3 id="小程序"><a href="#小程序" class="headerlink" title="小程序"></a>小程序</h3><ol>
<li><p><strong>数据请求封装</strong>：<br>在小程序中，我会使用内置的<code>wx.request</code> API来进行网络通信。封装时，我会创建一个单独的服务模块或类，统一处理所有HTTP请求，便于管理和维护。示例代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// request.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">  wx.showLoading(&#123; <span class="attr">title</span>: <span class="string">&#x27;加载中...&#x27;</span> &#125;);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    wx.request(&#123;</span><br><span class="line">      ...options,</span><br><span class="line">      success: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        wx.hideLoading();</span><br><span class="line">        resolve(res.data);</span><br><span class="line">      &#125;,</span><br><span class="line">      fail: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">        wx.hideLoading();</span><br><span class="line">        reject(err);</span><br><span class="line">      &#125;,</span><br><span class="line">      complete: <span class="function">() =&gt;</span> &#123;&#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在此基础上，可以增加错误处理、重试机制、缓存策略（如对GET请求结果做本地缓存）以及拦截器的设计，比如在请求前后执行通用操作。</p>
</li>
<li><p><strong>参数传递方法</strong>：<br>小程序中页面间的参数传递主要有以下方式：</p>
<ul>
<li>在<code>wx.navigateTo</code>、<code>wx.redirectTo</code>或<code>wx.switchTab</code>等路由跳转API中，可以在<code>options</code>对象中加入<code>params</code>字段，用于传递JSON格式的参数。</li>
<li>也可以在URL后面附加query参数，如<code>wx.navigateTo(&#123;url: &#39;../targetPage/index?param1=value1&amp;param2=value2&#39;&#125;)</code>，在目标页面的<code>onLoad</code>生命周期函数中通过<code>options.query</code>获取。</li>
</ul>
</li>
<li><p><strong>性能优化</strong>：</p>
<ul>
<li>使用分包加载，将大的小程序拆分为多个子包，按需加载，提高首屏加载速度。</li>
<li>对于静态资源如图片，使用CDN加速，并合理设置缓存策略，如<code>&lt;image src=&quot;&quot; mode=&quot;aspectFit&quot; lazy-load/&gt;</code>实现图片懒加载。</li>
<li>减少不必要的网络请求，合并多次请求为一次，合理利用缓存，避免重复获取数据。</li>
<li>优化布局，尽量减少层级过深的嵌套，运用flex布局减少布局计算消耗。</li>
<li>对频繁变动的部分采用虚拟列表等技术优化渲染性能。</li>
</ul>
</li>
<li><p><strong>小程序优点</strong>：</p>
<ul>
<li>即点即用，无需下载安装，易于推广和分享。</li>
<li>离线缓存能力强，用户体验好，加载速度快。</li>
<li>提供丰富的API接口，如地理位置、支付、授权等，方便构建完整的业务闭环。</li>
<li>与微信生态深度融合，可以便捷地实现微信账号体系登录、微信支付、社交分享等功能。</li>
</ul>
</li>
<li><p><strong>小程序缺点</strong>：</p>
<ul>
<li>平台兼容性差，无法在非微信环境下运行。</li>
<li>分发渠道相对单一，依赖微信平台，传播受到一定限制。</li>
<li>生态系统相对封闭，与Web标准有一定的差异，代码难以复用到其他平台。</li>
</ul>
</li>
<li><p><strong>WXML与HTML的差异</strong>：</p>
<ul>
<li>WXML是微信小程序自定义的一种标记语言，它类似HTML，但提供了微信特有的标签，如<code>wx:if</code>用于条件渲染，<code>wx:for</code>用于列表渲染，数据绑定采用<code>&#123;&#123; &#125;&#125;</code>语法而非HTML的data-*属性。</li>
<li>WXML不支持所有HTML标签，但提供了与小程序功能紧密相关的标签，如<code>&lt;view&gt;</code>代替<code>&lt;div&gt;</code>，<code>&lt;button&gt;</code>支持开放能力等。</li>
</ul>
</li>
<li><p><strong>小程序生命周期</strong>：</p>
<ul>
<li>onLoad：页面加载时触发，此时可以做一些初始化工作，如从服务器获取数据。</li>
<li>onShow：页面显示/切回来时触发，每次打开页面都会调用，可用来处理页面显示相关逻辑。</li>
<li>onReady：页面初次渲染完成时触发，此时可以获取到页面的一些DOM信息。</li>
<li>onHide：页面从前台切换到后台时触发，可以在此时清除定时器，保存数据等。</li>
<li>onUnload：页面卸载时触发，用于清理页面资源。</li>
</ul>
</li>
<li><p><strong>登录流程</strong>：</p>
<ul>
<li>用户首先点击登录按钮，触发<code>wx.login</code>获取临时登录凭证（code）。</li>
<li>将code传送到服务器，服务器调用微信接口换取用户的唯一标识（openid）和session_key。</li>
<li>若需要用户信息，调用<code>wx.getUserInfo</code>并获取用户同意授权后得到加密的用户信息。</li>
<li>服务器解密用户信息，并结合openid和session_key生成自定义的token，返回给客户端进行后续身份验证和鉴权。</li>
</ul>
</li>
<li><p><strong>页面下拉刷新与上拉加载</strong></p>
<ul>
<li>下拉刷新：在页面json文件或Page构造器的options中设置<code>enablePullDownRefresh</code>为true，然后在Page的<code>onPullDownRefresh</code>方法中发起数据更新请求，请求完成后调用<code>wx.stopPullDownRefresh()</code>结束刷新动画。</li>
<li>上拉加载更多：在Page中监听<code>onReachBottom</code>事件，当页面滚动到底部时触发该事件，执行获取更多数据的逻辑。</li>
</ul>
</li>
<li><p><strong>组件化开发</strong></p>
<ul>
<li>在小程序中，创建自定义组件需在components目录下创建一个文件夹，包含index.wxml、index.wxss、index.js和index.json四个文件。</li>
<li>在index.js中定义组件，通过properties接受外部传入的props，通过setData更新组件内部数据，并在wxml中绑定数据和事件。</li>
<li>外部页面使用自定义组件时，如同普通标签一样引用，并通过属性传递数据给组件。组件内部事件通过<code>this.triggerEvent</code>触发，外部页面通过catchEvent接收。</li>
</ul>
</li>
</ol>
<h3 id="小程序底层"><a href="#小程序底层" class="headerlink" title="小程序底层"></a>小程序底层</h3><p>小程序的底层实现通常是指其运行环境和架构设计。以微信小程序为例，其底层架构主要特点包括以下几个方面：</p>
<ol>
<li><p><strong>双线程模型</strong>：</p>
<ul>
<li><p><strong>逻辑层（App Service）</strong>：小程序的业务逻辑层运行在一个独立的JsCore线程中，这个线程并不直接访问或操作DOM，从而保证了更高的安全性。在此环境中，开发者编写的所有业务逻辑、数据处理、网络请求等均在此线程上执行。</p>
</li>
<li><p><strong>渲染层（View Layer）</strong>：负责界面渲染，基于WebView组件，在不同的WebView线程中执行。每个小程序页面都有对应的WebView实例来渲染界面。由于没有直接暴露DOM API，而是通过一套自定义的视图层描述语言（WXML、WXSS）来构建界面。</p>
</li>
</ul>
</li>
<li><p><strong>通信机制</strong>：逻辑层与渲染层之间通过系统提供的WeixinJsBridge（或称JSBridge）进行通信。逻辑层会将处理后的数据发送给渲染层，触发界面更新；同时，渲染层的用户交互事件会被传递回逻辑层进行处理。</p>
</li>
<li><p><strong>框架特性</strong>：微信小程序框架基于浏览器内核重构，但剥离了DOM和BOM相关的API，提供了自己的API集，如setData方法用于更新视图。此外，还提供了丰富的组件库和API，支持调用微信的原生能力，如获取用户信息、支付、地理位置等功能。</p>
</li>
<li><p><strong>混合渲染</strong>：虽然渲染层基于WebView，但在实现上结合了Web渲染与Native渲染的优势，采取了一种Hybrid模式，部分功能调用原生模块来提升性能和用户体验。</p>
</li>
</ol>
<p>综上所述，小程序的底层设计兼顾了Web开发的便捷性和原生应用的性能优势，通过定制化的开发环境和框架体系来确保小程序具有轻量化、高性能的特点，并且易于接入特定平台（如微信）提供的丰富服务。随着技术发展，不同小程序框架可能会有不同的优化策略和技术路线，但核心思想基本围绕高效渲染、安全隔离以及灵活调用平台能力等方面展开。<br><strong>HTML：</strong></p>
<p>请解释HTML5的新特性及语义化标签的意义。</p>
<p>新特性：</p>
<p>多媒体支持：</p>
<p><code>&lt;audio&gt;</code> 和 <code>&lt;video&gt;</code> 标签允许直接在网页中嵌入音频和视频内容，无需第三方插件，提供了原生的播放控制功能。<br><code>&lt;canvas&gt;</code> 元素提供了在网页上进行图形绘制的能力，可以创建动态图形和游戏。<br><code>&lt;svg&gt;</code> 支持矢量图形，允许在网页中直接嵌入可缩放的矢量图形内容。</p>
<p>离线存储：</p>
<p>应用程序缓存（Application Cache，现已被Service Worker取代）允许Web应用程序在离线状态下依然可用。<br>IndexedDB 和 Web Storage（包括localStorage和sessionStorage）提供了持久化数据存储的方式。</p>
<p>Web Workers：</p>
<p>允许在后台线程中运行JavaScript，从而不会阻塞UI线程，提高复杂计算任务的性能。</p>
<p>Web Sockets：</p>
<p>实现了双向通信，使得服务器和客户端之间能够实时、全双工的数据传输。<br>地理定位：</p>
<p>Geolocation API 可以获取用户的地理位置信息。</p>
<p>表单控件增强：</p>
<p>新增了<code>&lt;input type=&quot;date&quot;&gt;</code>、<code>&lt;input type=&quot;time&quot;&gt;</code>、<code>&lt;input type=&quot;email&quot;&gt;</code>、<code>&lt;input type=&quot;url&quot;&gt;</code>、<code>&lt;input type=&quot;search&quot;&gt;</code>等类型的输入控件，提高了表单数据验证和用户输入体验。</p>
<p>语义化标签是为了增强HTML文档结构的逻辑性，使内容具有明确的意义，不仅帮助开发者组织文档，而且利于搜索引擎抓取和解析，提升可访问性和用户体验</p>
<h3 id="举例说明行内元素、块级元素和空元素，并解释其特点"><a href="#举例说明行内元素、块级元素和空元素，并解释其特点" class="headerlink" title="举例说明行内元素、块级元素和空元素，并解释其特点"></a>举例说明行内元素、块级元素和空元素，并解释其特点</h3><p>在HTML中，元素根据其显示方式和行为可以分为行内元素、块级元素和空元素.</p>
<ol>
<li>行内元素（Inline Elements）</li>
</ol>
<p>行内元素不会开始新的行，它们只会占据其内容本身的宽度和高度。行内元素通常用于表示文本或文本的一部分，例如链接、强调的文本等。</p>
<p>例子：<span> <a> <strong> <em></p>
<p>特点：</p>
<p>不会独占一行，和其他行内元素并排显示。<br>宽度和高度由内容决定，不能设置固定的宽高。<br>只能容纳文本或其他行内元素，不能包含块级元素。</p>
<ol>
<li>块级元素（Block Elements）</li>
</ol>
<p>块级元素会开始新的行，并尽可能占据其父元素的全部宽度。块级元素通常用于布局和结构化内容，例如段落、标题、列表等。</p>
<p>例子：<code>&lt;div&gt;</code> <code>&lt;p&gt;</code> <code>&lt;h1&gt;</code> <code>&lt;h6&gt;</code> <code>&lt;ul&gt;</code> <code>&lt;li&gt;</code></p>
<p>特点：</p>
<p>独占一行，垂直排列。<br>宽度默认为其父元素的100%，高度由内容决定。<br>可以设置宽度、高度、内外边距等样式属性。<br>可以包含其他块级元素和行内元素。</p>
<ol>
<li>空元素（Void Elements）</li>
</ol>
<p>空元素是指那些没有内容，只有起始标签的元素。它们通常用于表示那些不需要包含任何文本或其他元素的元素，例如换行符、图像等。</p>
<p>例子： <code>&lt;br&gt;``&lt;img&gt;``&lt;input&gt;``&lt;hr&gt;</code></p>
<p>特点：</p>
<p>只有起始标签，没有结束标签。<br>不能包含任何内容。<br>主要用于表示特定的功能或效果，例如换行、插入图像等。</p>
<p><strong>CSS：</strong></p>
<p>介绍一下CSS盒模型的不同类型（标准盒模型与IE盒模型）以及如何切换这两种模型。</p>
<p>标准盒模型（W3C盒模型）：</p>
<p>在标准盒模型中，width和height属性仅包含内容（content）的宽度和高度，即元素的实际内容所占的空间。内边距（padding）、边框（border）和外边距（margin）都不包括在width和height中。这意味着，如果你设置了一个元素的width和height，并且这个元素有内边距或边框，那么元素的实际显示尺寸会比你设定的尺寸大。</p>
<p>IE盒模型（怪异盒模型）：</p>
<p>在IE盒模型中，width和height属性则包含了内容、内边距和边框的总宽度和总高度。这意味着，如果你设置了一个元素的width和height，这个尺寸就包括了内容、内边距和边框，外边距则仍然不包括在内。因此，在IE盒模型中，元素的实际显示尺寸与你设定的尺寸一致，除非有外边距。</p>
<p>如何切换这两种模型：</p>
<p>在CSS3中，可以通过设置元素的box-sizing属性来切换盒模型。box-sizing属性有两个值：content-box和border-box。</p>
<p>当box-sizing设置为content-box时，使用的是标准盒模型。元素的width和height只包括内容的宽度和高度，内边距和边框会增加元素的实际显示尺寸。<br>当box-sizing设置为border-box时，使用的是IE盒模型。元素的width和height包括内容、内边距和边框的总宽度和总高度，元素的实际显示尺寸与你设定的尺寸一致。</p>
<h3 id="如何实现响应式布局？介绍几种常见的方法和技术"><a href="#如何实现响应式布局？介绍几种常见的方法和技术" class="headerlink" title="如何实现响应式布局？介绍几种常见的方法和技术"></a>如何实现响应式布局？介绍几种常见的方法和技术</h3><p>一套代码适应不同的屏幕尺寸。<br>1、百分比布局</p>
<p>百分比相对于包含块计算，元素的位置和尺寸由包含块决定，默认是最近祖先块元素的内容区域，width\top\bottom百分比值由包含块的width决定，height\left\right\margin\padding百分比值由包含块的height决定</p>
<p>2、媒体查询布局</p>
<p>通过@media 媒体查询，可以通过给不同屏幕的大小编写不同的样式来实现响应式的布局。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">500px</span>;</span><br><span class="line"><span class="attribute">background-color</span>: aqua;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width:</span> <span class="number">1280px</span>) &#123;</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width:</span> <span class="number">980px</span>) &#123;</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width:</span> <span class="number">765px</span>) &#123;</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>响应式缺点：如果浏览器大小改变时，需要改变的样式太多，那么多套样式代码会很繁琐。</p>
<p>3、rem 响应式布局</p>
<p>em 是相对于 html 根元素的字体大小的单位。</p>
<p>我们通过修改 html 中 font-size 的字体大小来控制 rem 的大小。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123; <span class="attribute">font-size</span>: <span class="number">10px</span>;&#125;<span class="selector-class">.box</span> &#123; <span class="attribute">width</span>: <span class="number">10rem</span>; <span class="attribute">height</span>: <span class="number">20rem</span>;&#125;</span><br></pre></td></tr></table></figure>
<p>当 html 中 font-size: 10px; 时，此时 1rem = 10px，所以 box 盒子的宽高分别为：100px 和 200px;</p>
<p>当我们把 html 中 font-size: 20px; 时，此时 1rem = 20px,此时 box 盒子的宽高就为 200px 和 400px;</p>
<p>在实际的开发中，我们通常会以 750px 的移动端设计稿来开发。1rem = 75px</p>
<p>我们在代码写完后，统一会把所有 px 单位全部转成 rem 来实现.<br>js 动态修改 html 根元素的 font-size 的大小，能适配不同尺寸的屏幕</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">initPage()</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initPage</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> clientWidth =</span><br><span class="line">    <span class="built_in">document</span>.documentElement.clientWidth || <span class="built_in">document</span>.body / clientWidth <span class="comment">//获取屏幕可视区宽</span></span><br><span class="line">  <span class="keyword">var</span> html = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;html&quot;</span>)[<span class="number">0</span>] <span class="comment">//获取html根元素</span></span><br><span class="line">  html.style.fontSize = clientWidth / <span class="number">10</span> + <span class="string">&quot;px&quot;</span> <span class="comment">//动态设置font-size大小</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">window</span>.onresize = initPage</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>flexible.js 原理就是根据不同的屏幕宽度动态的设置网页中 html 根节点的 font-size</p>
<p>4、vw 和 vh响应式布局<br>vw 和 vh 分别相对的是视图窗口的宽度和视图窗口的高度。<br>在宽为 750px 的设计稿下，把 px 转换为 vw，是用 px/7.5 得到对应的 vw 单位，即750px为100vw</p>
<p>5、flex 弹性布局</p>
<p>在父元素上，我们经常会用到的有关弹性布局的属性主要有 flex-direction , flex-wrap , justify-content , align-items , align-content ，这几个属性分别从 主轴的方向、是否换行、项目在主轴上的对齐方式、项目在交叉轴上的对齐方式、项目在多根轴线上的对齐方式来规范了项目在父元素中的弹性。</p>
<p>在子元素上，我们经常会用到的有关弹性布局的属性主要有 order , flex-grow , flex-shrink ,flex-basis , align-self ，这几个属性分别从 项目的排序、项目放大比例、项目缩小比例、项目占据主轴空间、单个项目在交叉轴上的对齐方式来规范了项目自身的弹性。</p>
<h3 id="实现数组去重的方法有哪些？"><a href="#实现数组去重的方法有哪些？" class="headerlink" title="实现数组去重的方法有哪些？"></a>实现数组去重的方法有哪些？</h3><p><strong>1、使用Set数据结构（ES6）：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">let</span> uniqueArray = [...new <span class="built_in">Set</span>(array)];</span><br></pre></td></tr></table></figure>
<p><strong>2、借助indexOf函数: indexOf() 方法返回数组中第一次出现给定元素的下标，如果不存在则返回 -1.</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">let</span> uniqueArray = []</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">  <span class="keyword">if</span> (uniqueArray.indexOf(array[i] === -<span class="number">1</span>)) &#123;</span><br><span class="line">    uniqueArray.push(array[i])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>3、借助filter方法:</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">let</span> uniqueArray = array.filter(<span class="function">(<span class="params">element, index, self</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> self.indexOf(element) === -<span class="number">1</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>4、利用reduce方法:</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">let</span> uniqueArray = array.reduce(<span class="function">(<span class="params">calcResult, current</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!calcResult.includes(current)) &#123;</span><br><span class="line">    calcResult.push(current)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> calcResult</span><br><span class="line">&#125;, [])</span><br></pre></td></tr></table></figure>
<p><strong>性能优化：</strong></p>
<p>如何提高网页加载速度和首屏渲染时间？<br>资源压缩</p>
<p>如何减少重绘和回流？请举例说明。</p>
<ol>
<li><strong>批量修改DOM和样式</strong>：</li>
</ol>
<ul>
<li>尽量将多个DOM操作集中在一起执行，而不是分散在不同的事件或者循环中逐个修改。例如：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不好的做法（每次循环都会引起回流）</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line"> <span class="built_in">document</span>.getElementById(<span class="string">&#x27;list&#x27;</span>).style.height = i + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 好的做法（一次性设置，仅触发一次回流）</span></span><br><span class="line"><span class="keyword">let</span> newHeight;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line"> newHeight = i + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&#x27;list&#x27;</span>).style.height = newHeight;</span><br></pre></td></tr></table></figure>
<ol>
<li><strong>使用CSS类代替内联样式</strong>：</li>
</ol>
<ul>
<li>修改类名而不是直接修改元素样式，可以避免连续的样式变更引起的重绘。</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* CSS */</span></span><br><span class="line"><span class="selector-class">.hidden</span> &#123; <span class="attribute">display</span>: none; &#125;</span><br><span class="line"><span class="selector-class">.visible</span> &#123; <span class="attribute">display</span>: block; &#125;</span><br><span class="line"></span><br><span class="line">// <span class="selector-tag">JavaScript</span></span><br><span class="line">element.classList.add(&#x27;hidden&#x27;); // 更改类名而非 style.display</span><br></pre></td></tr></table></figure>
<ol>
<li><strong>避免不必要的布局信息查询</strong>：</li>
</ol>
<ul>
<li>查询布局信息（如offsetTop/Left、scrollWidth/Height等）也会触发回流。在不需要精确值时，考虑延后获取或使用MutationObserver观察变化。</li>
</ul>
<ol start="2">
<li><strong>利用层叠上下文（Composite Layers）</strong>：</li>
</ol>
<ul>
<li>如果元素有独立动画，可以通过<code>will-change</code>属性或者3D变换（translateZ(0)）创建一个新的层，使得重绘只发生在单独的合成层上，不影响主文档流。</li>
</ul>
<ol start="3">
<li><strong>使用CSS3硬件加速</strong>：</li>
</ol>
<ul>
<li>对于动画，使用transform和opacity属性，这两个属性的变化不会触发重排，只会触发重绘，并且可以被GPU硬件加速。</li>
</ul>
<ol start="4">
<li><strong>虚拟DOM</strong>：</li>
</ol>
<ul>
<li>使用像React或Vue这样的现代前端框架，它们提供了虚拟DOM机制，只有当实际视图需要更新时才会对比并最小化地更新真实DOM，从而减少回流和重绘的发生。</li>
</ul>
<ol start="5">
<li><strong>懒加载和异步更新</strong>：</li>
</ol>
<ul>
<li>对于不在可视区域内的图片或动态内容，延迟加载直到进入视窗再进行渲染，可以有效避免非必要的计算和渲染。</li>
</ul>
<ol start="6">
<li><strong>分离读写操作</strong>：</li>
</ol>
<ul>
<li>如果既有读取又有修改DOM的操作，尽量先完成读取，然后集中进行写入，避免读写交错引起的多次回流。</li>
</ul>
<ol start="7">
<li><strong>减少不必要的DOM节点数量</strong>：</li>
</ol>
<ul>
<li>减少冗余DOM节点和深度嵌套结构，特别是对于动态生成的内容，可以显著降低回流发生的频率和范围。</li>
</ul>
<p>通过上述方法和原则，可以有效地减少重绘和回流，从而提高页面的运行效率和用户交互体验。</p>
<h3 id="请解释前端资源懒加载和预加载的策略"><a href="#请解释前端资源懒加载和预加载的策略" class="headerlink" title="请解释前端资源懒加载和预加载的策略"></a>请解释前端资源懒加载和预加载的策略</h3><p>前端资源懒加载（Lazy Loading）和预加载（Preloading）是两种截然不同的资源加载策略，它们分别用于优化网页性能和用户体验：</p>
<p><strong>懒加载（Lazy Loading）</strong>：<br>懒加载是一种按需加载的技术，主要用于延后加载那些并非页面初始渲染所必需的资源，尤其是对于长页面或包含大量图片、视频等内容的网站尤其有用。具体来说，懒加载的做法包括但不限于：</p>
<ul>
<li><p>图片懒加载：当页面加载时，不是一次性加载所有图片，而是仅加载首屏可见区域的图片，其他图片在用户滚动到相应位置时才开始加载，从而减少初次加载的带宽消耗和时间成本。</p>
<ul>
<li>懒加载通常应用于图片、视频、Ajax请求等领域，通过监听滚动事件、 Intersection Observer API 等方式实现。<br>IntersectionObserver API用于监控dom元素是否进入可视区域或者与某个祖先元素的交叉状态</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> observer = <span class="keyword">new</span> IntersectionObserver(<span class="function">(<span class="params">entries, observer</span>) =&gt;</span> &#123;</span><br><span class="line">  entries.forEach(<span class="function"><span class="params">entry</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (entry.isIntersecting) &#123; <span class="comment">// 如果元素进入了可视区域</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;Element is now visible&#x27;</span>);</span><br><span class="line">      <span class="comment">// 在这里可以进行懒加载图片或其他资源的操作</span></span><br><span class="line">      loadImage(entry.target);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;, &#123; <span class="attr">threshold</span>: <span class="number">0.5</span> &#125;); <span class="comment">// 设置阈值为0.5，表示当元素50%的部分进入视窗时触发回调</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 观察目标元素</span></span><br><span class="line">observer.observe(<span class="built_in">document</span>.querySelector(<span class="string">&#x27;#lazy-image&#x27;</span>));</span><br><span class="line"><span class="comment">// 动态加载图片</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadImage</span>(<span class="params">imageElement</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 假设我们有一个数据结构存储了需要懒加载图片的真实URL</span></span><br><span class="line">  <span class="keyword">const</span> imageSources = &#123;</span><br><span class="line">    <span class="string">&#x27;lazy-image-1&#x27;</span>: <span class="string">&#x27;path/to/image1.jpg&#x27;</span>,</span><br><span class="line">    <span class="comment">// ...其他图片路径</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 获取该元素对应的图片源</span></span><br><span class="line">  <span class="keyword">let</span> src = imageSources[imageElement.id]; <span class="comment">// 这里假设元素id对应图片源的键名</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 确保已经获取到图片源</span></span><br><span class="line">  <span class="keyword">if</span> (src) &#123;</span><br><span class="line">    <span class="comment">// 创建一个新的Image对象</span></span><br><span class="line">    <span class="keyword">let</span> img = <span class="keyword">new</span> Image();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 当图片加载完成时执行的回调函数</span></span><br><span class="line">    img.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 图片加载成功后，将src属性赋给DOM元素</span></span><br><span class="line">      imageElement.src = src;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// 可能还需要添加一些额外逻辑，比如显示加载完成后的效果</span></span><br><span class="line">      imageElement.classList.remove(<span class="string">&#x27;loading&#x27;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 图片加载失败时的处理</span></span><br><span class="line">    img.onerror = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.error(<span class="string">&#x27;Failed to load image:&#x27;</span>, src);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 开始加载图片</span></span><br><span class="line">    img.src = src;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.warn(<span class="string">&#x27;No image source found for element with id:&#x27;</span>, imageElement.id);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>批量图片懒加载：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt; img class=&quot;lazy&quot; data-src=&quot;path/to/image1.jpg&quot; alt=&quot;Lazy loaded image&quot;&gt;</span><br><span class="line"><span class="comment">&lt;!-- 其他需要懒加载的图片...</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 初始化Intersection Observer实例</span></span><br><span class="line"><span class="keyword">let</span> lazyImages = [];</span><br><span class="line"><span class="keyword">const</span> observer = <span class="keyword">new</span> IntersectionObserver(</span><br><span class="line">  (entries, observer) =&gt; &#123;</span><br><span class="line">    entries.forEach(<span class="function">(<span class="params">entry</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (entry.isIntersecting) &#123;</span><br><span class="line">        loadAndReplaceImage(entry.target);</span><br><span class="line">        observer.unobserve(entry.target);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">threshold</span>: <span class="number">0.5</span> &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 收集所有需要懒加载的图片</span></span><br><span class="line"><span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.lazy&#x27;</span>).forEach(<span class="function">(<span class="params">img</span>) =&gt;</span> &#123;</span><br><span class="line">  lazyImages.push(img);</span><br><span class="line">  observer.observe(img);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 加载并替换图片的函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadAndReplaceImage</span>(<span class="params">imgElement</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> realSrc = imgElement.dataset.src;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 创建新的Image对象</span></span><br><span class="line">  <span class="keyword">let</span> newImage = <span class="keyword">new</span> Image();</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 图片加载成功</span></span><br><span class="line">  newImage.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    imgElement.src = realSrc;</span><br><span class="line">    imgElement.classList.remove(<span class="string">&#x27;lazy&#x27;</span>); <span class="comment">// 移除懒加载类，可选</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 图片加载失败</span></span><br><span class="line">  newImage.onerror = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">&#x27;Failed to load image:&#x27;</span>, realSrc);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 开始加载图片</span></span><br><span class="line">  newImage.src = realSrc;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听滚动事件，仅当Intersection Observer不支持时才需要</span></span><br><span class="line"><span class="keyword">if</span> (<span class="string">&#x27;IntersectionObserver&#x27;</span> <span class="keyword">in</span> <span class="built_in">window</span>) &#123;</span><br><span class="line">  <span class="comment">// 如果浏览器支持Intersection Observer，则无需额外处理滚动事件</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// 若不支持Intersection Observer，可以在此处添加滚动事件监听并手动检查图片是否在视口中</span></span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;scroll&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 实现滚动时检查图片位置的逻辑</span></span><br><span class="line">    <span class="comment">// 但请注意，这种方法效率较低，应尽量优先使用Intersection Observer API</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>动态模块懒加载：在单页应用（SPA）中，根据用户的导航行为，延迟加载未访问路由对应的JavaScript或CSS资源。</p>
</li>
</ul>
<p>懒加载的优势在于：</p>
<ul>
<li>减少初始加载时间，提高页面的首屏加载速度。</li>
<li>减轻服务器压力，特别是当同时在线用户数较多时，能够显著降低服务器带宽需求。</li>
<li>改善用户在移动设备上浏览时的数据流量消耗。</li>
</ul>
<p><strong>预加载（Preloading）</strong>：<br>预加载则是指在用户尚未明确请求之前，预测并主动加载可能会用到的资源。这可以是即将浏览到的图片、视频，或者是即将跳转的页面所需的资源等。例如：</p>
<ul>
<li>预加载图片：创建一个新的Image对象，设置其<code>src</code>属性指向待加载的图片地址，浏览器会在后台开始加载，一旦用户需要时，图片已存在于缓存中，可以直接渲染。</li>
<li>预加载资源链接：通过HTML <code>&lt;link rel=&quot;preload&quot;&gt;</code> 标签预先告知浏览器加载指定的资源，这些资源可能是CSS样式表、JavaScript文件或其他类型的内容。</li>
</ul>
<p>预加载的优点在于：</p>
<ul>
<li>缩短用户交互时的等待时间，提升用户体验，因为相关资源已经在用户可能需要之前加载完毕。</li>
<li>当用户实际访问时，资源可以直接从缓存中读取，减少了网络延迟。</li>
</ul>
<p>综合来看，懒加载和预加载虽然方向相反，但都是为了优化网页性能和用户体验，只是应用场景和目标有所差异。懒加载适用于节省初次加载资源量和时间的情况，而预加载更注重提升后续操作的流畅度和响应性。</p>
<h3 id="请描述CommonJS、AMD、ES6-Modules之间的区别"><a href="#请描述CommonJS、AMD、ES6-Modules之间的区别" class="headerlink" title="请描述CommonJS、AMD、ES6 Modules之间的区别"></a>请描述CommonJS、AMD、ES6 Modules之间的区别</h3><p>CommonJS、AMD 和 ES6 Modules（也称为 ECMAScript Modules，简称 ESM）是JavaScript中三种不同的模块化规范，它们的主要区别在于设计目的、工作原理以及使用场景：</p>
<ol>
<li><strong>CommonJS</strong>：</li>
</ol>
<ul>
<li>设计初衷：CommonJS 主要应用于服务器端，由 Node.js 实现并流行起来，适用于非浏览器环境。</li>
<li>工作原理：CommonJS 是同步的模块加载机制，模块在运行时通过<code>require</code>函数导入，通过<code>module.exports</code>或<code>exports</code>导出。每个模块在执行时有自己的全局作用域，模块加载后立即执行，输出的是导出对象的一个副本。</li>
<li>使用场景：常用于Node.js的服务器端编程，如在express框架中加载中间件和路由模块。</li>
</ul>
<ol start="2">
<li>**Asynchronous Module Definition (AMD)**：</li>
</ol>
<ul>
<li>设计初衷：AMD 是面向浏览器环境设计的，由 RequireJS 首先提出并广泛应用，解决浏览器环境下异步加载模块的需求。</li>
<li>工作原理：AMD 使用异步方式加载模块，模块的加载和执行是分离的。通过<code>define</code>函数定义模块，通过<code>require</code>函数异步加载模块，并在回调函数中使用加载完成的模块。AMD 支持模块的动态加载和依赖管理。</li>
<li>使用场景：适用于浏览器端的复杂单页面应用，特别是需要异步加载和模块按需加载的场景。</li>
</ul>
<ol start="3">
<li>**ECMAScript Modules (ES6 Modules)**：</li>
</ol>
<ul>
<li>设计初衷：ES6 Modules 是 ECMAScript 6 标准中正式引入的模块系统，它既适用于浏览器环境也适用于非浏览器环境。</li>
<li>工作原理：ESM 使用<code>import</code>关键字导入模块，通过<code>export</code>关键字导出模块成员。模块的加载是静态的（静态分析时就可以确定模块依赖），并且默认支持异步加载（尽管现代浏览器也支持同步模块加载）。模块在导入时不会立即执行，而是等到导入它的模块需要时才执行。</li>
<li>使用场景：现代浏览器和Node.js（v14+ 版本后支持原生ESM）中广泛使用。ESM已经成为主流的模块化标准，并逐渐取代CommonJS和AMD成为统一的模块化解决方案。</li>
</ul>
<p>总结来说，CommonJS 适合于服务器端的同步环境，AMD 主要解决浏览器环境下的异步模块加载问题，而 ES6 Modules 则是新一代标准化的模块系统，旨在为浏览器和服务器两端提供一种统一的、强大的模块化解决方案。</p>
<h3 id="如何配置Webpack进行项目构建？列举几个常用的Loader和Plugin"><a href="#如何配置Webpack进行项目构建？列举几个常用的Loader和Plugin" class="headerlink" title="如何配置Webpack进行项目构建？列举几个常用的Loader和Plugin"></a>如何配置Webpack进行项目构建？列举几个常用的Loader和Plugin</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">name: <span class="string">&#x27;[name].bundle.js&#x27;</span>,</span><br><span class="line">  path: path.resolve(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// Loader配置</span></span><br><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    <span class="comment">// 处理JS文件的Babel Loader</span></span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">      exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">      use: [<span class="string">&#x27;babel-loader&#x27;</span>],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 处理CSS文件的CSS Loader和Style Loader</span></span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">      use: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 处理图片的File Loader</span></span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.(png|jpg|jpeg|gif|svg)$/</span>,</span><br><span class="line">      use: [&#123;</span><br><span class="line">        loader: <span class="string">&#x27;file-loader&#x27;</span>,</span><br><span class="line">      &#125;]</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>Webpack是一个模块打包工具，用于处理前端资源的转换、合并、压缩等工作。配置Webpack进行项目构建主要涉及以下几个步骤：</p>
<ol>
<li><p>创建<code>webpack.config.js</code>配置文件。</p>
</li>
<li><p>配置入口（entry）和出口（output）。</p>
</li>
<li><p>添加Loader用于处理不同类型的文件。</p>
</li>
<li><p>使用Plugin增强Webpack功能。</p>
<p>以下是配置Webpack的基本结构以及一些常用的Loader和Plugin示例：</p>
</li>
</ol>
<p> <strong>基本配置示例：</strong></p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// 入口文件</span></span><br><span class="line">  entry: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">  <span class="comment">// 输出目录和文件名</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    file  options: &#123;</span><br><span class="line">            outputPath: <span class="string">&#x27;images/&#x27;</span>,</span><br><span class="line">            publicPath: <span class="string">&#x27;../images/&#x27;</span>,</span><br><span class="line">            name: <span class="string">&#x27;[name].[hash:8].[ext]&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// Plugin配置</span></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="comment">// 生成HTML文件的HtmlWebpackPlugin</span></span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      template: <span class="string">&#x27;./public/index.html&#x27;</span>,</span><br><span class="line">      filename: <span class="string">&#x27;index.html&#x27;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// 优化CSS提取的MiniCssExtractPlugin</span></span><br><span class="line">    <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">      filename: <span class="string">&#x27;[name].css&#x27;</span>,</span><br><span class="line">      chunkFilename: <span class="string">&#x27;[id].css&#x27;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// 代码压缩的UglifyJsPlugin（Webpack 4）或TerserPlugin（Webpack 5）</span></span><br><span class="line">    <span class="keyword">new</span> TerserPlugin(),</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p> <strong>常用Loader：</strong></p>
<ul>
<li><strong>Babel Loader</strong>：用于将ES6及以上版本的JavaScript代码转换为向后兼容的JavaScript代码。</li>
<li><strong>CSS Loader</strong>：将CSS文件作为模块导入，支持CSS Modules和CSS源码转换。</li>
<li><strong>Style Loader</strong> 或 <strong>MiniCssExtractPlugin</strong>：前者将CSS内联到JavaScript中，后者则将CSS抽取到单独的CSS文件中。</li>
<li><strong>File Loader</strong> 或 <strong>Url Loader</strong>：处理项目中的图片、字体等文件，将其转化为base64编码或输出到指定目录。</li>
<li><strong>TS Loader</strong>：处理TypeScript文件，将其转换为JavaScript。</li>
</ul>
<p> <strong>常用Plugin：</strong></p>
<ul>
<li><p><strong>HtmlWebpackPlugin</strong>：根据模板生成HTML文件，并自动注入编译产出的JS/CSS资源。</p>
</li>
<li><p><strong>MiniCssExtractPlugin</strong>：从JS文件中提取CSS代码，生成单独的CSS文件。</p>
</li>
<li><p><strong>CopyWebpackPlugin</strong>：复制项目中的静态资源到输出目录。</p>
</li>
<li><p><strong>CleanWebpackPlugin</strong>：在每次构建前清除输出目录。</p>
</li>
<li><p><strong>DefinePlugin</strong>：在编译阶段替换全局变量，常用于设置环境变量。</p>
</li>
<li><p><strong>UglifyJsPlugin</strong>（Webpack 4）或 <strong>TerserPlugin</strong>（Webpack 5）：用于压缩JavaScript代码，优化文件大小。</p>
<p>根据项目需求，还可以添加更多Loader和Plugin，例如SourceMap相关的插件、热更新插件（HotModuleReplacementPlugin）等。</p>
</li>
</ul>
<p><strong>异步编程：</strong></p>
<p>请解释Promise、async/await的区别与联系，并写出对应的错误处理方式。</p>
<p>Promise、async/await都是JavaScript中用于处理异步操作的重要工具，它们之间存在紧密的联系和区别。</p>
<p>Promise</p>
<p>Promise是JavaScript中用于处理异步操作的对象。它有三种状态：pending（进行中）、fulfilled（已成功）和rejected（已失败）。一旦Promise的状态从pending变为fulfilled或者rejected，就不会再改变。Promise的主要方法是.then()（用于指定fulfilled时的回调函数）和.catch()（用于指定rejected时的回调函数）。</p>
<p>Async/Await</p>
<p>Async/Await是基于Promise的语法糖，使得异步代码看起来像同步代码，易于理解和编写。async函数总是返回一个Promise对象，await只能用在async函数内部，await后面跟的是一个Promise对象，返回的是Promise对象的结果。</p>
<p>区别</p>
<p>语法：Promise的语法较为繁琐，需要通过.then()和.catch()来处理异步操作的结果和错误。而async/await的语法更接近于同步代码，更易于理解和编写。<br>错误处理：在Promise中，错误需要通过.catch()方法捕获。而在async/await中，错误可以直接通过try/catch捕获。<br>联系</p>
<p>基于Promise：async/await实际上是基于Promise实现的，async函数返回的是一个Promise对象。<br>目的相同：无论是Promise还是async/await，它们的主要目的都是为了处理JavaScript中的异步操作，使得代码更易于管理和理解。<br>错误处理方式</p>
<p>Promise的错误处理：</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;  </span><br><span class="line">    <span class="comment">// 模拟异步操作  </span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;  </span><br><span class="line">        reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;Promise failed&#x27;</span>));  </span><br><span class="line">    &#125;, <span class="number">1000</span>);  </span><br><span class="line">&#125;);  </span><br><span class="line"></span><br><span class="line">promise  </span><br><span class="line">    .then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;  </span><br><span class="line">        <span class="built_in">console</span>.log(result);  </span><br><span class="line">    &#125;)  </span><br><span class="line">    .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;  </span><br><span class="line">        <span class="built_in">console</span>.error(<span class="string">&#x27;Promise error:&#x27;</span>, error);  </span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<p>Async/Await的错误处理：</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">asyncFunction</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">try</span> &#123;  </span><br><span class="line">        <span class="keyword">let</span> result = <span class="keyword">await</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;  </span><br><span class="line">            <span class="comment">// 模拟异步操作  </span></span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;  </span><br><span class="line">                reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;Async/Await failed&#x27;</span>));  </span><br><span class="line">            &#125;, <span class="number">1000</span>);  </span><br><span class="line">        &#125;);  </span><br><span class="line">        <span class="built_in">console</span>.log(result);  </span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;  </span><br><span class="line">        <span class="built_in">console</span>.error(<span class="string">&#x27;Async/Await error:&#x27;</span>, error);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">asyncFunction();</span><br></pre></td></tr></table></figure>
<p>  在以上两个例子中，无论是使用Promise还是async/await，当异步操作失败时，都会通过.catch()方法或try/catch块捕获并处理错误。</p>
<h3 id="前端性能优化"><a href="#前端性能优化" class="headerlink" title="前端性能优化"></a>前端性能优化</h3><ul>
<li>代码优化<ul>
<li>压缩和合并css和js等资源文件，使用uglifyjs, Terser</li>
<li>避免全局变量，减少查找全局过程消耗时间，补全文件引用路径，减少查询消耗</li>
<li>利用冒泡给父元素绑定事件代理子元素事件处理，事件委托减少事件注册绑定梳理，减少内存消耗</li>
<li>优化css选择器避免过于复杂的选择器查询影响性能</li>
<li>更新体积更小的新版本，比如xlsx新版本比旧版本体积小，且支持按需引入<code>import &#123;utils&#125; from &#39;xlsx</code>，可以tree-shaking；</li>
<li>尽量减少第三方库的使用，比如时间格式化库，手写实现，减少代码体积</li>
<li>小数据量的请求合并到其他接口，减少首屏请求数量</li>
<li>页面响应慢可以添加骨架屏或者loading</li>
</ul>
</li>
<li>图片优化<ul>
<li>压缩图片资源，比如使用tinypng工具压缩图片</li>
<li>选用合适的图片格式，比如jpeg, png, webp<ul>
<li>jpeg：有损压缩格式，高压缩率 优点：保持高质量图片同时文件较小 缺点：压缩损失图片质量</li>
<li>png：无损压缩格式 优点：保留原始图像的质量，支持透明通道， 缺点：文件大</li>
<li>webp：具有较高的压缩率和图像质量，支持透明通道和动画，缺点：老版本浏览器不支持此格式</li>
</ul>
</li>
<li>使用srcset和sizes属性针对不同屏幕尺寸引入不同图片大小的资源</li>
</ul>
</li>
<li>网络请求优化<ul>
<li>减少http请求：合并css和js资源，使用css scriptes和base64图片</li>
<li>使用cdn部署静态资源，利用cdn和缓存和分布式特性</li>
<li>浏览器缓存：设置http header（Cache-control, Etag, Last-Modified）缓存资源减少http请求</li>
</ul>
</li>
<li>渲染优化<ul>
<li>减少dom元素布局变动和style变动，减少dom重排和重绘，使用DocumentFragment</li>
<li>使用虚拟列表：大量数据列表使用虚拟列表，只渲染当前视窗的数据，随着滚动，销毁不在视窗的元素并创建进入视窗的元素</li>
<li>对于复杂计算和处理逻辑，使用Web Worker线程处理，避免阻塞主线程</li>
<li>使用css3硬件加速动画性能，比如will-change, transform, requestAnimationFrame</li>
</ul>
</li>
<li>代码拆分和加载<ul>
<li>使用webpack将文件拆分成chunk，在首屏按需加载模块</li>
<li>动态import（）实现路由懒加载</li>
<li>使用preload和prefetch对关键性资源和后续可能访问资源进行提前加载</li>
<li>异步加载js避免阻塞主线程，defer， async</li>
</ul>
</li>
<li>服务器SSR渲染：提高首屏加载速度，更好的SEO</li>
<li>对于静态页面使用SSG渲染：在构建过程就生成了页面</li>
</ul>
<p>杭萧crm通过客户管理，项目管理，办公功能以及数据统计与分析能力，为用户提供了一个全面、高效的工作平台。<br>包含工作台，排行榜，待办，我的四个核心板块。<br>工作台作为首界面展示了各项业务的核心数据，包含不同项目阶段的统计以及对应的财务指标；通过工作指示、日总结、任务简报等功能模块确保员工掌握自身工作进度和目标；员工分布、员工在线统计等功能配合团队业绩个人业绩使管理者更清晰掌握员工和业务的状态。</p>
<p>排行榜：结合规章制度按月度，季度，年度等对全集团，分公司，部门以及个人业绩进行多项关键考核指标排名，促进良性竞争，掌控业务进度。</p>
<p>待办包含全业务流程审批，加强内部协作。</p>
<p>我的板块包含工作总结，打卡记录等自我管理模块，以及客户模块和通讯录，还详细划分项目各阶段入口，保证用户掌控项目全过程，包括从跟进，有效，投标，中标，合同签订到收款的过程，形成了一套完整的项目管理和客户关系管理的体系。</p>
<h3 id="组件封装之messageBox"><a href="#组件封装之messageBox" class="headerlink" title="组件封装之messageBox"></a>组件封装之messageBox</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click&#x3D;&quot;showMessageBox(&#39;是否确认删除？&#39;, &#123;</span><br><span class="line">    confirm: () &#x3D;&gt; &#123; &#x2F;&#x2F; todo something &#125;,</span><br><span class="line">    cancel: () &#x3D;&gt; &#123; &#x2F;&#x2F; todo something &#125;</span><br><span class="line">  &#125;)&quot;&gt;删除&lt;&#x2F;button&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; showMessageBox &#125; from &#39;.&#x2F;showMessageBox.js&#39;</span><br><span class="line">export default &#123;</span><br><span class="line">  methods: &#123; showMessageBox &#125; &#x2F;&#x2F; 或者全局</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<p><strong>组件封装思路：用createVnode或者jsx编写组件结构—–用render方法渲染在一个div里——用appendChild方法添加到页面.</strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// messageBox.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; createVnode , render &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">showMessageBox</span>(<span class="params">content, handler</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// js: vnode</span></span><br><span class="line">  <span class="comment">// let messageBox = createVnode(&#x27;div&#x27;, &#123;</span></span><br><span class="line">  <span class="comment">//   class: &#x27;divcover&#x27;,</span></span><br><span class="line">  <span class="comment">//   [</span></span><br><span class="line">  <span class="comment">//     createVnode(&#x27;div&#x27;, &#123;</span></span><br><span class="line">  <span class="comment">//       class: &#x27;messageContent&#x27;</span></span><br><span class="line">  <span class="comment">//     &#125;, content)</span></span><br><span class="line">  <span class="comment">//   ]</span></span><br><span class="line">  <span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// jsx：项目需支持</span></span><br><span class="line">  <span class="keyword">let</span> div = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">  <span class="keyword">let</span> messageBox = <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cover&quot;</span>&gt;</span></span></span><br><span class="line">    &lt;div class=&quot;content&quot;&gt;</span><br><span class="line">      &lt;div&gt;&#123; content &#125;&lt;/div&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;button onClick=&#123;() =&gt; &#123;</span><br><span class="line">          // 移除</span><br><span class="line">          document.body.removeChild(div)</span><br><span class="line">          console.log(&#x27;取消&#x27;)</span><br><span class="line">          handler.cancel &amp;&amp; handler.cancel()</span><br><span class="line">        &#125;&#125;&gt;取消&lt;/button&gt;</span><br><span class="line">        &lt;button onClick=&#123;() =&gt; &#123;</span><br><span class="line">          // 移除</span><br><span class="line">          document.body.removeChild(div)</span><br><span class="line">          console.log(&#x27;确定&#x27;)</span><br><span class="line">          handler.confirm &amp;&amp; handler.confirm()</span><br><span class="line">        &#125;&#125;&gt;确定&lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 使用vue创建组件messageBox，用createVnode(messageBox)生成vnode</span></span><br><span class="line">  render(messageBox, div)</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(div)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="怎样排查页面加载慢？"><a href="#怎样排查页面加载慢？" class="headerlink" title="怎样排查页面加载慢？"></a>怎样排查页面加载慢？</h3><ul>
<li><p>资源加载慢</p>
<ul>
<li>浏览器开发者工具-性能面板录制-查找netweork，查看哪些文件大，加载慢，当前页面不需要或者点击才需要的资源使用异步加载；按需加载页面资源；webpack工具打包压缩资源；开启gzip数据压缩</li>
</ul>
</li>
<li><p>js执行慢</p>
<ul>
<li>若js执行慢，则使用console.time或者perfomance.now检测哪段同步代码执行慢</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// console.time()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> aT = performance.now()</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i&lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">let</span> div = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">  div.innerHTML = i</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// console.timeEnd()</span></span><br><span class="line"><span class="keyword">let</span> bT = performance.now()</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(bT - aT)</span><br></pre></td></tr></table></figure>
<p>或者在网站index.html加入js代码将window.performance传给接口进行分析用户网站性能</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">  $.ajax(&#123;</span><br><span class="line">    url: <span class="string">&#x27;api/&#x27;</span>,</span><br><span class="line">    data: <span class="built_in">window</span>.performance</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="string">``</span></span><br><span class="line"></span><br><span class="line">  其他分析工具: 开发者工具lighthouse, js库web-vitals</span><br><span class="line"></span><br><span class="line">+ 页面绘制慢</span><br><span class="line"></span><br><span class="line">### 项目难点亮点</span><br><span class="line"></span><br><span class="line">+ 移动端</span><br><span class="line">  + 多屏幕适配：利用rem或者px转vw（webpack集成），媒体查询或js解决；</span><br><span class="line">  + 高还原设计稿要求</span><br><span class="line">+ B端公司后台</span><br><span class="line">  + 大文件上传、断点续传</span><br><span class="line">+ 可视化</span><br><span class="line">  + echarts图表，高度定制地图、流程图等</span><br><span class="line">+ websocket：实时消息提醒，在线多人协作</span><br><span class="line">+ webGL：3d模型</span><br><span class="line">+ canvas</span><br><span class="line"></span><br><span class="line">工作亮点：</span><br><span class="line"></span><br><span class="line">+ 前端规范定制，并落实到工程化工具：git提交自动eslint代码检查；git提交信息格式检查</span><br><span class="line">+ 封装组件：pc端一般组件二次封装（列表组件：查询+表格+分页+操作按钮：添加/导出等；添加/编辑表单弹窗组件：弹窗+表单；）</span><br><span class="line"></span><br><span class="line">### js对象的原始值转换</span><br><span class="line"></span><br><span class="line"><span class="built_in">Symbol</span>.toPrimitive是一种特殊的<span class="built_in">Symbol</span>值，它可以作为对象的属性键，用于定义对象在被转换为原始值时的行为。当一个对象被转换为原始值时，JavaScript引擎会尝试调用对象上的<span class="built_in">Symbol</span>.toPrimitive方法来确定转换的结果。比如对象&#123;[<span class="built_in">Symbol</span>.toPrimitive]: <span class="function">() =&gt;</span> <span class="number">1</span>&#125;转换成原始值就是<span class="number">1</span>。</span><br><span class="line"></span><br><span class="line">需要注意的是，<span class="built_in">Symbol</span>.toPrimitive必须为函数，不然会报错.</span><br><span class="line"></span><br><span class="line">**将对象转换成数字:**</span><br><span class="line"></span><br><span class="line">将对象转换成数字时，首先会调用<span class="built_in">Symbol</span>.toPrimitive方法，如果<span class="built_in">Symbol</span>.toPrimitive不存在或者返回的不是js原始值（以下省略原始值这一条规则），则会调用valueOf方法，如果valueOf不存在，则会调用toString方法，如果toString也不存在，转换就会报错：<span class="string">`TypeError: Cannot convert object to primitive value`</span>，意思是无法将对象转换成原始值。</span><br><span class="line">总的来说，调用顺序是：<span class="built_in">Symbol</span>.toPrimitive -&gt; valueOf -&gt; toString。</span><br><span class="line"></span><br><span class="line">对象的<span class="built_in">Symbol</span>.toStringTag属性，指向一个方法。在该对象上面调用<span class="built_in">Object</span>.prototype.toString方法时，如果这个属性存在，它的返回值会出现在toString方法返回的字符串之中，表示对象的类型。也就是说，这个属性可以用来定制[object <span class="built_in">Object</span>]或[object <span class="built_in">Array</span>]中object后面的那个字符串。</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">`js</span></span><br><span class="line"><span class="string">let obj = &#123;</span></span><br><span class="line"><span class="string">  [Symbol.toStringTag]: &#x27;abc&#x27; // </span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">obj.toString() // &#x27;[object abc]&#x27;</span></span><br><span class="line"><span class="string">String(obj) // &#x27;[object abc]&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// js中可以使用+号将其他类型转换成number，和Number()的作用一样，为了表达式的简洁，以下将使用+代替Number()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line">+&#123;[<span class="built_in">Symbol</span>.toPrimitive]: <span class="function">() =&gt;</span> <span class="number">0</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line">+&#123;<span class="attr">valueOf</span>: <span class="function">() =&gt;</span> <span class="number">1</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line">+&#123;<span class="attr">toString</span>: <span class="function">() =&gt;</span> <span class="number">2</span>&#125; <span class="comment">// 没错，toString方法可以返回number、boolean乃至其他类型</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line"><span class="comment">// 优先调用Symbol.toPrimitive，所以返回0</span></span><br><span class="line">+&#123;</span><br><span class="line">    [<span class="built_in">Symbol</span>.toPrimitive]: <span class="function">() =&gt;</span> <span class="number">0</span>,</span><br><span class="line">    valueOf: <span class="function">() =&gt;</span> <span class="number">1</span>,</span><br><span class="line">    toString: <span class="function">() =&gt;</span> <span class="number">2</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line"><span class="comment">// 如果返回的原始值不是`number`类型，则会再次进行转换；</span></span><br><span class="line"><span class="comment">// &#123;[Symbol.toPrimitive]: () =&gt; &quot;0&quot;&#125;转换成原始值为字符串&quot;0&quot;；</span></span><br><span class="line"><span class="comment">// 接着再将这个字符串&quot;0&quot;转换成数字0。</span></span><br><span class="line">+&#123;[<span class="built_in">Symbol</span>.toPrimitive]: <span class="function">() =&gt;</span> <span class="string">&quot;0&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// NaN</span></span><br><span class="line"><span class="comment">// 空对象中不存在Symbol.toPrimitive方法，会调用valueOf方法；</span></span><br><span class="line"><span class="comment">// 对象的valueOf默认会返回自身，也就是说没有返回原始值，继续调用toString方法；</span></span><br><span class="line"><span class="comment">// 对象的toString方法默认会返回&quot;[object &quot; + 对象.constructor.name + &quot;]&quot;，在这里将被转换成&quot;[object Object]&quot;；</span></span><br><span class="line"><span class="comment">// 由于&quot;[object Object]&quot;属于原始类型，则js将其转换成number类型，当然它一眼看上去就不是个数字，只能转换成了NaN。</span></span><br><span class="line">+&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 报错 TypeError: Cannot convert object to primitive value</span></span><br><span class="line"><span class="comment">// Object.create(null)创建的对象没有原型链，也就是没有valueOf和toString更没有Symbol.toPrimitive，所以只能转换失败了</span></span><br><span class="line">+<span class="built_in">Object</span>.create(<span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 666</span></span><br><span class="line"><span class="comment">// parseInt和parseFloat如果传入对象，会先将对象转换成字符串，可以参考“将对象转换成字符串”部分内容</span></span><br><span class="line"><span class="built_in">parseInt</span>(&#123;</span><br><span class="line">    [<span class="built_in">Symbol</span>.toPrimitive]: <span class="function">() =&gt;</span> <span class="string">&quot;666&quot;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 666</span></span><br><span class="line"><span class="comment">// Math对象中的方法如果传入了对象，先会将对象转换成number，然后才进行计算</span></span><br><span class="line"><span class="built_in">Math</span>.floor(&#123;</span><br><span class="line">    [<span class="built_in">Symbol</span>.toPrimitive]: <span class="function">() =&gt;</span> <span class="number">666.6</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line"><span class="comment">// null对象比较特殊，转换成number是0</span></span><br><span class="line">+<span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// NaN</span></span><br><span class="line"><span class="comment">// undefined对象比较特殊，转换成number是NaN</span></span><br><span class="line">+<span class="keyword">void</span> <span class="number">0</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>将对象转换成字符串:</strong></p>
<p>一般情况下，我们会使用String()或者xx.toString()将对象转换为字符串，但是他们是有些区别的。String()方法会优先尝试调用对象中的Symbol.toPrimitive方法；如果Symbol.toPrimitive不存在，则会尝试调用对象中的toString方法。<br>用String()转换对象成字符串的顺序为：Symbol.toPrimitive -&gt; toString，是的，不会调用valueOf。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &quot;Hello, Symbol.toPrimitive!&quot;</span></span><br><span class="line"><span class="built_in">String</span>(&#123;[<span class="built_in">Symbol</span>.toPrimitive]: <span class="function">() =&gt;</span> <span class="string">&quot;Hello, Symbol.toPrimitive!&quot;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// &quot;Hello, toString!&quot;</span></span><br><span class="line"><span class="built_in">String</span>(&#123;<span class="attr">toString</span>: <span class="function">() =&gt;</span> <span class="string">&quot;Hello, toString!&quot;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// &quot;Hello, Symbol.toPrimitive!&quot;</span></span><br><span class="line"><span class="built_in">String</span>(&#123;</span><br><span class="line">    [<span class="built_in">Symbol</span>.toPrimitive]: <span class="function">() =&gt;</span> <span class="string">&quot;Hello, Symbol.toPrimitive!&quot;</span>,</span><br><span class="line">    toString: <span class="function">() =&gt;</span> <span class="string">&quot;Hello, toString!&quot;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// &quot;[object Object]&quot;</span></span><br><span class="line"><span class="comment">// 空对象中不存在Symbol.toPrimitive方法，会调用toString方法；</span></span><br><span class="line"><span class="comment">// 对象的toString方法默认会返回&quot;[object &quot; + 对象.constructor.name + &quot;]&quot;，在这里将被转换成&quot;[object Object]&quot;；</span></span><br><span class="line"><span class="built_in">String</span>(&#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// &quot;[object Object]&quot;</span></span><br><span class="line"><span class="comment">// 由于对象转换成字符串时不会调用valueOf，所以会调用默认的toString方法，可以参考String(&#123;&#125;)</span></span><br><span class="line"><span class="built_in">String</span>(&#123;</span><br><span class="line">    valueOf: <span class="function">() =&gt;</span> <span class="string">&quot;Hello, valueOf!&quot;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// &quot;Hello, Symbol.toPrimitive!&quot;</span></span><br><span class="line"><span class="comment">// 使用模板字符串转换对象时，规则与String()相同，优先使用Symbol.toPrimitive</span></span><br><span class="line"><span class="string">`<span class="subst">$&#123;&#123;[<span class="built_in">Symbol</span>.toPrimitive]: () =&gt; <span class="string">&quot;Hello, Symbol.toPrimitive!&quot;</span>, toString: () =&gt; <span class="string">&quot;Hello, toString!&quot;</span>&#125;&#125;</span>`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 报错 TypeError: Cannot convert object to primitive value</span></span><br><span class="line"><span class="comment">// Object.create(null)创建的对象没有原型链，也就是没有toString更没有Symbol.toPrimitive，所以只能转换失败了</span></span><br><span class="line"><span class="comment">// 顺便一提，`$&#123;Object.create(null)&#125;`也会报这个错</span></span><br><span class="line"><span class="built_in">String</span>(<span class="built_in">Object</span>.create(<span class="literal">null</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// &quot;&#123;&#125;&quot;</span></span><br><span class="line"><span class="comment">// JSON.stringify会忽略对象中的方法，不受原始值转换规则的约束，所以这里的值为&quot;&#123;&#125;&quot;</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">    [<span class="built_in">Symbol</span>.toPrimitive]: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;a:1&#125;&quot;</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// &quot;null&quot;</span></span><br><span class="line"><span class="built_in">String</span>(<span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// &quot;undefined&quot;</span></span><br><span class="line"><span class="comment">// undefined不属于对象，放在这里只是为了方便对比</span></span><br><span class="line"><span class="comment">// void 0实际上就是undefined</span></span><br><span class="line"><span class="built_in">String</span>(<span class="keyword">void</span> <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p><strong>将对象转换成布尔值:</strong></p>
<p>对象转换成布尔值的规则比较特殊，不论对象里面是否有Symbol.toPrimitive、valueOf或者toString，都为true</p>
<p><strong>将对象转换成大整数（BigInt）:</strong></p>
<p>对象转换成BigInt的规则和转换成number的规则类似都是按照Symbol.toPrimitive -&gt; valueOf -&gt; toString的顺序</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 111n</span></span><br><span class="line">BigInt(&#123;</span><br><span class="line">    [<span class="built_in">Symbol</span>.toPrimitive]: <span class="function">() =&gt;</span> <span class="string">&quot;111&quot;</span>,</span><br><span class="line">    valueOf: <span class="function">() =&gt;</span> <span class="string">&quot;222&quot;</span>,</span><br><span class="line">    toString: <span class="function">() =&gt;</span> <span class="string">&quot;333&quot;</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="拖拽元素"><a href="#拖拽元素" class="headerlink" title="拖拽元素"></a>拖拽元素</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>拖拽<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.list</span> &#123;</span></span><br><span class="line">      margin-top: 2rem;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.item</span> &#123;</span></span><br><span class="line">      width: 300px;</span><br><span class="line">      height: 60px;</span><br><span class="line">      line-height: 60px;</span><br><span class="line">      background-color: green;</span><br><span class="line">      color: white;</span><br><span class="line">      border-radius: 10px;</span><br><span class="line">      padding-left: 10px;</span><br><span class="line">      margin-bottom: 10px;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.item</span><span class="selector-class">.moving</span> &#123;</span></span><br><span class="line">      background-color: transparent;</span><br><span class="line"><span class="css">      <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#eee</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">draggable</span>=<span class="string">&quot;true&quot;</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">draggable</span>=<span class="string">&quot;true&quot;</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">draggable</span>=<span class="string">&quot;true&quot;</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">draggable</span>=<span class="string">&quot;true&quot;</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>4<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">draggable</span>=<span class="string">&quot;true&quot;</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">draggable</span>=<span class="string">&quot;true&quot;</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>6<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 获取列表元素</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> list = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.list&#x27;</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> sourceNode = <span class="literal">null</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// 拖拽开始</span></span></span><br><span class="line"><span class="javascript">    list.ondragstart = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 在ondragstart中添加样式</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        e.target.classList.add(<span class="string">&#x27;moving&#x27;</span>);</span></span><br><span class="line">      &#125;, 0);</span><br><span class="line"><span class="javascript">      <span class="comment">// 记录拖拽开始时的元素</span></span></span><br><span class="line">      sourceNode = e.target</span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">    <span class="comment">// 拖拽进入</span></span></span><br><span class="line"><span class="javascript">    list.ondragenter = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 阻止默认行为</span></span></span><br><span class="line">      e.preventDefault();</span><br><span class="line"><span class="javascript">      <span class="comment">// 如果目标元素是列表或者拖拽开始时的元素，则直接返回</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (e.target === list || e.target === sourceNode) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">&#x27;打印&#x27;</span>, e.target);</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 获取列表中子元素的索引</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> children = [...list.children];</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> sourceIndex = children.indexOf(sourceNode);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> targetIndex = children.indexOf(e.target);</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 如果源元素索引小于目标元素索引，则目标元素向下移</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (sourceIndex &lt; targetIndex) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">&#x27;打印&#x27;</span>, <span class="string">&#x27;下移&#x27;</span>)</span></span><br><span class="line">        list.insertBefore(sourceNode, e.target.nextElementSibling);</span><br><span class="line"><span class="javascript">      <span class="comment">// 否则，目标元素向上移</span></span></span><br><span class="line"><span class="javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">&#x27;打印&#x27;</span>, <span class="string">&#x27;上移&#x27;</span>)</span></span><br><span class="line">        list.insertBefore(sourceNode, e.target);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">    <span class="comment">// 拖拽移动</span></span></span><br><span class="line"><span class="javascript">    list.ondragover = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 阻止默认行为</span></span></span><br><span class="line">      e.preventDefault();</span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">    <span class="comment">// 拖拽结束</span></span></span><br><span class="line"><span class="javascript">    list.ondragend = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 移除样式</span></span></span><br><span class="line"><span class="javascript">      e.target.classList.remove(<span class="string">&#x27;moving&#x27;</span>);</span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="大屏数据如何实现实时更新？"><a href="#大屏数据如何实现实时更新？" class="headerlink" title="大屏数据如何实现实时更新？"></a>大屏数据如何实现实时更新？</h3><ul>
<li>websocket</li>
<li>Server-Sent Events（SSE，服务器发送事件）是一种简单的技术，允许服务器通过HTTP连接向客户端推送实时更新。与WebSocket相比，SSE是一种单向通信机制，只允许服务器向客户端发送消息。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> dataList;</span><br><span class="line"><span class="comment">// 创建一个新的EventSource对象，连接到http://localhost:8080/getList这个地址</span></span><br><span class="line"><span class="keyword">const</span> source = <span class="keyword">new</span> EventSource(<span class="string">&#x27;http://localhost:8080/getList&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// EventSource: 0: connecting 1:open 2: closed</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听source对象打开连接的事件</span></span><br><span class="line">source.onopen = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;onopen---&#x27;</span>, event)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 监听source对象接收到消息的事件</span></span><br><span class="line">source.onmessage = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;onmessage---&#x27;</span>, event)</span><br><span class="line">  <span class="comment">// 将收到的消息转换为JSON格式，赋值给dataList</span></span><br><span class="line">  dataList = <span class="built_in">JSON</span>.parse(event.data)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;dataList&#x27;</span>, dataList)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 监听source对象发生错误的事件</span></span><br><span class="line">source.onerror = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;onerror---&#x27;</span>, event)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 监听source对象关闭连接的事件</span></span><br><span class="line">source.onclose = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;onclose---&#x27;</span>, event)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="函数参数和默认值"><a href="#函数参数和默认值" class="headerlink" title="函数参数和默认值"></a>函数参数和默认值</h3><p>函数参数默认值，传参为undefined才取默认值。<br>函数参数和arguments是一一对应的，比如fn(a,b) fn(1,2)。arguments[0]等于a，在函数中，修改a的值，arguments[0]也跟着改变，除非使用严格模式。<br>但是如果函数参数设置了默认值，修改a后，arguments[0]还是最初传参的值，不会跟随a改变。</p>
<p>函数如果设置了默认值，形参的长度计算到默认值前面，即fn(a,b=2,c),fn.length参数长度为1，fn(a,b,c=3),fn.length为2.</p>
<p>函数参数默认值即可以设置字面量也可以设置表达式，表达式的值只有在调用的时候才计算，即参数为undefined的时候才去计算表达式取默认值。</p>
<p>函数参数的暂时性死区，fn(a,b=getvalue(a))可以，但是fn(a=getvalue(b), b)会报错，let定义变量在声明前不可使用，暂时性死区.</p>
<h3 id="css属性值的计算过程"><a href="#css属性值的计算过程" class="headerlink" title="css属性值的计算过程"></a>css属性值的计算过程</h3><p>css属性值的计算过程computed style：</p>
<ul>
<li>1、确定声明值（找到作者和默认样式表没有冲突的属性直接确定下来属性值）</li>
<li>2、层叠（比较重要性，比较权重，比较源次序）</li>
<li>3、继承（对仍然没有值的属性若可以继承则使用继承，有些属性不能继承）</li>
<li>4、使用默认属性（对仍然没有值的属性直接使用默认值）。从每一个元素css属性没有值到所有css属性都有值就是计算过程。</li>
</ul>
<h3 id="类型转换规则"><a href="#类型转换规则" class="headerlink" title="类型转换规则"></a>类型转换规则</h3><p>1、原始转数字</p>
<ul>
<li><p>true: 1</p>
</li>
<li><p>false: 0</p>
</li>
<li><p>null: 0</p>
</li>
<li><p>undefined: NaN</p>
</li>
<li><p>string:</p>
<ul>
<li>空字符串（含空白字符，\n\r\t等）：0</li>
<li>非空字符串，去掉引号， 不是数字就是NaN<br>2、所有转bool</li>
</ul>
</li>
<li><p>null：false</p>
</li>
<li><p>undefined: false</p>
</li>
<li><p>number:</p>
<ul>
<li>0: false</li>
<li>NaN: false</li>
<li>其他: true</li>
</ul>
</li>
<li><p>string</p>
<ul>
<li>空字符串：false</li>
<li>其他: true</li>
</ul>
</li>
<li><p>对象/数组：true<br>3、原始转字符串</p>
</li>
<li><p>null: “null”</p>
</li>
<li><p>undefined: “undefined”</p>
</li>
<li><p>number: “数字”</p>
</li>
<li><p>bool：true-“true” false-“false”<br>4、对象转原始<br>先调用valueOf()—-得到的是对象？重新调用toString()—-得到的还是对象？报错<br>[]转原始，[].toString()结果为’’ {}转原始为’[object object]’</p>
</li>
</ul>
<h3 id="js运算规则"><a href="#js运算规则" class="headerlink" title="js运算规则"></a>js运算规则</h3><p>1、算术运算<br><code>+ - * / % ++ --</code><br>转换为原始类型：</p>
<ul>
<li>转换为数字，然后运算</li>
<li>特殊情况：x+y,x和y有一个是字符串，转换为字符串进行拼接</li>
<li>特殊情况：NaN和任何类型运算得到的还是NaN</li>
</ul>
<p>举例：<br>null + undefined 转换为数字，0 + NaN ，结果为NaN<br>[] + {} :先转换为原始值：’’ + ‘[object object]’, 结果为’[object object]’<br>2、比较运算</p>
<blockquote>
<p>&lt; &gt;= &lt;= == != === !===</p>
</blockquote>
<ul>
<li>当运算符为&gt; &lt; &gt;= &lt;=:<ul>
<li>转换为原始类型：<ul>
<li>转换为数字，进行比较</li>
<li>特殊情况：两端全是字符串，比较字典的顺序</li>
<li>特殊情况：两端存在NaN，一定是false</li>
</ul>
</li>
<li>举例：null &gt; undefined —转为数字： 0 &gt; NaN, 结果为false</li>
<li>举例：null &lt; undefined —转为数字： 0 &lt; NaN, 结果为false</li>
</ul>
</li>
<li>当运算符为==：<ul>
<li>两端类型相同，比较值</li>
<li>两端都是原始类型，转换为数字比较</li>
<li>一端是原始类型一端是对象类型，将对象转为原始类型后进行比较</li>
<li>特殊情况，null和undefined只有与自身比较或者相互比较才为true null == null undefined == undefined null == undefined null == 0为false</li>
<li>特殊情况：两端存在NaN，一定是false</li>
</ul>
</li>
<li>当运算符为===:<ul>
<li>类型和值必须都相等才为true</li>
<li>特殊情况：两端存在NaN，一定是false</li>
</ul>
</li>
<li>当运算符为!= !==:对相等和全等取反<br>3、逻辑运算<br>! &amp;&amp; || ?:<br>转换为boolean：</li>
<li>x&amp;&amp;y: x：false，返回x，x为true，返回y</li>
<li>x||y: x:true,返回x，x：false，返回y<br>返回最后一次运算</li>
</ul>
<h3 id="for循环和forEach循环"><a href="#for循环和forEach循环" class="headerlink" title="for循环和forEach循环"></a>for循环和forEach循环</h3><p>for循环是js提出就有的循环方法。forEach是ES5提出的，挂在在可叠戴对象原型上的方法。<br>forEach是一个迭代器，负责遍历可迭代对象。</p>
<p>es6引入了interable对象，可迭代对象，Array, Map, Set, String, arguments, NodeList都属于interable类型，他们特点就是都有[Symbol.iterator]方法，包含它的对象都被认为是可迭代的iterable.</p>
<p><strong>for和forEach的本质区别：</strong><br>for循环是一种循环机制，用来遍历出数组。forEach是一个迭代器，负责遍历可迭代对象。</p>
<p>可迭代对象调用内部的<code>[Symbol.iterator]</code>生成了迭代器对象，访问迭代器的next()方法来访问内部的值。每次调用next()方法，返回一个保护value和done属性的值，value为yield的返回值，done表示是否结束。这也是for…of的原理。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 数组</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="keyword">let</span> iterator = arr[<span class="built_in">Symbol</span>.iterator]()</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next()) <span class="comment">// &#123;value: 1, done: false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next()) <span class="comment">// &#123;value: 2, done: false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next()) <span class="comment">// &#123;value: 3, done: false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next()) <span class="comment">// &#123;value: 1, done: false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next()) <span class="comment">// &#123;value: 2, done: false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next()) <span class="comment">// &#123;value: undefined, done: true&#125;</span></span><br></pre></td></tr></table></figure>
<p>for…of</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> item <span class="keyword">of</span> arr) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item) <span class="comment">// 1 2 3 4</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>把调用next返回的值保存在item中过，直到value为undefined跳出循环。</p>
<p><strong>for和forEach的语法区别：</strong></p>
<ul>
<li>forEach的参数：<code>arr.forEach((self, index, arr) =&gt; &#123;&#125;, this)</code>, this回调函数中this的指向</li>
<li>forEach的中断：for循环可以通过break, continue进行中断或跳出循环的操作，但是forEach不支持return continue break, 可以使用try/catch跳出循环</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> arr1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>,<span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">  arr1.forEach(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (item === <span class="number">3</span>) &#123;</span><br><span class="line">          <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;loopterminate&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">console</span>.log(item)</span><br><span class="line">  &#125;)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="keyword">if</span> (e.message !== <span class="string">&#x27;loopterminate&#x27;</span>) <span class="keyword">throw</span> e</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>forEach删除自身原始，index不可以被重置，但是for循环删除自身元素可以重新设置index值</li>
<li>for循环可以控制循环起点，index = 1, forEach循环起点只能为0</li>
</ul>
<p><strong>for和forEach的性能区别：</strong></p>
<ul>
<li>性能比较：for &gt; forEach &gt; map</li>
<li>原因分析：for循环没有额外的函数调用栈和上下文，实现简单。forEach函数包含了参数和上下文，性能低于for。map会返回一个新的数组，数组的创建和赋值会分配内存空间，带来较大的性能开销。</li>
</ul>

  </div>
  <div>
      <!-- <a href="https://github.com/zhaojunyan9528/ZJY.github.io/tree/myblog/source/_posts/日常随记.md" target="_blank">编辑</a> -->
  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/ZJY.github.io/">首页</a></li>
         
          <li><a href="/ZJY.github.io/archives/">归档</a></li>
         
          <li><a href="/ZJY.github.io/tags">标签</a></li>
         
          <li><a href="/ZJY.github.io/categories">分类</a></li>
         
          <li><a href="/ZJY.github.io/search/">搜索</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#2023-11-03"><span class="toc-number">1.</span> <span class="toc-text">2023-11-03</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#sockjs-node-info-t-%E6%97%B6%E9%97%B4%E6%88%B3"><span class="toc-number">1.1.</span> <span class="toc-text">&#x2F;sockjs-node&#x2F;info?t&#x3D;${时间戳}</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#postinstall%E5%B9%B2%E4%BB%80%E4%B9%88%E7%9A%84%EF%BC%9F%EF%BC%9F%EF%BC%9F"><span class="toc-number">1.2.</span> <span class="toc-text">postinstall干什么的？？？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E6%89%A9%E5%B1%95%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">1.3.</span> <span class="toc-text">数组扩展运算符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2023-11-22"><span class="toc-number">2.</span> <span class="toc-text">2023-11-22</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF"><span class="toc-number">2.1.</span> <span class="toc-text">事件循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3js%E4%B8%AD%E7%9A%84%E5%BC%82%E6%AD%A5%EF%BC%9F"><span class="toc-number">2.2.</span> <span class="toc-text">如何理解js中的异步？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#js%E4%B8%AD%E8%AE%A1%E6%97%B6%E5%99%A8%E8%83%BD%E5%81%9A%E5%88%B0%E7%B2%BE%E5%87%86%E8%AE%A1%E6%97%B6%E5%90%97%EF%BC%9F"><span class="toc-number">2.3.</span> <span class="toc-text">js中计时器能做到精准计时吗？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E6%B8%B2%E6%9F%93%E5%8E%9F%E7%90%86"><span class="toc-number">2.4.</span> <span class="toc-text">浏览器的渲染原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%A7%A3%E6%9E%90HTML"><span class="toc-number">2.4.1.</span> <span class="toc-text">1.解析HTML</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E6%A0%B7%E5%BC%8F%E8%AE%A1%E7%AE%97-recalculate-style"><span class="toc-number">2.4.2.</span> <span class="toc-text">2、样式计算+ recalculate style</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E5%B8%83%E5%B1%80-Layout"><span class="toc-number">2.4.3.</span> <span class="toc-text">3、布局-Layout</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E5%88%86%E5%B1%82"><span class="toc-number">2.4.4.</span> <span class="toc-text">4、分层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E3%80%81%E7%BB%98%E5%88%B6"><span class="toc-number">2.4.5.</span> <span class="toc-text">5、绘制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%E3%80%81%E5%88%86%E5%9D%97"><span class="toc-number">2.4.6.</span> <span class="toc-text">6、分块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E5%85%89%E6%A0%85%E5%8C%96"><span class="toc-number">2.4.7.</span> <span class="toc-text">7.光栅化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-%E7%94%BB"><span class="toc-number">2.4.8.</span> <span class="toc-text">8.画</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFreflow%EF%BC%9F"><span class="toc-number">2.5.</span> <span class="toc-text">什么是reflow？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFrepaint%EF%BC%9F"><span class="toc-number">2.6.</span> <span class="toc-text">什么是repaint？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88transform%E7%9A%84%E6%95%88%E7%8E%87%E9%AB%98%EF%BC%9F"><span class="toc-number">2.7.</span> <span class="toc-text">为什么transform的效率高？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2023-11-27"><span class="toc-number">3.</span> <span class="toc-text">2023-11-27</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%81%B0%E9%98%B6%E6%BB%A4%E9%95%9C"><span class="toc-number">3.1.</span> <span class="toc-text">1.灰阶滤镜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-js%E5%AE%9E%E7%8E%B0%E6%97%A0%E9%99%90%E5%BE%AA%E7%8E%AF%E8%BD%AE%E6%92%AD%E5%9B%BE"><span class="toc-number">3.2.</span> <span class="toc-text">2.js实现无限循环轮播图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-sticky%E5%AE%9A%E4%BD%8D"><span class="toc-number">3.3.</span> <span class="toc-text">3.sticky定位</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-visibilitychange-%E7%A6%BB%E5%BC%80-%E8%BF%9B%E5%85%A5%E6%A0%87%E7%AD%BE%E9%A1%B5%E4%BA%8B%E4%BB%B6-%E9%A1%B5%E9%9D%A2%E5%8F%AF%E8%A7%81%E5%BA%A6"><span class="toc-number">3.4.</span> <span class="toc-text">4.visibilitychange 离开&#x2F;进入标签页事件-页面可见度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E9%9B%B6%E5%AE%BD%E5%AD%97%E7%AC%A6"><span class="toc-number">3.5.</span> <span class="toc-text">5.零宽字符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%B1%82%E5%92%8C"><span class="toc-number">3.6.</span> <span class="toc-text">6.求和</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E6%96%87%E5%AD%97%E6%8F%8F%E8%BE%B9text-stroke"><span class="toc-number">3.7.</span> <span class="toc-text">7.文字描边text-stroke</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-js%E7%B1%BB%E9%87%8C%E5%88%9B%E5%BB%BA%E7%A7%81%E6%9C%89%E5%AD%97%E6%AE%B5"><span class="toc-number">3.8.</span> <span class="toc-text">8.js类里创建私有字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E4%B8%8B%E6%8B%89%E8%8F%9C%E5%8D%95%E7%9A%84%E8%BF%87%E6%B8%A1%E6%95%88%E6%9E%9C"><span class="toc-number">3.9.</span> <span class="toc-text">9.下拉菜单的过渡效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E8%B7%A8%E5%9F%9Fcors"><span class="toc-number">3.10.</span> <span class="toc-text">10.跨域cors</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E8%AF%B7%E6%B1%82"><span class="toc-number">3.10.1.</span> <span class="toc-text">简单请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E8%AF%B7%E6%B1%82%E7%9A%84%E4%BA%A4%E4%BA%92%E8%A7%84%E8%8C%83"><span class="toc-number">3.10.2.</span> <span class="toc-text">简单请求的交互规范</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9C%80%E8%A6%81%E9%A2%84%E6%A3%80%E7%9A%84%E8%AF%B7%E6%B1%82"><span class="toc-number">3.10.3.</span> <span class="toc-text">需要预检的请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%99%84%E5%B8%A6%E8%BA%AB%E4%BB%BD%E5%87%AD%E8%AF%81%E7%9A%84%E8%AF%B7%E6%B1%82"><span class="toc-number">3.10.4.</span> <span class="toc-text">附带身份凭证的请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A5%E5%85%85"><span class="toc-number">3.10.5.</span> <span class="toc-text">补充</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E8%A7%A3%E6%9E%90url%E4%B8%AD%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-number">3.11.</span> <span class="toc-text">10.解析url中的参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E7%94%9F%E6%88%90%E9%9A%8F%E6%9C%BA%E9%A2%9C%E8%89%B2"><span class="toc-number">3.12.</span> <span class="toc-text">11.生成随机颜色</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-js%E7%9A%84atob%E5%92%8Cbtoa%E5%87%BD%E6%95%B0"><span class="toc-number">3.13.</span> <span class="toc-text">12.js的atob和btoa函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-%E5%88%A4%E6%96%AD%E4%B8%80%E4%B8%AA%E5%80%BC%E6%98%AF%E5%90%A6%E6%98%AFPromise-Like%EF%BC%9F"><span class="toc-number">3.14.</span> <span class="toc-text">13.判断一个值是否是Promise Like？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AAPromise"><span class="toc-number">3.15.</span> <span class="toc-text">14.手写一个Promise</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-%E8%AF%AD%E4%B9%89%E5%8C%96%E7%89%88%E6%9C%AC"><span class="toc-number">3.16.</span> <span class="toc-text">15.语义化版本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-axios"><span class="toc-number">3.17.</span> <span class="toc-text">16.axios</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-%E6%95%B0%E6%8D%AE%E5%9F%8B%E7%82%B9"><span class="toc-number">3.18.</span> <span class="toc-text">17.数据埋点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-web%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-number">3.19.</span> <span class="toc-text">18.web性能指标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-%E4%BB%8E%E8%A7%86%E9%A2%91%E6%96%87%E4%BB%B6%E4%B8%AD%E6%8F%90%E5%8F%96%E7%94%BB%E9%9D%A2%E5%B8%A7"><span class="toc-number">3.20.</span> <span class="toc-text">19.从视频文件中提取画面帧</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-ESMoudle%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">3.21.</span> <span class="toc-text">20.ESMoudle的工作原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-defineProperty%E5%92%8Cproxy"><span class="toc-number">3.22.</span> <span class="toc-text">21.defineProperty和proxy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%B8%8E%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2"><span class="toc-number">3.23.</span> <span class="toc-text">22.垃圾回收与内存泄露</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-%E8%A7%A3%E6%9E%90DOM%E6%A0%91"><span class="toc-number">3.24.</span> <span class="toc-text">23.解析DOM树</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-%E5%A4%A7%E6%96%87%E4%BB%B6%E5%88%87%E7%89%87%E4%B8%8A%E4%BC%A0"><span class="toc-number">3.25.</span> <span class="toc-text">22. 大文件切片上传</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95"><span class="toc-number">3.26.</span> <span class="toc-text">23.单点登录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#24-LRU%E7%BC%93%E5%AD%98%E7%BD%AE%E6%8D%A2%E7%AE%97%E6%B3%95"><span class="toc-number">3.27.</span> <span class="toc-text">24.LRU缓存置换算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-%E5%88%A4%E6%96%AD%E6%98%AF%E4%B8%8D%E6%98%AF%E6%95%B0%E7%BB%84"><span class="toc-number">3.28.</span> <span class="toc-text">25.判断是不是数组</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Object-prototype-toString-call"><span class="toc-number">3.28.1.</span> <span class="toc-text">1.Object.prototype.toString.call([])</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-instanceof-Array"><span class="toc-number">3.28.2.</span> <span class="toc-text">2.[] instanceof Array</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-Array-isArray"><span class="toc-number">3.28.3.</span> <span class="toc-text">3.Array.isArray([])</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-Reflect%E7%9A%84%E6%9C%AC%E8%B4%A8"><span class="toc-number">3.29.</span> <span class="toc-text">26.Reflect的本质</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27-img%E7%9A%84srcset%E3%80%81size"><span class="toc-number">3.30.</span> <span class="toc-text">27.img的srcset、size</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#28-es2023%E4%B8%AD%E7%9A%84%E6%95%B0%E7%BB%84%E7%BA%AF%E5%87%BD%E6%95%B0"><span class="toc-number">3.31.</span> <span class="toc-text">28.es2023中的数组纯函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#29-%E5%8A%A8%E6%80%81%E6%89%A7%E8%A1%8Cjs"><span class="toc-number">3.32.</span> <span class="toc-text">29.动态执行js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#node%E6%A8%A1%E5%9D%97%E6%9F%A5%E6%89%BE%E7%AD%96%E7%95%A5"><span class="toc-number">3.33.</span> <span class="toc-text">node模块查找策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue%E7%8A%B6%E6%80%81%E4%BB%93%E5%BA%93%E6%8C%81%E4%B9%85%E5%8C%96%EF%BC%9Avuex%E3%80%81pina"><span class="toc-number">3.34.</span> <span class="toc-text">vue状态仓库持久化：vuex、pina</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#css%E9%80%89%E6%8B%A9%E5%99%A8focus-within%E3%80%81has%E3%80%81-first-letter%E3%80%81selection"><span class="toc-number">3.35.</span> <span class="toc-text">css选择器focus-within、has、 first-letter、selection</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E3%80%81%E6%96%87%E4%BB%B6%E5%A4%B9%E3%80%81%E6%8B%96%E6%8B%BD%E4%B8%8A%E4%BC%A0"><span class="toc-number">3.36.</span> <span class="toc-text">文件上传、文件夹、拖拽上传</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue%E7%BB%84%E5%BB%BA%E5%91%BD%E5%90%8D%E8%A7%84%E8%8C%83"><span class="toc-number">3.37.</span> <span class="toc-text">vue组建命名规范</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E8%87%AA%E5%8A%A8%E6%92%AD%E6%94%BE%E7%AD%96%E7%95%A5"><span class="toc-number">3.38.</span> <span class="toc-text">浏览器自动播放策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#web-api"><span class="toc-number">3.39.</span> <span class="toc-text">web api</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E5%AD%97%E9%9D%A2%E9%87%8F"><span class="toc-number">3.40.</span> <span class="toc-text">数字字面量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%8F%E6%9C%BA%E6%95%B0"><span class="toc-number">3.41.</span> <span class="toc-text">随机数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-number">3.42.</span> <span class="toc-text">数字格式化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%82%E5%8F%A0%E8%A7%84%E5%88%99"><span class="toc-number">3.43.</span> <span class="toc-text">层叠规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%83%E5%B0%94%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.44.</span> <span class="toc-text">布尔类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97"><span class="toc-number">3.45.</span> <span class="toc-text">赋值运算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#js%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%92%8Ctypeof"><span class="toc-number">3.46.</span> <span class="toc-text">js数据类型和typeof</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ssr%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%B8%B2%E6%9F%93"><span class="toc-number">3.47.</span> <span class="toc-text">ssr服务端渲染</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">3.48.</span> <span class="toc-text">作用域</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE"><span class="toc-number">3.49.</span> <span class="toc-text">作用域链</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#webpack"><span class="toc-number">3.50.</span> <span class="toc-text">webpack</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E5%9E%8B%E7%9A%84%E4%BD%9C%E7%94%A8%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">3.51.</span> <span class="toc-text">原型的作用是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Promise%E8%A7%A3%E5%86%B3%E4%BA%86%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98%EF%BC%9F"><span class="toc-number">3.52.</span> <span class="toc-text">Promise解决了什么问题？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#async-await"><span class="toc-number">3.53.</span> <span class="toc-text">async await</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue3%E5%B0%8F%E8%AE%B0"><span class="toc-number">4.</span> <span class="toc-text">vue3小记</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%98%E7%82%B9%E7%89%B9%E6%80%A7"><span class="toc-number">4.1.</span> <span class="toc-text">优点特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#setup"><span class="toc-number">4.2.</span> <span class="toc-text">setup</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ref%E5%AE%9A%E4%B9%89%E5%93%8D%E5%BA%94%E5%BC%8F%E5%AF%B9%E8%B1%A1"><span class="toc-number">4.3.</span> <span class="toc-text">ref定义响应式对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reactive%E5%AE%9A%E4%B9%89%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F%E5%AF%B9%E8%B1%A1"><span class="toc-number">4.4.</span> <span class="toc-text">reactive定义对象类型的响应式对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ref%E5%92%8Creactive%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="toc-number">4.5.</span> <span class="toc-text">ref和reactive的对比</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#toRefs%E5%92%8CtoRef"><span class="toc-number">4.6.</span> <span class="toc-text">toRefs和toRef</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#computed%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7"><span class="toc-number">4.7.</span> <span class="toc-text">computed计算属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#watch%E7%9B%91%E5%90%AC%E6%95%B0%E6%8D%AE"><span class="toc-number">4.8.</span> <span class="toc-text">watch监听数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#watchEffect"><span class="toc-number">4.9.</span> <span class="toc-text">watchEffect</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E7%AD%BE%E7%9A%84ref%E5%B1%9E%E6%80%A7"><span class="toc-number">4.10.</span> <span class="toc-text">标签的ref属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#props%E5%B1%9E%E6%80%A7"><span class="toc-number">4.11.</span> <span class="toc-text">props属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">4.12.</span> <span class="toc-text">生命周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#key%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">4.13.</span> <span class="toc-text">key的作用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue3%E9%9D%9E%E5%85%BC%E5%AE%B9%E6%80%A7%E6%94%B9%E5%8F%98"><span class="toc-number">5.</span> <span class="toc-text">vue3非兼容性改变</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80API"><span class="toc-number">5.1.</span> <span class="toc-text">全局API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E7%89%88%E6%8C%87%E4%BB%A4"><span class="toc-number">5.2.</span> <span class="toc-text">模版指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6"><span class="toc-number">5.3.</span> <span class="toc-text">组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%B2%E6%9F%93%E5%87%BD%E6%95%B0"><span class="toc-number">5.4.</span> <span class="toc-text">渲染函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%85%83%E7%B4%A0"><span class="toc-number">5.5.</span> <span class="toc-text">自定义元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E5%B0%8F%E6%94%B9%E5%8F%98"><span class="toc-number">5.6.</span> <span class="toc-text">其他小改变</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A2%AB%E7%A7%BB%E9%99%A4%E7%9A%84API"><span class="toc-number">5.7.</span> <span class="toc-text">被移除的API</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue2%E5%B0%8F%E8%AE%B0"><span class="toc-number">6.</span> <span class="toc-text">vue2小记</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#vue%E7%89%B9%E7%82%B9"><span class="toc-number">6.1.</span> <span class="toc-text">vue特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E7%89%88%E8%AF%AD%E6%B3%95"><span class="toc-number">6.2.</span> <span class="toc-text">模版语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MVVM"><span class="toc-number">6.3.</span> <span class="toc-text">MVVM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#defineProperty"><span class="toc-number">6.4.</span> <span class="toc-text">defineProperty</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue%E4%B8%AD%E6%95%B0%E6%8D%AE%E4%BB%A3%E7%90%86"><span class="toc-number">6.5.</span> <span class="toc-text">vue中数据代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC"><span class="toc-number">6.6.</span> <span class="toc-text">事件监听</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#scroll%E5%92%8Cwheel%E4%BA%8B%E4%BB%B6"><span class="toc-number">6.7.</span> <span class="toc-text">scroll和wheel事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#computed%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7-1"><span class="toc-number">6.8.</span> <span class="toc-text">computed计算属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%A6%E5%90%AC%E5%99%A8watch"><span class="toc-number">6.9.</span> <span class="toc-text">侦听器watch</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="toc-number">6.10.</span> <span class="toc-text">条件渲染</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-if-vs-v-show"><span class="toc-number">6.11.</span> <span class="toc-text">v-if vs v-show</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#key%E7%9A%84%E4%BD%9C%E7%94%A8-1"><span class="toc-number">6.12.</span> <span class="toc-text">key的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%B1%E5%85%A5%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86"><span class="toc-number">6.13.</span> <span class="toc-text">深入响应式原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%BF%BD%E8%B8%AA%E5%8F%98%E5%8C%96%EF%BC%9F"><span class="toc-number">6.13.1.</span> <span class="toc-text">如何追踪变化？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A3%80%E6%B5%8B%E5%8F%98%E5%8C%96%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">6.13.2.</span> <span class="toc-text">检测变化的注意事项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E6%9B%B4%E6%96%B0%E6%A3%80%E6%B5%8B"><span class="toc-number">6.13.3.</span> <span class="toc-text">数组更新检测</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5%E6%9B%B4%E6%96%B0%E9%98%9F%E5%88%97"><span class="toc-number">6.13.4.</span> <span class="toc-text">异步更新队列</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E7%BD%AE%E6%8C%87%E4%BB%A4"><span class="toc-number">6.14.</span> <span class="toc-text">内置指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4"><span class="toc-number">6.15.</span> <span class="toc-text">自定义指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">6.16.</span> <span class="toc-text">组件生命周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E5%8C%96%E7%BC%96%E7%A8%8B"><span class="toc-number">6.17.</span> <span class="toc-text">组件化编程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue%E7%9A%84%E7%89%88%E6%9C%AC"><span class="toc-number">6.18.</span> <span class="toc-text">vue的版本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%B7%E5%85%A5mixin"><span class="toc-number">6.19.</span> <span class="toc-text">混入mixin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6"><span class="toc-number">6.20.</span> <span class="toc-text">插件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%8F%92%E4%BB%B6"><span class="toc-number">6.20.1.</span> <span class="toc-text">使用插件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BB%84%E4%BB%B6"><span class="toc-number">6.21.</span> <span class="toc-text">函数式组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEwebpack"><span class="toc-number">6.22.</span> <span class="toc-text">配置webpack</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%8F%82-%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1"><span class="toc-number">6.23.</span> <span class="toc-text">组件传参&#x2F;组件通信</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E6%A7%BD"><span class="toc-number">6.24.</span> <span class="toc-text">插槽</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vuex"><span class="toc-number">6.25.</span> <span class="toc-text">vuex</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-number">6.25.1.</span> <span class="toc-text">核心概念</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%88Stack%E5%92%8C%E5%A0%86Heap%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">6.26.</span> <span class="toc-text">栈Stack和堆Heap的区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#js%E5%8E%9F%E5%9E%8B%E9%93%BE"><span class="toc-number">6.27.</span> <span class="toc-text">js原型链</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Ajax%E3%80%81xhr%E3%80%81fetch%E3%80%81axios%E3%80%81promise%E3%80%81jQuery%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">6.28.</span> <span class="toc-text">Ajax、xhr、fetch、axios、promise、jQuery的区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E8%81%94%E5%85%83%E7%B4%A0%E5%92%8C%E5%9D%97%E7%BA%A7%E5%85%83%E7%B4%A0%EF%BC%9F"><span class="toc-number">6.29.</span> <span class="toc-text">内联元素和块级元素？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%85%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B7%B1%E6%8B%B7%E8%B4%9D%EF%BC%9F"><span class="toc-number">6.30.</span> <span class="toc-text">浅拷贝和深拷贝？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%EF%BC%9F"><span class="toc-number">6.31.</span> <span class="toc-text">性能优化？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#while%E5%BE%AA%E7%8E%AF%E5%BF%AB%E8%BF%98%E6%98%AFfor%E5%BE%AA%E7%8E%AF%E5%BF%AB%EF%BC%9F"><span class="toc-number">6.32.</span> <span class="toc-text">while循环快还是for循环快？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#css%E5%B1%82%E5%8F%A0%E8%A7%84%E5%88%99%EF%BC%9F"><span class="toc-number">6.33.</span> <span class="toc-text">css层叠规则？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E4%B8%8A%E9%9A%90%E8%97%8F%E5%85%83%E7%B4%A0%E6%96%B9%E6%B3%95%EF%BC%9F"><span class="toc-number">6.34.</span> <span class="toc-text">页面上隐藏元素方法？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%83%E7%B4%A0%E6%B0%B4%E5%B9%B3%E5%9E%82%E7%9B%B4%E5%B1%85%E4%B8%AD%EF%BC%9F"><span class="toc-number">6.35.</span> <span class="toc-text">元素水平垂直居中？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Css%E5%85%83%E7%B4%A0%E9%80%89%E6%8B%A9%E5%99%A8%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F"><span class="toc-number">6.36.</span> <span class="toc-text">Css元素选择器有哪些？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#css%E5%8F%AF%E4%BB%A5%E7%BB%A7%E6%89%BF%E7%9A%84%E5%B1%9E%E6%80%A7%EF%BC%9F"><span class="toc-number">6.37.</span> <span class="toc-text">css可以继承的属性？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#css%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8%EF%BC%9F"><span class="toc-number">6.38.</span> <span class="toc-text">css预处理器？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JS%E7%BB%84%E6%88%90%EF%BC%9F"><span class="toc-number">6.39.</span> <span class="toc-text">JS组成？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#js%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F"><span class="toc-number">6.40.</span> <span class="toc-text">js内置对象有哪些？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E6%95%B0%E7%BB%84%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9F"><span class="toc-number">6.41.</span> <span class="toc-text">操作数组的方法？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#js%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5%E6%96%B9%E6%B3%95%EF%BC%9F"><span class="toc-number">6.42.</span> <span class="toc-text">js类型检查方法？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AD%E5%8C%85%E7%9A%84%E7%90%86%E8%A7%A3%EF%BC%9F"><span class="toc-number">6.43.</span> <span class="toc-text">闭包的理解？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E5%A7%94%E6%89%98%EF%BC%9F"><span class="toc-number">6.44.</span> <span class="toc-text">事件委托？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%BC%95%E7%94%A8%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">6.45.</span> <span class="toc-text">基本数据类型和引用数据类型的区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E5%9E%8B%E9%93%BE"><span class="toc-number">6.46.</span> <span class="toc-text">原型链</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#new%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-number">6.47.</span> <span class="toc-text">new关键字的操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#js%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%BB%A7%E6%89%BF%E7%9A%84%EF%BC%9F"><span class="toc-number">6.48.</span> <span class="toc-text">js如何实现继承的？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#js%E8%AE%BE%E8%AE%A1%E5%8E%9F%E7%90%86"><span class="toc-number">6.49.</span> <span class="toc-text">js设计原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#js%E4%B8%AD%E7%9A%84this%E6%8C%87%E5%90%91"><span class="toc-number">6.50.</span> <span class="toc-text">js中的this指向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#script%E6%A0%87%E7%AD%BE%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%89%A7%E8%A1%8C"><span class="toc-number">6.51.</span> <span class="toc-text">script标签的加载和执行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DOMContentLoaded%E5%92%8Cload%E4%BA%8B%E4%BB%B6"><span class="toc-number">6.52.</span> <span class="toc-text">DOMContentLoaded和load事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#setTimeout%E5%92%8CsetInterval%E6%9C%80%E5%B0%8F%E6%89%A7%E8%A1%8C%E6%97%B6%E9%97%B4%EF%BC%9F"><span class="toc-number">6.53.</span> <span class="toc-text">setTimeout和setInterval最小执行时间？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ES6%E5%92%8CES5%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">6.54.</span> <span class="toc-text">ES6和ES5的区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ES6%E6%96%B0%E5%A2%9E%E5%93%AA%E4%BA%9B%E7%89%B9%E6%80%A7%EF%BC%9F"><span class="toc-number">6.55.</span> <span class="toc-text">ES6新增哪些特性？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0"><span class="toc-number">6.56.</span> <span class="toc-text">箭头函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#call-apply-bind%E4%B8%89%E8%80%85%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">6.57.</span> <span class="toc-text">call apply bind三者区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%92%E5%BD%92%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%9F"><span class="toc-number">6.58.</span> <span class="toc-text">递归遇到的问题？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ajax%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">6.59.</span> <span class="toc-text">ajax是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#get%E5%92%8Cpost"><span class="toc-number">6.60.</span> <span class="toc-text">get和post</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Promise%E7%9A%84%E5%86%85%E9%83%A8%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">6.61.</span> <span class="toc-text">Promise的内部原理是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Promise%E5%92%8Casync-await%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">6.62.</span> <span class="toc-text">Promise和async&#x2F;await的区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B8%B8%E7%94%A8%E5%AD%98%E5%82%A8%E6%96%B9%E5%BC%8F%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F"><span class="toc-number">6.63.</span> <span class="toc-text">浏览器常用存储方式有哪些？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#token%E5%AD%98%E5%82%A8%E5%9C%A8%E5%93%AA%E9%87%8C%EF%BC%9F"><span class="toc-number">6.64.</span> <span class="toc-text">token存储在哪里？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DOM%E6%A0%91%E5%92%8C%E6%B8%B2%E6%9F%93%E6%A0%91%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">6.65.</span> <span class="toc-text">DOM树和渲染树有什么区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JWT"><span class="toc-number">6.66.</span> <span class="toc-text">JWT</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B2%BE%E7%81%B5%E5%9B%BE%E5%92%8Cbase64%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">6.67.</span> <span class="toc-text">精灵图和base64区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SVG"><span class="toc-number">6.68.</span> <span class="toc-text">SVG</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#npm%E7%9A%84%E5%BA%95%E5%B1%82%E7%8E%AF%E5%A2%83%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">6.69.</span> <span class="toc-text">npm的底层环境是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%8D%8F%E8%AE%AE%E5%A4%B4%E5%92%8C%E8%AF%B7%E6%B1%82%E5%A4%B4%E6%9C%89%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">6.70.</span> <span class="toc-text">http协议的协议头和请求头有什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98%E7%AD%96%E7%95%A5"><span class="toc-number">6.71.</span> <span class="toc-text">浏览器缓存策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%A8%E5%9F%9F"><span class="toc-number">6.72.</span> <span class="toc-text">跨域</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B2%E6%8A%96%E5%92%8C%E8%8A%82%E6%B5%81"><span class="toc-number">6.73.</span> <span class="toc-text">防抖和节流</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSON"><span class="toc-number">6.74.</span> <span class="toc-text">JSON</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BD%93%E6%95%B0%E6%8D%AE%E6%B2%A1%E6%9C%89%E8%AF%B7%E6%B1%82%E8%BF%87%E6%9D%A5%E6%97%B6%E8%AF%A5%E6%80%8E%E4%B9%88%E5%81%9A"><span class="toc-number">6.75.</span> <span class="toc-text">当数据没有请求过来时该怎么做</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A0%E6%84%9F%E7%99%BB%E5%BD%95"><span class="toc-number">6.76.</span> <span class="toc-text">无感登录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%A7%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">6.77.</span> <span class="toc-text">大文件上传</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96"><span class="toc-number">6.78.</span> <span class="toc-text">前端工程化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%8C%96%E5%92%8C%E5%8C%85%E7%AE%A1%E7%90%86"><span class="toc-number">6.78.1.</span> <span class="toc-text">模块化和包管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JS%E5%B7%A5%E5%85%B7%E9%93%BE"><span class="toc-number">6.78.2.</span> <span class="toc-text">JS工具链</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#html%E8%AF%AD%E4%B9%89%E5%8C%96%E7%9A%84%E7%90%86%E8%A7%A3"><span class="toc-number">6.79.</span> <span class="toc-text">html语义化的理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#html5%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-number">6.80.</span> <span class="toc-text">html5的新特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#css3%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-number">6.81.</span> <span class="toc-text">css3新特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E4%BA%86%E5%93%AA%E4%BA%9B%E7%A7%BB%E5%8A%A8%E7%AB%AF%E7%9A%84%E5%85%BC%E5%AE%B9%E9%97%AE%E9%A2%98%EF%BC%9F"><span class="toc-number">6.82.</span> <span class="toc-text">解决了哪些移动端的兼容问题？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-for%E4%B8%ADkey%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">6.83.</span> <span class="toc-text">v-for中key的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#created%E5%92%8Cmounted%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB"><span class="toc-number">6.84.</span> <span class="toc-text">created和mounted请求数据有什么区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#keep-alive"><span class="toc-number">6.85.</span> <span class="toc-text">keep-alive</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#element-ui%E6%80%8E%E4%B9%88%E8%BF%9B%E8%A1%8C%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81"><span class="toc-number">6.86.</span> <span class="toc-text">element-ui怎么进行表单验证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85axios"><span class="toc-number">6.87.</span> <span class="toc-text">封装axios</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue%E8%B7%AF%E7%94%B1%E4%BC%A0%E5%8F%82%E6%96%B9%E5%BC%8F%EF%BC%9F"><span class="toc-number">6.88.</span> <span class="toc-text">vue路由传参方式？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue%E7%9A%84%E8%B7%AF%E7%94%B1hash%E6%A8%A1%E5%BC%8F%E5%92%8Chistory%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">6.89.</span> <span class="toc-text">vue的路由hash模式和history模式的区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E6%8B%A6%E6%88%AA%E6%98%AF%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84%EF%BC%9F"><span class="toc-number">6.90.</span> <span class="toc-text">路由拦截是怎么实现的？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue%E7%9A%84%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1"><span class="toc-number">6.91.</span> <span class="toc-text">vue的动态路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E9%81%BF%E5%85%8D%E5%88%B7%E6%96%B0%E9%A1%B5%E9%9D%A2%E4%BA%8C%E6%AC%A1%E5%8A%A0%E8%BD%BD%E8%B7%AF%E7%94%B1"><span class="toc-number">6.92.</span> <span class="toc-text">如何避免刷新页面二次加载路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vuex%E5%88%B7%E6%96%B0%E6%95%B0%E6%8D%AE%E4%BC%9A%E4%B8%A2%E5%A4%B1%E5%90%97"><span class="toc-number">6.93.</span> <span class="toc-text">vuex刷新数据会丢失吗</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#watch%E5%92%8Ccomputed%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">6.94.</span> <span class="toc-text">watch和computed有什么区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vuex%E4%BB%80%E4%B9%88%E5%9C%BA%E6%99%AF%E4%BD%BF%E7%94%A8%EF%BC%8C%E5%B1%9E%E6%80%A7%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F"><span class="toc-number">6.95.</span> <span class="toc-text">vuex什么场景使用，属性有哪些？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%84%E6%BA%90%E6%8F%90%E7%A4%BA%E7%AC%A6"><span class="toc-number">6.96.</span> <span class="toc-text">资源提示符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue%E7%9A%84%E5%8F%8C%E5%90%91%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-number">6.97.</span> <span class="toc-text">vue的双向数据绑定的原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#diff%E7%AE%97%E6%B3%95%E5%92%8C%E8%99%9A%E6%8B%9Fdom"><span class="toc-number">6.98.</span> <span class="toc-text">diff算法和虚拟dom</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#a%E9%93%BE%E6%8E%A5%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6"><span class="toc-number">6.99.</span> <span class="toc-text">a链接下载文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E7%A7%81%E6%9C%89%E5%B1%9E%E6%80%A7"><span class="toc-number">6.100.</span> <span class="toc-text">设计私有属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vuex%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%93%8D%E5%BA%94%E5%BC%8F%E7%9A%84%EF%BC%9F"><span class="toc-number">6.101.</span> <span class="toc-text">vuex是如何实现响应式的？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%B0%81%E8%A3%85%E4%B8%80%E4%B8%AA%E7%BB%84%E4%BB%B6"><span class="toc-number">6.102.</span> <span class="toc-text">如何封装一个组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E8%84%9A%E6%89%8B%E6%9E%B6%EF%BC%9F"><span class="toc-number">6.103.</span> <span class="toc-text">如何搭建一个脚手架？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%B0%81%E8%A3%85%E4%B8%80%E4%B8%AA%E5%8F%AF%E5%A4%8D%E7%94%A8%E7%9A%84%E7%BB%84%E4%BB%B6%EF%BC%9F"><span class="toc-number">6.104.</span> <span class="toc-text">如何封装一个可复用的组件？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A6%96%E5%B1%8F%E4%BC%98%E5%8C%96%E6%80%8E%E4%B9%88%E5%81%9A%EF%BC%9F"><span class="toc-number">6.105.</span> <span class="toc-text">首屏优化怎么做？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue3%E6%80%A7%E8%83%BD%E4%B8%BA%E4%BB%80%E4%B9%88%E6%AF%94vue2%E5%A5%BD%EF%BC%9F"><span class="toc-number">6.106.</span> <span class="toc-text">vue3性能为什么比vue2好？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue3%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8proxy%EF%BC%9F"><span class="toc-number">6.107.</span> <span class="toc-text">vue3为什么使用proxy？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E7%BB%84%E4%BB%B6%E7%9A%84%E7%90%86%E8%A7%A3"><span class="toc-number">6.108.</span> <span class="toc-text">对组件的理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nuxtjs"><span class="toc-number">6.109.</span> <span class="toc-text">nuxtjs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%B2%E6%9F%93%E6%96%B9%E5%BC%8F"><span class="toc-number">6.110.</span> <span class="toc-text">渲染方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%9A%BE%E9%A2%98"><span class="toc-number">6.111.</span> <span class="toc-text">工作中遇到的难题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#will-change"><span class="toc-number">6.112.</span> <span class="toc-text">will-change</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F"><span class="toc-number">6.113.</span> <span class="toc-text">小程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BA%95%E5%B1%82"><span class="toc-number">6.114.</span> <span class="toc-text">小程序底层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BE%E4%BE%8B%E8%AF%B4%E6%98%8E%E8%A1%8C%E5%86%85%E5%85%83%E7%B4%A0%E3%80%81%E5%9D%97%E7%BA%A7%E5%85%83%E7%B4%A0%E5%92%8C%E7%A9%BA%E5%85%83%E7%B4%A0%EF%BC%8C%E5%B9%B6%E8%A7%A3%E9%87%8A%E5%85%B6%E7%89%B9%E7%82%B9"><span class="toc-number">6.115.</span> <span class="toc-text">举例说明行内元素、块级元素和空元素，并解释其特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B8%83%E5%B1%80%EF%BC%9F%E4%BB%8B%E7%BB%8D%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E7%9A%84%E6%96%B9%E6%B3%95%E5%92%8C%E6%8A%80%E6%9C%AF"><span class="toc-number">6.116.</span> <span class="toc-text">如何实现响应式布局？介绍几种常见的方法和技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%95%B0%E7%BB%84%E5%8E%BB%E9%87%8D%E7%9A%84%E6%96%B9%E6%B3%95%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F"><span class="toc-number">6.117.</span> <span class="toc-text">实现数组去重的方法有哪些？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E8%A7%A3%E9%87%8A%E5%89%8D%E7%AB%AF%E8%B5%84%E6%BA%90%E6%87%92%E5%8A%A0%E8%BD%BD%E5%92%8C%E9%A2%84%E5%8A%A0%E8%BD%BD%E7%9A%84%E7%AD%96%E7%95%A5"><span class="toc-number">6.118.</span> <span class="toc-text">请解释前端资源懒加载和预加载的策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%8F%8F%E8%BF%B0CommonJS%E3%80%81AMD%E3%80%81ES6-Modules%E4%B9%8B%E9%97%B4%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">6.119.</span> <span class="toc-text">请描述CommonJS、AMD、ES6 Modules之间的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AEWebpack%E8%BF%9B%E8%A1%8C%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%EF%BC%9F%E5%88%97%E4%B8%BE%E5%87%A0%E4%B8%AA%E5%B8%B8%E7%94%A8%E7%9A%84Loader%E5%92%8CPlugin"><span class="toc-number">6.120.</span> <span class="toc-text">如何配置Webpack进行项目构建？列举几个常用的Loader和Plugin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="toc-number">6.121.</span> <span class="toc-text">前端性能优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E4%B9%8BmessageBox"><span class="toc-number">6.122.</span> <span class="toc-text">组件封装之messageBox</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%8E%E6%A0%B7%E6%8E%92%E6%9F%A5%E9%A1%B5%E9%9D%A2%E5%8A%A0%E8%BD%BD%E6%85%A2%EF%BC%9F"><span class="toc-number">6.123.</span> <span class="toc-text">怎样排查页面加载慢？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%96%E6%8B%BD%E5%85%83%E7%B4%A0"><span class="toc-number">6.124.</span> <span class="toc-text">拖拽元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%A7%E5%B1%8F%E6%95%B0%E6%8D%AE%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6%E6%9B%B4%E6%96%B0%EF%BC%9F"><span class="toc-number">6.125.</span> <span class="toc-text">大屏数据如何实现实时更新？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E5%92%8C%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-number">6.126.</span> <span class="toc-text">函数参数和默认值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#css%E5%B1%9E%E6%80%A7%E5%80%BC%E7%9A%84%E8%AE%A1%E7%AE%97%E8%BF%87%E7%A8%8B"><span class="toc-number">6.127.</span> <span class="toc-text">css属性值的计算过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E8%A7%84%E5%88%99"><span class="toc-number">6.128.</span> <span class="toc-text">类型转换规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#js%E8%BF%90%E7%AE%97%E8%A7%84%E5%88%99"><span class="toc-number">6.129.</span> <span class="toc-text">js运算规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#for%E5%BE%AA%E7%8E%AF%E5%92%8CforEach%E5%BE%AA%E7%8E%AF"><span class="toc-number">6.130.</span> <span class="toc-text">for循环和forEach循环</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&text=日常随记"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&title=日常随记"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&is_video=false&description=日常随记"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=日常随记&body=Check out this article: https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&title=日常随记"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&title=日常随记"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&title=日常随记"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&title=日常随记"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&name=日常随记&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&t=日常随记"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> 菜单</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> 目录</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> 分享</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2020-2024
    ZJY
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/ZJY.github.io/">首页</a></li>
         
          <li><a href="/ZJY.github.io/archives/">归档</a></li>
         
          <li><a href="/ZJY.github.io/tags">标签</a></li>
         
          <li><a href="/ZJY.github.io/categories">分类</a></li>
         
          <li><a href="/ZJY.github.io/search/">搜索</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/ZJY.github.io/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/ZJY.github.io/lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="/ZJY.github.io/lib/jquery/jquery.min.js"></script>


<script src="/ZJY.github.io/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="/ZJY.github.io/lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"复制到粘贴板!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "复制成功!");
      e.clearSelection();
    })
  })
  </script>


<script src="/ZJY.github.io/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->


</body>
</html>

<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="2023-11-03&#x2F;sockjs-node&#x2F;info?t&#x3D;${时间戳}当运行npm run dev启动项目后，在浏览器的network中会自动持续发送&#x2F;sockjs-node&#x2F;info?t&#x3D;$&amp;#123;时间戳&amp;#125;请求。 sockjs-node是什么？sockjs-node是一个JavaScript库，提供跨浏览器的API，创建了一个低延迟、全双工的浏览器和web服务器之间的通道。在项目">
<meta property="og:type" content="article">
<meta property="og:title" content="日常随记">
<meta property="og:url" content="https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/index.html">
<meta property="og:site_name" content="ZJY">
<meta property="og:description" content="2023-11-03&#x2F;sockjs-node&#x2F;info?t&#x3D;${时间戳}当运行npm run dev启动项目后，在浏览器的network中会自动持续发送&#x2F;sockjs-node&#x2F;info?t&#x3D;$&amp;#123;时间戳&amp;#125;请求。 sockjs-node是什么？sockjs-node是一个JavaScript库，提供跨浏览器的API，创建了一个低延迟、全双工的浏览器和web服务器之间的通道。在项目">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-11-03T09:49:54.000Z">
<meta property="article:modified_time" content="2023-11-30T11:54:52.655Z">
<meta property="article:author" content="ZJY">
<meta property="article:tag" content="前端">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/ZJY.github.io/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/ZJY.github.io/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/ZJY.github.io/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>日常随记</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/ZJY.github.io/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/ZJY.github.io/css/rtl.css">

    
    <!-- rss -->
    
    
<meta name="generator" content="Hexo 5.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/ZJY.github.io/">首页</a></li>
         
          <li><a href="/ZJY.github.io/archives/">归档</a></li>
         
          <li><a href="/ZJY.github.io/tags">标签</a></li>
         
          <li><a href="/ZJY.github.io/categories">分类</a></li>
         
          <li><a href="/ZJY.github.io/search/">搜索</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/ZJY.github.io/2023/11/30/test/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/ZJY.github.io/2023/09/27/%E8%AE%B0%E6%89%93%E5%8C%85%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BALast-few-GCs%EF%BC%88FATAL-ERROR-Reached-heap-limit-Allocation-failed-JavaScript-heap-out-of-memory%EF%BC%89/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">上一篇</span>
      <span id="i-next" class="info" style="display:none;">下一篇</span>
      <span id="i-top" class="info" style="display:none;">返回顶部</span>
      <span id="i-share" class="info" style="display:none;">分享文章</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&text=日常随记"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&title=日常随记"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&is_video=false&description=日常随记"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=日常随记&body=Check out this article: https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&title=日常随记"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&title=日常随记"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&title=日常随记"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&title=日常随记"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&name=日常随记&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&t=日常随记"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#2023-11-03"><span class="toc-number">1.</span> <span class="toc-text">2023-11-03</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#sockjs-node-info-t-%E6%97%B6%E9%97%B4%E6%88%B3"><span class="toc-number">1.1.</span> <span class="toc-text">&#x2F;sockjs-node&#x2F;info?t&#x3D;${时间戳}</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#postinstall%E5%B9%B2%E4%BB%80%E4%B9%88%E7%9A%84%EF%BC%9F%EF%BC%9F%EF%BC%9F"><span class="toc-number">1.2.</span> <span class="toc-text">postinstall干什么的？？？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E6%89%A9%E5%B1%95%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">1.3.</span> <span class="toc-text">数组扩展运算符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2023-11-22"><span class="toc-number">2.</span> <span class="toc-text">2023-11-22</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF"><span class="toc-number">2.1.</span> <span class="toc-text">事件循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3js%E4%B8%AD%E7%9A%84%E5%BC%82%E6%AD%A5%EF%BC%9F"><span class="toc-number">2.2.</span> <span class="toc-text">如何理解js中的异步？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#js%E4%B8%AD%E8%AE%A1%E6%97%B6%E5%99%A8%E8%83%BD%E5%81%9A%E5%88%B0%E7%B2%BE%E5%87%86%E8%AE%A1%E6%97%B6%E5%90%97%EF%BC%9F"><span class="toc-number">2.3.</span> <span class="toc-text">js中计时器能做到精准计时吗？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E6%B8%B2%E6%9F%93%E5%8E%9F%E7%90%86"><span class="toc-number">2.4.</span> <span class="toc-text">浏览器的渲染原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%A7%A3%E6%9E%90HTML"><span class="toc-number">2.4.1.</span> <span class="toc-text">1.解析HTML</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E6%A0%B7%E5%BC%8F%E8%AE%A1%E7%AE%97-recalculate-style"><span class="toc-number">2.4.2.</span> <span class="toc-text">2、样式计算- recalculate style</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E5%B8%83%E5%B1%80-Layout"><span class="toc-number">2.4.3.</span> <span class="toc-text">3、布局-Layout</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E5%88%86%E5%B1%82"><span class="toc-number">2.4.4.</span> <span class="toc-text">4、分层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E3%80%81%E7%BB%98%E5%88%B6"><span class="toc-number">2.4.5.</span> <span class="toc-text">5、绘制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%E3%80%81%E5%88%86%E5%9D%97"><span class="toc-number">2.4.6.</span> <span class="toc-text">6、分块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E5%85%89%E6%A0%85%E5%8C%96"><span class="toc-number">2.4.7.</span> <span class="toc-text">7.光栅化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-%E7%94%BB"><span class="toc-number">2.4.8.</span> <span class="toc-text">8.画</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFreflow%EF%BC%9F"><span class="toc-number">2.5.</span> <span class="toc-text">什么是reflow？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFrepaint%EF%BC%9F"><span class="toc-number">2.6.</span> <span class="toc-text">什么是repaint？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88transform%E7%9A%84%E6%95%88%E7%8E%87%E9%AB%98%EF%BC%9F"><span class="toc-number">2.7.</span> <span class="toc-text">为什么transform的效率高？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2023-11-27"><span class="toc-number">3.</span> <span class="toc-text">2023-11-27</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%81%B0%E9%98%B6%E6%BB%A4%E9%95%9C"><span class="toc-number">3.1.</span> <span class="toc-text">1.灰阶滤镜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-js%E5%AE%9E%E7%8E%B0%E6%97%A0%E9%99%90%E5%BE%AA%E7%8E%AF%E8%BD%AE%E6%92%AD%E5%9B%BE"><span class="toc-number">3.2.</span> <span class="toc-text">2.js实现无限循环轮播图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-sticky%E5%AE%9A%E4%BD%8D"><span class="toc-number">3.3.</span> <span class="toc-text">3.sticky定位</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-visibilitychange-%E7%A6%BB%E5%BC%80-%E8%BF%9B%E5%85%A5%E6%A0%87%E7%AD%BE%E9%A1%B5%E4%BA%8B%E4%BB%B6"><span class="toc-number">3.4.</span> <span class="toc-text">4.visibilitychange 离开&#x2F;进入标签页事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E9%9B%B6%E5%AE%BD%E5%AD%97%E7%AC%A6"><span class="toc-number">3.5.</span> <span class="toc-text">5.零宽字符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%B1%82%E5%92%8C"><span class="toc-number">3.6.</span> <span class="toc-text">6.求和</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E6%96%87%E5%AD%97%E6%8F%8F%E8%BE%B9text-stroke"><span class="toc-number">3.7.</span> <span class="toc-text">7.文字描边text-stroke</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-js%E7%B1%BB%E9%87%8C%E5%88%9B%E5%BB%BA%E7%A7%81%E6%9C%89%E5%AD%97%E6%AE%B5"><span class="toc-number">3.8.</span> <span class="toc-text">8.js类里创建私有字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E4%B8%8B%E6%8B%89%E8%8F%9C%E5%8D%95%E7%9A%84%E8%BF%87%E6%B8%A1%E6%95%88%E6%9E%9C"><span class="toc-number">3.9.</span> <span class="toc-text">9.下拉菜单的过渡效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E8%B7%A8%E5%9F%9Fcors"><span class="toc-number">3.10.</span> <span class="toc-text">10.跨域cors</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E8%AF%B7%E6%B1%82"><span class="toc-number">3.10.1.</span> <span class="toc-text">简单请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E8%AF%B7%E6%B1%82%E7%9A%84%E4%BA%A4%E4%BA%92%E8%A7%84%E8%8C%83"><span class="toc-number">3.10.2.</span> <span class="toc-text">简单请求的交互规范</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9C%80%E8%A6%81%E9%A2%84%E6%A3%80%E7%9A%84%E8%AF%B7%E6%B1%82"><span class="toc-number">3.10.3.</span> <span class="toc-text">需要预检的请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%99%84%E5%B8%A6%E8%BA%AB%E4%BB%BD%E5%87%AD%E8%AF%81%E7%9A%84%E8%AF%B7%E6%B1%82"><span class="toc-number">3.10.4.</span> <span class="toc-text">附带身份凭证的请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A5%E5%85%85"><span class="toc-number">3.10.5.</span> <span class="toc-text">补充</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E8%A7%A3%E6%9E%90url%E4%B8%AD%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-number">3.11.</span> <span class="toc-text">10.解析url中的参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E7%94%9F%E6%88%90%E9%9A%8F%E6%9C%BA%E9%A2%9C%E8%89%B2"><span class="toc-number">3.12.</span> <span class="toc-text">11.生成随机颜色</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-js%E7%9A%84atob%E5%92%8Cbtoa%E5%87%BD%E6%95%B0"><span class="toc-number">3.13.</span> <span class="toc-text">12.js的atob和btoa函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-%E5%88%A4%E6%96%AD%E4%B8%80%E4%B8%AA%E5%80%BC%E6%98%AF%E5%90%A6%E6%98%AFPromise-Like%EF%BC%9F"><span class="toc-number">3.14.</span> <span class="toc-text">13.判断一个值是否是Promise Like？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AAPromise"><span class="toc-number">3.15.</span> <span class="toc-text">14.手写一个Promise</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-%E8%AF%AD%E4%B9%89%E5%8C%96%E7%89%88%E6%9C%AC"><span class="toc-number">3.16.</span> <span class="toc-text">15.语义化版本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-axios"><span class="toc-number">3.17.</span> <span class="toc-text">16.axios</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-%E6%95%B0%E6%8D%AE%E5%9F%8B%E7%82%B9"><span class="toc-number">3.18.</span> <span class="toc-text">17.数据埋点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-web%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-number">3.19.</span> <span class="toc-text">18.web性能指标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-%E4%BB%8E%E8%A7%86%E9%A2%91%E6%96%87%E4%BB%B6%E4%B8%AD%E6%8F%90%E5%8F%96%E7%94%BB%E9%9D%A2%E5%B8%A7"><span class="toc-number">3.20.</span> <span class="toc-text">19.从视频文件中提取画面帧</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-ESMoudle%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">3.21.</span> <span class="toc-text">20.ESMoudle的工作原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-defineProperty%E5%92%8Cproxy"><span class="toc-number">3.22.</span> <span class="toc-text">21.defineProperty和proxy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%B8%8E%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2"><span class="toc-number">3.23.</span> <span class="toc-text">22.垃圾回收与内存泄露</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-%E8%A7%A3%E6%9E%90DOM%E6%A0%91"><span class="toc-number">3.24.</span> <span class="toc-text">23.解析DOM树</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        日常随记
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">ZJY</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2023-11-03T09:49:54.000Z" itemprop="datePublished">2023-11-03</time>
        
        (Updated: <time datetime="2023-11-30T11:54:52.655Z" itemprop="dateModified">2023-11-30</time>)
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/ZJY.github.io/categories/%E7%AC%94%E8%AE%B0/">笔记</a> › <a class="category-link" href="/ZJY.github.io/categories/%E7%AC%94%E8%AE%B0/Javascript/">Javascript</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/ZJY.github.io/tags/%E5%89%8D%E7%AB%AF/" rel="tag">前端</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="2023-11-03"><a href="#2023-11-03" class="headerlink" title="2023-11-03"></a>2023-11-03</h2><h3 id="sockjs-node-info-t-时间戳"><a href="#sockjs-node-info-t-时间戳" class="headerlink" title="/sockjs-node/info?t=${时间戳}"></a>/sockjs-node/info?t=${时间戳}</h3><p>当运行npm run dev启动项目后，在浏览器的network中会自动持续发送<code>/sockjs-node/info?t=$&#123;时间戳&#125;</code>请求。</p>
<p>sockjs-node是什么？<br>sockjs-node是一个JavaScript库，提供跨浏览器的API，创建了一个低延迟、全双工的浏览器和web服务器之间的通道。<br>在项目运行后，会已知调用该接口。<br>SockJS是一个JavaScript库。提供类似于websocket的对象。其作用就是在开发环境下，保证我们在改完代码重写编译后，能够通知浏览器重新加载变更结果。</p>
<p>这里理解为这个库用来让浏览器和本地之间热更新通信的。</p>
<p>如果两个地址对接不上，或者更换wifi等都会报错：sockjs-node/info?t= net::ERR_CONNECTION_TIMED_OUT</p>
<p>需要关闭该请求可以找到node_modules/sockjs-client/dist/sockjs.js ，注释代码的第1603行： </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="comment">// self.xhr.send(payload); 注释掉该行</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  self.emit(<span class="string">&#x27;finish&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  self._cleanup(<span class="literal">false</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上只在本地有效，重新安装依赖或者别的同事都需要重新修改，可添加脚本，当npm install后替换掉node_modules/sockjs-client/dist/sockjs.js该文件</p>
<p>1.在根目录下新建该文件lib/sockjs.js,拷贝node_modules/sockjs-client/dist/sockjs.js文件并注释掉1603行</p>
<p>2.在根目录下创建installSockjs.js文件，将node_modules对应文件替换为lib/sockjs.js文件</p>
<p>3.在package.json的scripts中添加脚本命令：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="string">&quot;postinstall: node installSockjs.js&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4.最后npm install即可，但是这样作热更新没有了。</p>
<h3 id="postinstall干什么的？？？"><a href="#postinstall干什么的？？？" class="headerlink" title="postinstall干什么的？？？"></a>postinstall干什么的？？？</h3><p>postinstall是安装完某个包后自动执行的脚本。可以在package.json添加postinstall设置执行的脚本命令，帮我们做一些额外的处理，例如复制文件、创建目录、执行脚本、打印信息等。</p>
<p>例如：将 dist 目录下的所有文件复制到 public 目录下。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts:&quot;</span> &#123;</span><br><span class="line">  <span class="attr">&quot;postinstall&quot;</span>: <span class="string">&quot;cp -r dist/* public/&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="数组扩展运算符"><a href="#数组扩展运算符" class="headerlink" title="数组扩展运算符"></a>数组扩展运算符</h3><p>数组的扩展运算符可以将一个数组转为用逗号分隔的参数序列，且每次只能展开一层数组。</p>
<h2 id="2023-11-22"><a href="#2023-11-22" class="headerlink" title="2023-11-22"></a>2023-11-22</h2><h3 id="事件循环"><a href="#事件循环" class="headerlink" title="事件循环"></a>事件循环</h3><p>事件循环：浏览器的核心</p>
<p>进程：</p>
<p>何为进程：程序运行需要有他自己专有的内存空间，可以把这块内存空间简单的称为进程</p>
<p>每个应用至少有一个进程，进程之间相互独立，即使通信也要双方同意。</p>
<p>何为线程：<br>有了进程后，就可以运行程序，运行程序的称为线程。<br>一个进程至少有一个线程，所以在进程开启后会自动创建一个线程来运行代码，这个线程称为主线程。<br>如果程序需要同时运行多块代码，主线程会启动更多的线程来运行代码。所以一个进程可以包含多个线程。</p>
<p>浏览器有哪些进程和线程？</p>
<p>浏览器是一个多进程多线程的应用程序。</p>
<p>浏览器内部及其复杂，为了避免互相影响，减少崩溃的几率，启动浏览器后，会启动多个进程。</p>
<p>浏览器进程、网络进程、渲染进程 等</p>
<p>浏览器主要进程有：</p>
<p>浏览器进程：<br>负责界面显示、用户交互、子进程管理等，浏览器进程会开启多个线程执行任务。</p>
<p>网络进程：<br>负责加载网络资源。网络进程内部会开启多个线程来执行不同的网络任务。</p>
<p>渲染进程：<br>渲染进程开启后，会启动一个渲染主线程，主线程负责html、css、js代码。</p>
<p>默认情况下，浏览器为每一个标签页开启一个新的渲染进程，保证不同标签页互不影响。</p>
<p>事件循环发生在渲染主线程。</p>
<p>渲染主线程是如何工作的？</p>
<p>渲染主线程是浏览器最繁忙的线程，需要它处理的任务包括但不限于：</p>
<ul>
<li>解析html</li>
<li>解析css</li>
<li>计算样式</li>
<li>布局</li>
<li>处理图层</li>
<li>每秒把页面画60次</li>
<li>执行全局js代码</li>
<li>处理事件监听函数</li>
<li>执行定时器的回调函数</li>
<li>…</li>
</ul>
<p>渲染主线程如何调度任务呢？排队</p>
<p>1、最开始的时候，渲染主线程进入一个无限循环<br>2、每一次循环会检查事件队列（消息队列）是否有任务存在，如果有，取出第一个任务在主线程执行，执行完后进入下一个循环；如果没有则进入休眠<br>3、其他所有线程（包括其他进程的线程）可以随时向事件队列添加任务，新任务会添加到事件队列的末尾。在添加新任务时如果主线程处在休眠状态则会唤醒以继续循环拿取任务。</p>
<p>以上整个过程称为事件循环。</p>
<p>何为异步？</p>
<p>代码在执行过程中，会遇到无法立即处理的任务，比如：</p>
<ul>
<li>计时完成后需要执行的任务：setTimeout setInterval</li>
<li>网络通信完成后需要执行的任务：xhr fetch</li>
<li>用户操作后要执行的任务：addEventListener</li>
</ul>
<p>如果让渲染主线程等待这些任务的时机到达，就会导致主线程阻塞，造成浏览器卡死。因此浏览器选择异步来解决问题。</p>
<p>比如：渲染主线程遇到计时器，通知计时线程去计时，结束该任务，继续循环从事件队列拿取任务，计时线程计时结束后将回调函数包装成任务放进事件队列末尾。</p>
<p>使用异步的方式，渲染主线程永不阻塞。</p>
<h3 id="如何理解js中的异步？"><a href="#如何理解js中的异步？" class="headerlink" title="如何理解js中的异步？"></a>如何理解js中的异步？</h3><p>js是一门单线程的语言，运行在浏览器的渲染主线程内，渲染主线程只有一个，承担很多任务，比如解析html、css、计算样式、布局、执行js代码等。如果使用同步的方式就有可能阻塞主线程，导致事件队列的其他任务不能执行，造成渲染主线程白白浪费，页面无法更新，给用户造成卡死现象。<br>所以浏览器使用异步的方式来避免。具体做法是某些任务发生时，如计时器、网络、事件监听，主线程交给其他线程去处理，自身立即结束任务，执行后续代码。当其他线程执行结束时，就将事先传递回调函数包装成任务加入到事件队列末尾，等待主线程调度执行。<br>在这种异步模式下，浏览器永不阻塞，最大限度的保证了单线程的流畅运行。</p>
<p>js为何会阻碍渲染？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> h1 = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;h1&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">let</span> btn = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;button&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">delay</span>(<span class="params">duration</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> start = <span class="built_in">Date</span>.now()</span><br><span class="line">  <span class="keyword">while</span>(<span class="built_in">Date</span>.now() - start &lt; duration) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  h1.textContent = <span class="string">&#x27;hahah&#x27;</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;onclick&#x27;</span>)</span><br><span class="line">  delay(<span class="number">3000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上代码点击按钮时，会打印onclick，延时3秒后h1显示‘hahah’，因为delay方法占据主线程运行3秒，h1.textContent绘制需要事件队列排队等待，造成页面阻塞。</p>
<p>任务有优先级吗？<br>任务没有优先级，在队列中先进先出<br>但是事件队列是有优先级的。<br>根据w3c最新解释：</p>
<ul>
<li>每个任务都有一个类型，同一个类型的任务必须在同一个队列，不同类型的任务可以分属于不同的队列。再一次事件循环中，浏览器可以根据实际情况从不同的队列取出任务执行。</li>
<li>浏览器必须有一个微队列，微队列中的任务优先于其他任务执行</li>
</ul>
<p>随着浏览器的复杂度上升，w3c不再使用宏队列的说法</p>
<p>在目前chrome的实现中，至少包含以下队列：</p>
<ul>
<li>延时队列：用于存放计时器的回调任务，优先级【中】</li>
<li>交互队列：用于存放用户操作后的回调任务，优先级【高】</li>
<li>微队列：用户存放最快执行的任务，优先级【最高】</li>
</ul>
<p>添加到微队列的方式主要是Promise、MutationObserver<br>例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">立即把一个函数添加到微队列</span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(函数)</span><br></pre></td></tr></table></figure>
<p>示例1：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>) <span class="comment">// fn1</span></span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<p>输出： 2、1</p>
<p>主线程：全局js<br>微队列：<br>延时队列：fn1<br>交互队列：</p>
<p>解析：主线程执行全局js，遇到setTimeout，计时线程0秒后将fn1放入延时队列-》继续执行全局js-》输出2-》全局js结束，主线程空，微队列空，执行延时队列fn1-》输出1</p>
<p>示例2:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">delay</span>(<span class="params">duration</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> start = <span class="built_in">Date</span>.now()</span><br><span class="line">  <span class="keyword">while</span>(<span class="built_in">Date</span>.now() - start &lt; duration) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line">delay()</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<p>输出：等待3秒、2、1</p>
<p>解析：主线程执行全局js，遇到setTimeout，计时线程0秒后将fn1放入延时队列-》继续执行全局js-》执行delay函数3秒-》输出2-》全局js结束，主线程空，微队列空，执行延时队列fn1-》输出1</p>
<p>示例3:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>) <span class="comment">// 回调fn1</span></span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>) <span class="comment">// 回调fn2</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p>输出：3、2、1</p>
<p>主线程：全局js<br>微队列：fn2<br>延时队列：fn1<br>交互队列：</p>
<p>解析：<br>  主线程执行全局js，遇到setTimeout，计时线程0秒后将fn1放入延时队列<br>  继续全局js执行，遇Promise，立即将fn2添加到微队列<br>  继续全局js，输出3<br>  全局js结束，主线程空，微队列不为空，执行fn2<br>  输出2，fn2结束，继续循环<br>  微队列空，延迟队列不为空，执行fn1<br>  输出1，fn1结束，继续循环</p>
<p>示例4:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">  <span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>) <span class="comment">// fn2</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123; <span class="comment">// fn3</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">  <span class="built_in">Promise</span>.resolve().then(a) <span class="comment">// fn(a)</span></span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">4</span>) <span class="comment">// fn4</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">5</span>)</span><br></pre></td></tr></table></figure>
<p>输出：5、4、3、1、2</p>
<p>主线程：全局js<br>微队列：fn4-&gt;fn(a)-&gt;fn2<br>延时队列：fn3<br>交互队列：</p>
<p>解析：<br>  主线程执行全局js，遇到setTimeout，计时线程0秒后将fn3放入延时队列<br>  继续全局js执行，遇Promise，立即将fn4添加到微队列<br>  继续全局js，输出5<br>  全局js结束，主线程空，微队列不为空，执行fn4<br>  输出4，结束任务，继续循环，微队列空，查询延时队列不为空<br>  执行fn3，输出3、遇Promise，立即将fn(a)添加到微队列，结束该任务，继续循环<br>  微队列不空，执行fn(a)，输出1，遇Promise，立即将fn2添加到微队列，结束该任务，继续循环<br>  微队列不空，执行fn2，输出2，结束该任务</p>
<p>示例5:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">  <span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>) <span class="comment">// fn2</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123; </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>) <span class="comment">// fn3</span></span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(a) <span class="comment">// fn(a)</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">4</span>)</span><br></pre></td></tr></table></figure>
<p>输出：4、1、2、3</p>
<p>主线程：全局js<br>微队列：fn(a)-&gt;fn2<br>延时队列：fn3<br>交互队列：</p>
<p>解析：<br>  主线程执行全局js，遇到setTimeout，计时线程0秒后将fn3放入延时队列<br>  继续全局js执行，遇Promise，立即将fn(a)添加到微队列<br>  继续全局js，输出4<br>  全局js结束，主线程空，微队列不为空，执行fn(a)<br>  输出1，遇Promise，立即将fn2添加到微队列，结束该任务，继续循环<br>  微队列不空，执行fn2，输出2，结束该任务，继续循环<br>  微队列空，延时队列不空，执行fn3，输出3，结束该任务</p>
<p>阐述js的事件循环：</p>
<p>事件循环又叫做消息循环，是浏览器的渲染主线程的工作方式。</p>
<p>在chrome中开启一个无限循环，每次循环从队列中取出第一个任务执行，而其他线程只需要在合适的时机将任务添加到队列末尾。<br>过去把消息队列分为宏队列和微队列，这种说法无法满足复杂的浏览器环境，取而代之的是另一钟灵活的处理方式。</p>
<p>根据w3c官方解释，每个任务都有一个类型，同一个类型的任务必须在同一个队列，不同任务属于不同的队列。<br>不同的任务队列有不同的优先级，在一次事件循环中，浏览器自行决定选取哪一个队列的任务。但浏览器必须有一个微队列，微队列具有最高的优先级，必须优先调度执行。</p>
<h3 id="js中计时器能做到精准计时吗？"><a href="#js中计时器能做到精准计时吗？" class="headerlink" title="js中计时器能做到精准计时吗？"></a>js中计时器能做到精准计时吗？</h3><p>不能，因为：</p>
<ul>
<li>计算机硬件没有原子钟，无法做到精准计时</li>
<li>操作系统的计时函数本身就有偏差，js计时器最终调用的是操作系统的函数，所以携带了偏差</li>
<li>按照w3c的标准，浏览器实现计时器，嵌套超过5层，则会带有4毫秒的最小偏差，计时少于4毫秒又带来偏差</li>
<li>受事件循环的影响，计时器的回调函数只能在主线程空闲时执行，因此带来偏差</li>
</ul>
<p>单线程是异步产生的原因<br>事件循环是异步的实现方式</p>
<h3 id="浏览器的渲染原理"><a href="#浏览器的渲染原理" class="headerlink" title="浏览器的渲染原理"></a>浏览器的渲染原理</h3><p>当浏览器的网络线程收到HTML文档后，会产生一个渲染任务，并将其传递到渲染主线程的消息队列。<br>在事件循环机制下，渲染主线程取出渲染任务，开启渲染流程。</p>
<p>整个渲染流程分为多个阶段，分别是：HTML解析、样式计算、布局、分层、绘制、分块、光栅化、画。<br>每个阶段都有明确的输出，上一个阶段的输出是下一个阶段的输入。<br>这样，整个阶段就成为一段严密的流水线。</p>
<p><strong><em>HTML字符串-〉解析HTML-〉样式计算-〉布局-〉分层-〉绘制-〉分块-〉光栅化-〉画-〉像素信息</em></strong><br>渲染：将html字符串-&gt;像素信息</p>
<h4 id="1-解析HTML"><a href="#1-解析HTML" class="headerlink" title="1.解析HTML"></a>1.解析HTML</h4><p>**<br>解析过程中遇到css，解析css，遇到js解析js。为了提高效率，浏览器在解析前，会启动一个预解析的线程，率先下载HTML中外部的css文件和外部的js文件。<br>如果主线程解析到link位置，此时外部的css文件还没有解析下载好，主线程不会等待，继续后续HTML的解析。这是因为下载和解析css是在与解析线程中进行的。这就是css不会阻塞HTML解析的根本原因。<br>如果主线程解析道script位置，主线程会停止解析HTML，转而等待js文件下载好，并将全局代码解析完成后，才继续解析HTML。这是因为js代码可能会修改当前的DOM树，所以DOM生成必须暂停。这就是js会阻塞HMTL解析的根本原因。<br>第一步完成后，会生成CSSOM树和DOM树，内部样式、外部样式、内联样式、浏览器默认样式都会包含在CSSOM树。<br>**</p>
<p>渲染的第一步是解析HTMl，ParseHTML，产生DOM树（Document Object Model）和CSSOM树(css Object Model)</p>
<p>css样式包括：内部样式style，外部样式link，内联样式，浏览器默认样式<br>js修改style样式，docu.style = ‘’<br>js修改<code>&lt;style&gt;</code>和外部样式，document.styleSheets[0].addRule(‘div’, ‘border: 1px solid #f40’)</p>
<p>解析HTML，遇到css代码怎么办？<br>为了提高效率，浏览器会启动一个预解析器率先下载和解析css，css不会阻塞解析HTML。</p>
<h4 id="2、样式计算-recalculate-style"><a href="#2、样式计算-recalculate-style" class="headerlink" title="2、样式计算- recalculate style"></a>2、样式计算- recalculate style</h4><p>**<br>主线程遍历整个DOM树，依次为每一个节点计算出最终样式，computed style，<br>在这个过程中，很多预设值会变成绝对值，比如red会变成rgb(255, 0, 0); 相对单位会变成绝对单位，比如em会变成px。<br>这一步完成后，会得到一颗带样式的DOM树<br>**</p>
<p>getComputedStyle()获取最终样式</p>
<h4 id="3、布局-Layout"><a href="#3、布局-Layout" class="headerlink" title="3、布局-Layout"></a>3、布局-Layout</h4><p>**<br>接下来是布局，布局完成后会得到布局树。<br>布局阶段会依次遍历DOM树的每一个节点，计算每个节点的几何信息。例如节点的宽高、相对包含块的位置。<br>大部分时候，DOM树和布局树不是一一对应的。<br>比如dislay:none没有几何信息，因此不会生成到布局树中，又比如使用伪元素选择器，虽然DOM树中不存在这些伪元素节点，但是他们拥有几何信息，所以会生成到布局树。<br>**</p>
<p>DOM树和布局树不是一一对应的。有几何信息的才会在布局树中出现，display：none不出现<br>文本内容必须放在行盒中。</p>
<p>document.body.clientWidth,获取的布局信息</p>
<h4 id="4、分层"><a href="#4、分层" class="headerlink" title="4、分层"></a>4、分层</h4><p>**<br>主线程会使用一套复杂的策略对布局树进行分层。<br>分层的好处在于，将来某一层改变后，仅对该层进行后续处理，从而提高效率。</p>
<p>滚动条、堆叠上下文、transform、opacity等样式都会影响分层结果。will-change熟悉会更大程度影响分层。<br>**</p>
<h4 id="5、绘制"><a href="#5、绘制" class="headerlink" title="5、绘制"></a>5、绘制</h4><p>**<br>主线程会为每个层单独产生绘制指令集，用于描述每个层的内容该如何画出来。<br>完成绘制后，主线程将绘制信息提交给合成线程，后续工作交由合成线程完成。<br>**</p>
<h4 id="6、分块"><a href="#6、分块" class="headerlink" title="6、分块"></a>6、分块</h4><p>合成线程会对每个图层进行分块，将其划分为更小的区域。<br>它会从线程池中拿更多线程来完成分块工作。</p>
<p>分块完成后进入光栅化阶段。</p>
<h4 id="7-光栅化"><a href="#7-光栅化" class="headerlink" title="7.光栅化"></a>7.光栅化</h4><p>合成线程将块交由GPU进程，完成光栅化，极高速度。<br>GPU进程会开启多个线程完成光栅化，并且优先处理靠近视口区域的块。<br>光栅化的结果是一块一块的位图。</p>
<h4 id="8-画"><a href="#8-画" class="headerlink" title="8.画"></a>8.画</h4><p>合成线程计算出每个位图的在屏幕上的位置，交由GPU进程最终呈现。</p>
<p>渲染进程（在沙盒，隔离硬件，安全）：渲染主线程、合成线程</p>
<p>所以交由GPU进程</p>
<p>transform发生在合成线程，与渲染主线程无关所以效率高。</p>
<h3 id="什么是reflow？"><a href="#什么是reflow？" class="headerlink" title="什么是reflow？"></a>什么是reflow？</h3><p>渲染主线程：parse—-computed style—-layout—-layer—-paint<br>合成线程：—-tiling分块—-raster光栅化—-draw-〉</p>
<p>cssom<br>dom<br>几何信息、布局</p>
<p>reflow的本质是重新计算布局树。<br>当进行了会影响布局树的操作后，会重新计算布局树，引发layout。<br>为了避免连续多次的操作导致布局树多次计算，浏览器会合并这些操作。当js代码全部执行完后统一计算。所以改动属性引发的reflow是异步的。</p>
<p>因此js获取布局属性时，可能是重新布局前的信息，无法获取最新的布局信息，浏览器在反复权衡下，最终决定获取熟悉立即reflow。</p>
<p>doc.style.width = ‘’<br>doc.style.height = ‘’<br>doc.style.margin = ‘’<br>doc.clientWidth // 立即reflow</p>
<h3 id="什么是repaint？"><a href="#什么是repaint？" class="headerlink" title="什么是repaint？"></a>什么是repaint？</h3><p>repaint本质是重新根据分层信息计算了绘制指令。<br>当改动了可见样式就需要重新计算，引发repaint。<br>由于元素的布局信息也属于可见样式，所以reflow一定引发repaint。</p>
<h3 id="为什么transform的效率高？"><a href="#为什么transform的效率高？" class="headerlink" title="为什么transform的效率高？"></a>为什么transform的效率高？</h3><p>因为transform既不影响布局也不影响绘制，它影响的是渲染流程的最后一个阶段draw。<br>由于draw阶段在合成线程，所以transform的变化几乎不影响渲染主线程。反之，渲染主线程也不会影响transform的变化。</p>
<h2 id="2023-11-27"><a href="#2023-11-27" class="headerlink" title="2023-11-27"></a>2023-11-27</h2><h3 id="1-灰阶滤镜"><a href="#1-灰阶滤镜" class="headerlink" title="1.灰阶滤镜"></a>1.灰阶滤镜</h3><p>filter: grayscale(1) 灰阶滤镜 将对应元素的像素点转换为灰色，0是原图，1是全灰，grayscale是filter滤镜中的一种，<br>可以设置在html全局或局部区域上。</p>
<h3 id="2-js实现无限循环轮播图"><a href="#2-js实现无限循环轮播图" class="headerlink" title="2.js实现无限循环轮播图"></a>2.js实现无限循环轮播图</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Swiper<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    * &#123;</span><br><span class="line">      margin: 0;</span><br><span class="line">      padding: 0;</span><br><span class="line">      box-sizing: border-box;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> &#123;</span></span><br><span class="line">      width: 300px;</span><br><span class="line">      height: 200px;</span><br><span class="line">      overflow: hidden;</span><br><span class="line">      border: 1px solid blue;</span><br><span class="line">      position: relative;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.carousel</span> &#123;</span></span><br><span class="line">      display: flex;</span><br><span class="line">      height: 100%;</span><br><span class="line"><span class="css">      <span class="comment">/* transition: 0.5s; */</span></span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.carousel_item</span> &#123;</span></span><br><span class="line">      background-color: aquamarine;</span><br><span class="line">      color: white;</span><br><span class="line">      height: 100%;</span><br><span class="line">      width: 300px;</span><br><span class="line">      min-width: 300px;</span><br><span class="line">      text-align: center;</span><br><span class="line">      font-size: 30px;</span><br><span class="line">      padding-top: 60px;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.indicate</span> &#123;</span></span><br><span class="line">      position: absolute;</span><br><span class="line">      bottom: 20px;</span><br><span class="line">      left: 50%;</span><br><span class="line">      transform: translateX(-50%);</span><br><span class="line">      display: flex;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.dot</span> &#123;</span></span><br><span class="line">      width: 10px;</span><br><span class="line">      height: 10px;</span><br><span class="line">      margin: 0 10px 0 0;</span><br><span class="line">      border-radius: 50%;</span><br><span class="line">      border: 2px solid blueviolet;</span><br><span class="line">      background-color: white;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.dot</span><span class="selector-class">.active</span> &#123;</span></span><br><span class="line">      background-color: blueviolet;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel_item&quot;</span> &gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel_item&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel_item&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;indicate&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dot active&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dot&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dot&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 无限循环原理：</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// 弹性盒水平排列，设置translateX移动加transition过渡动画</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// 克隆第一个轮播图元素到轮播容器末尾，当轮播到最后一个轮播图时，使其下次轮播克隆的元素即轮播容器最后添加的克隆元素，</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// 同时指示器active第一个点，过渡动画结束后，立即translateX移动到第一个轮播位置（取消过渡动画），实现无痕无限循环轮播</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> doms = &#123;</span></span><br><span class="line"><span class="javascript">      carousel: <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.carousel&#x27;</span>),</span></span><br><span class="line"><span class="javascript">      carouselItems: <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.carousel_item&#x27;</span>),</span></span><br><span class="line"><span class="javascript">      indicators: <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.dot&#x27;</span>)</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">moveTo</span>(<span class="params">index</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">&#x27;moveTo: &#x27;</span> + index)</span></span><br><span class="line"><span class="javascript">      doms.carousel.style.transition = <span class="string">&#x27;0.5s&#x27;</span></span></span><br><span class="line"><span class="javascript">      doms.carousel.style.transform = <span class="string">`translateX(-<span class="subst">$&#123;index&#125;</span>00%)`</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 去除当前选中指示器</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> active = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.dot.active&#x27;</span>)</span></span><br><span class="line"><span class="javascript">      active.classList.remove(<span class="string">&#x27;active&#x27;</span>)</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 重新设置指示器</span></span></span><br><span class="line"><span class="javascript">      doms.indicators[index].classList.add(<span class="string">&#x27;active&#x27;</span>)</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">    <span class="comment">// 给指示器添加点击事件</span></span></span><br><span class="line"><span class="javascript">    doms.indicators.forEach(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      item.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line">        moveTo(index)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="javascript">    <span class="comment">// 在轮播收尾各添加一个克隆项</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> firstClone = doms.carouselItems[<span class="number">0</span>].cloneNode(<span class="literal">true</span>)</span></span><br><span class="line">    doms.carousel.appendChild(firstClone)</span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> initialValue = <span class="number">0</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> currentItems = <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.carousel_item&#x27;</span>)</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> interval = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line">      initialValue++</span><br><span class="line"><span class="javascript">      <span class="comment">// 当轮播到最后一张时，轮播指向克隆的第一张，指示器指向第一个，过渡动画结束后移到第一张轮播图</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (initialValue &gt;= currentItems.length - <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="javascript">        doms.carousel.style.transition = <span class="string">&#x27;0.5s&#x27;</span></span></span><br><span class="line"><span class="javascript">        doms.carousel.style.transform = <span class="string">`translateX(-<span class="subst">$&#123;initialValue&#125;</span>00%)`</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 去除当前选中指示器</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> active = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.dot.active&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (active) active.classList.remove(<span class="string">&#x27;active&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 重新设置指示器为第一个</span></span></span><br><span class="line"><span class="javascript">        doms.indicators[<span class="number">0</span>].classList.add(<span class="string">&#x27;active&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line">          initialValue = 0</span><br><span class="line"><span class="javascript">          doms.carousel.style.transition = <span class="string">&#x27;none&#x27;</span></span></span><br><span class="line"><span class="javascript">          doms.carousel.style.transform = <span class="string">`translateX(-<span class="subst">$&#123;initialValue&#125;</span>00%)`</span></span></span><br><span class="line">        &#125;, 500)</span><br><span class="line"><span class="javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line">        moveTo(initialValue)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, 3000)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-sticky定位"><a href="#3-sticky定位" class="headerlink" title="3.sticky定位"></a>3.sticky定位</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Sticky<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    dl &#123;</span><br><span class="line"><span class="css">      <span class="comment">/* overflow: hidden; */</span></span></span><br><span class="line">    &#125;</span><br><span class="line">    dt &#123;</span><br><span class="line">      background-color: aquamarine;</span><br><span class="line">      font-size: 30px;</span><br><span class="line">      height: 40px;</span><br><span class="line">      position: sticky;</span><br><span class="line">      top: 0;</span><br><span class="line">    &#125;</span><br><span class="line">    dd &#123;</span><br><span class="line">      height: 30px;</span><br><span class="line">      line-height: 30px;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dt</span>&gt;</span>A<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>ALorem, ipsum.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>ANisi, rerum?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>ANisi, recusandae.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>AIusto, provident!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>AFuga, sed!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>ANemo, nobis?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>AModi, consequatur.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>ANemo, nihil!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>ARepellat, alias.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>AHic, nostrum!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>AMinima, ducimus.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>ABeatae, a!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>AAccusantium, vel?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>ACorporis, totam!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>AMinus, sapiente.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>ARem, tenetur.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>ALaboriosam, perferendis.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>AQuisquam, iste!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>AItaque, nihil?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>AQuos, ipsum.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dt</span>&gt;</span>B<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BLorem, ipsum.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BNisi, rerum?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BNisi, recusandae.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BIusto, provident!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BFuga, sed!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BNemo, nobis?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BModi, consequatur.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BNemo, nihil!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BRepellat, alias.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BHic, nostrum!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BMinima, ducimus.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BBeatae, a!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BAccusantium, vel?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BCorporis, totam!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BMinus, sapiente.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BRem, tenetur.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BLaboriosam, perferendis.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BQuisquam, iste!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BItaque, nihil?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BQuos, ipsum.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BBeatae, a!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BAccusantium, vel?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BCorporis, totam!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BMinus, sapiente.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BRem, tenetur.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BLaboriosam, perferendis.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BQuisquam, iste!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BItaque, nihil?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>BQuos, ipsum.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dt</span>&gt;</span>C<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CLorem, ipsum.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CNisi, rerum?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CNisi, recusandae.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CIusto, provident!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CFuga, sed!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CNemo, nobis?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CModi, consequatur.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CNemo, nihil!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CRepellat, alias.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CHic, nostrum!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CMinima, ducimus.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CBeatae, a!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CAccusantium, vel?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CCorporis, totam!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CMinus, sapiente.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CRem, tenetur.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CLaboriosam, perferendis.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CQuisquam, iste!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CItaque, nihil?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CQuos, ipsum.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CMinima, ducimus.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CBeatae, a!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CAccusantium, vel?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CCorporis, totam!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CMinus, sapiente.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CRem, tenetur.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CLaboriosam, perferendis.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CQuisquam, iste!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CItaque, nihil?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CQuos, ipsum.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CMinima, ducimus.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CBeatae, a!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CAccusantium, vel?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CCorporis, totam!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CMinus, sapiente.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CRem, tenetur.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CLaboriosam, perferendis.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CQuisquam, iste!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CItaque, nihil?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CQuos, ipsum.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CMinima, ducimus.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CBeatae, a!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CAccusantium, vel?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CCorporis, totam!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CMinus, sapiente.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CRem, tenetur.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CLaboriosam, perferendis.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CQuisquam, iste!<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CItaque, nihil?<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CQuos, ipsum.<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>注意，一个 sticky 元素会“固定”在离它最近的一个拥有“滚动机制”的祖先上，如果给其父元素dl设置overflow属性，则该属性失效，如果给body设置overflow属性，则相对于dl元素固定。如果都不设置，则相对于视口。<br>positon: sticky;元素根据正常文档流进行定位，然后相对它的最近滚动祖先和包含块，包括 table-related 元素，基于 top、right、bottom 和 left 的值进行偏移。<br>该值总是创建一个新的层叠上下文。须指定 top, right, bottom 或 left 四个阈值其中之一，才可使粘性定位生效。否则其行为与相对定位相同。</p>
<h3 id="4-visibilitychange-离开-进入标签页事件"><a href="#4-visibilitychange-离开-进入标签页事件" class="headerlink" title="4.visibilitychange 离开/进入标签页事件"></a>4.visibilitychange 离开/进入标签页事件</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&#x27;visibilitychange&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">document</span>.visibilityState) <span class="comment">// hidden, visible</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="5-零宽字符"><a href="#5-零宽字符" class="headerlink" title="5.零宽字符"></a>5.零宽字符</h3><p>零宽字符是一种不可打印的Unicode字符，在浏览器等环境不可见，但是真实存在，获取字符串长度时也会占位置，表示某一种控制功能的字符。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str1 = <span class="string">&#x27;哈哈\u200d\u200d嘿嘿&#x27;</span></span><br><span class="line"><span class="keyword">const</span> str2 = <span class="string">&#x27;哈哈嘿嘿&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(str1, str1.length, str1 === str2) <span class="comment">// 哈哈‍‍嘿嘿 6 false</span></span><br></pre></td></tr></table></figure>
<h3 id="6-求和"><a href="#6-求和" class="headerlink" title="6.求和"></a>6.求和</h3><p>求1开始的前n项的奇数和</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</span><br><span class="line">        result+=<span class="number">2</span>*i+<span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line">sum(<span class="number">1</span>) <span class="comment">// 1</span></span><br><span class="line">sum(<span class="number">2</span>) <span class="comment">// 4</span></span><br><span class="line">sum(<span class="number">3</span>) <span class="comment">// 9</span></span><br><span class="line">sum(<span class="number">4</span>) <span class="comment">// 16</span></span><br><span class="line">sum(<span class="number">5</span>) <span class="comment">// 25</span></span><br><span class="line">sum(<span class="number">6</span>) <span class="comment">// 36</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> n*n</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>求1开始的前n项的偶数和</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</span><br><span class="line">        result+=<span class="number">2</span>*(i+<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line">sum(<span class="number">1</span>) <span class="comment">// 2 = 1*2</span></span><br><span class="line">sum(<span class="number">2</span>) <span class="comment">// 6 = 2*3</span></span><br><span class="line">sum(<span class="number">3</span>) <span class="comment">// 12 = 3*4</span></span><br><span class="line">sum(<span class="number">4</span>) <span class="comment">// 20 = 4*5</span></span><br><span class="line">sum(<span class="number">5</span>) <span class="comment">// 30 = 5*6</span></span><br><span class="line">sum(<span class="number">6</span>) <span class="comment">// 42 = 6*7</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> n*(n+<span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>求1开始的前n项的和</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</span><br><span class="line">        result+=(i+<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line">sum(<span class="number">1</span>) <span class="comment">// 1 = n*(n+1)/2</span></span><br><span class="line">sum(<span class="number">2</span>) <span class="comment">// 3 </span></span><br><span class="line">sum(<span class="number">3</span>) <span class="comment">// 6</span></span><br><span class="line">sum(<span class="number">4</span>) <span class="comment">// 10</span></span><br><span class="line">sum(<span class="number">5</span>) <span class="comment">// 15</span></span><br><span class="line">sum(<span class="number">6</span>) <span class="comment">// 21</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> n*(n+<span class="number">1</span>)/<span class="number">2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>求1-n之间的奇数和</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (i%<span class="number">2</span> = <span class="number">1</span>) &#123;</span><br><span class="line">        result+=i</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line">sum(<span class="number">1</span>) <span class="comment">// 1</span></span><br><span class="line">sum(<span class="number">2</span>) <span class="comment">// 1 </span></span><br><span class="line">sum(<span class="number">3</span>) <span class="comment">// 4</span></span><br><span class="line">sum(<span class="number">4</span>) <span class="comment">// 4</span></span><br><span class="line">sum(<span class="number">5</span>) <span class="comment">// 9</span></span><br><span class="line">sum(<span class="number">6</span>) <span class="comment">// 9</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="7-文字描边text-stroke"><a href="#7-文字描边text-stroke" class="headerlink" title="7.文字描边text-stroke"></a>7.文字描边text-stroke</h3><p>-webkit-text-stroke: 2px #fff;</p>
<h3 id="8-js类里创建私有字段"><a href="#8-js类里创建私有字段" class="headerlink" title="8.js类里创建私有字段"></a>8.js类里创建私有字段</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">      <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>._abc = <span class="number">1</span> <span class="comment">// 以前没有私有字段用_来说明是私有字段但是外部可以访问</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="keyword">new</span> A()</span><br><span class="line">    <span class="built_in">console</span>.log(a._abc) <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">B</span> </span>&#123;</span><br><span class="line">      #abc; <span class="comment">// 定义一个私有字段</span></span><br><span class="line">      <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.#abc = <span class="number">1</span></span><br><span class="line">      &#125;</span><br><span class="line">      #method ()&#123;&#125; <span class="comment">// 私有方法</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> b = <span class="keyword">new</span> B()</span><br><span class="line">    <span class="built_in">console</span>.log(b, b.#abc) <span class="comment">// private field &#x27;#abc&#x27; must be declared in an enclosing class</span></span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="9-下拉菜单的过渡效果"><a href="#9-下拉菜单的过渡效果" class="headerlink" title="9.下拉菜单的过渡效果"></a>9.下拉菜单的过渡效果</h3><p><strong>css获取焦点设置高度auto展开，但是transition无效，只针对数值有效。</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>select-transition<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    * &#123;</span><br><span class="line">      margin: 0;</span><br><span class="line">      padding: 0;</span><br><span class="line">      box-sizing: border-box;</span><br><span class="line">    &#125;</span><br><span class="line">    body &#123;</span><br><span class="line">      padding-left: 100px;</span><br><span class="line">    &#125;</span><br><span class="line">    input &#123;</span><br><span class="line">      width: 400px;</span><br><span class="line">      height: 40px;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.select</span> &#123;</span></span><br><span class="line">      width: 400px;</span><br><span class="line">      border-right: 1px solid;</span><br><span class="line">      border-left: 1px solid;</span><br><span class="line">      border-bottom: 1px solid;</span><br><span class="line">      margin-top: -1px;</span><br><span class="line">      height: 0;</span><br><span class="line">      overflow: hidden;</span><br><span class="line">      transition: 1s;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.select</span> &gt; <span class="selector-tag">div</span> &#123;</span></span><br><span class="line">      line-height: 30px;</span><br><span class="line">      padding-left: 20px;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-tag">input</span><span class="selector-pseudo">:focus</span> ~ <span class="selector-class">.select</span> &#123;</span></span><br><span class="line">      height: auto</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;select&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Lorem, ipsum.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Ab, vel?<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Voluptatum, iusto.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Atque, repudiandae?<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Corporis, voluptas.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>已知select高度情况下可以设置具体值，比如</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:focus</span> ~ <span class="selector-class">.select</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300px</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>设置max-height值也可以实现效果。</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>select-transition<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    * &#123;</span><br><span class="line">      margin: 0;</span><br><span class="line">      padding: 0;</span><br><span class="line">      box-sizing: border-box;</span><br><span class="line">    &#125;</span><br><span class="line">    body &#123;</span><br><span class="line">      padding-left: 100px;</span><br><span class="line">    &#125;</span><br><span class="line">    input &#123;</span><br><span class="line">      width: 400px;</span><br><span class="line">      height: 40px;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.select</span> &#123;</span></span><br><span class="line">      width: 400px;</span><br><span class="line">      border-right: 1px solid;</span><br><span class="line">      border-left: 1px solid;</span><br><span class="line">      border-bottom: 1px solid;</span><br><span class="line">      margin-top: -1px;</span><br><span class="line">      height: auto;</span><br><span class="line">      overflow: hidden;</span><br><span class="line">      max-height: 0;</span><br><span class="line">      transition: 1s;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.select</span> &gt; <span class="selector-tag">div</span> &#123;</span></span><br><span class="line">      line-height: 30px;</span><br><span class="line">      padding-left: 20px;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-tag">input</span><span class="selector-pseudo">:focus</span> ~ <span class="selector-class">.select</span> &#123;</span></span><br><span class="line">      max-height: 300px;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;select&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Lorem, ipsum.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Ab, vel?<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Voluptatum, iusto.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Atque, repudiandae?<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Corporis, voluptas.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>注意，max-height的值，300px的高度过渡动画为1s，但实际上select真实高度并不一定是300，因此失焦时收起select会有延时</p>
<p><strong>使用js添加获取/失去焦点事件控制select高度。</strong></p>
<p>先css设置height为0，获取焦点时，设置高度auto获取实际高度，然后再设置select高度0，再设置获取的实际高度和transition，失焦时隐藏高度</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>select-transition<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    * &#123;</span><br><span class="line">      margin: 0;</span><br><span class="line">      padding: 0;</span><br><span class="line">      box-sizing: border-box;</span><br><span class="line">    &#125;</span><br><span class="line">    body &#123;</span><br><span class="line">      padding-left: 100px;</span><br><span class="line">    &#125;</span><br><span class="line">    input &#123;</span><br><span class="line">      width: 400px;</span><br><span class="line">      height: 40px;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.select</span> &#123;</span></span><br><span class="line">      width: 400px;</span><br><span class="line">      border-right: 1px solid;</span><br><span class="line">      border-left: 1px solid;</span><br><span class="line">      border-bottom: 1px solid;</span><br><span class="line">      margin-top: -1px;</span><br><span class="line">      height: 0;</span><br><span class="line">      overflow: hidden;</span><br><span class="line">      transition: 1s;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.select</span> &gt; <span class="selector-tag">div</span> &#123;</span></span><br><span class="line">      line-height: 30px;</span><br><span class="line">      padding-left: 20px;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;select&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Lorem, ipsum.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Ab, vel?<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Voluptatum, iusto.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Atque, repudiandae?<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Corporis, voluptas.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> input = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;input&#x27;</span>)</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> select = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.select&#x27;</span>)</span></span><br><span class="line"><span class="javascript">    input.onfocus = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      select.style.transition = <span class="string">&#x27;none&#x27;</span></span></span><br><span class="line"><span class="javascript">      select.style.height = <span class="string">&#x27;auto&#x27;</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 获取select高度</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> height = select.offsetHeight</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(height)</span></span><br><span class="line">      select.style.height = 0</span><br><span class="line"><span class="javascript">      select.offsetHeight <span class="comment">// 获取元素几何信息强制浏览器渲染，因为浏览器js设置dom会合并操作所以需要强制渲染</span></span></span><br><span class="line"><span class="javascript">      select.style.transition = <span class="string">&#x27;1s&#x27;</span></span></span><br><span class="line"><span class="javascript">      select.style.height = height + <span class="string">&#x27;px&#x27;</span></span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">    input.onblur = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      select.style.transition = <span class="string">&#x27;1s&#x27;</span></span></span><br><span class="line"><span class="javascript">      select.style.height = <span class="string">&#x27;0&#x27;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>利用css3的scaleY缩放高度。</strong></p>
<p>注：缩放过程字体会重叠</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>select-transition<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    * &#123;</span><br><span class="line">      margin: 0;</span><br><span class="line">      padding: 0;</span><br><span class="line">      box-sizing: border-box;</span><br><span class="line">    &#125;</span><br><span class="line">    body &#123;</span><br><span class="line">      padding-left: 100px;</span><br><span class="line">    &#125;</span><br><span class="line">    input &#123;</span><br><span class="line">      width: 400px;</span><br><span class="line">      height: 40px;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.select</span> &#123;</span></span><br><span class="line">      width: 400px;</span><br><span class="line">      border-right: 1px solid;</span><br><span class="line">      border-left: 1px solid;</span><br><span class="line">      border-bottom: 1px solid;</span><br><span class="line">      margin-top: -1px;</span><br><span class="line">      height: auto;</span><br><span class="line">      overflow: hidden;</span><br><span class="line">      transition: 1s;</span><br><span class="line">      z-index: -1;</span><br><span class="line">      transform-origin: center top;</span><br><span class="line">      transform: scaleY(0);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.select</span> &gt; <span class="selector-tag">div</span> &#123;</span></span><br><span class="line">      line-height: 30px;</span><br><span class="line">      padding-left: 20px;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-tag">input</span><span class="selector-pseudo">:focus</span> ~ <span class="selector-class">.select</span> &#123;</span></span><br><span class="line">      transform: scaleY(1);</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;select&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Lorem, ipsum.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Ab, vel?<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Voluptatum, iusto.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Atque, repudiandae?<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Corporis, voluptas.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="10-跨域cors"><a href="#10-跨域cors" class="headerlink" title="10.跨域cors"></a>10.跨域cors</h3><p>CORS是基于http1.1的一种跨域解决方案，全称跨域资源共享。<br>它的总体思路：如果浏览器要跨域访问服务器的资源，需要获取服务器的允许。</p>
<p>针对不同请求，cors规定里三种不同的交互模式：</p>
<ul>
<li>简单请求</li>
<li>需要预检的请求</li>
<li>携带身份凭证的请求</li>
</ul>
<h4 id="简单请求"><a href="#简单请求" class="headerlink" title="简单请求"></a>简单请求</h4><ol>
<li><p>请求方法属于以下的一种：get、post、head</p>
</li>
<li><p>请求头仅包含安全的字段，常见安全字段如下：</p>
<ul>
<li>Accept</li>
<li>Accept-Language</li>
<li>Content-Language</li>
<li>Content-Type</li>
<li>DPR</li>
<li>Downlink</li>
<li>Save-Data</li>
<li>Viewport-Width</li>
<li>Width</li>
</ul>
</li>
<li><p>请求头如果包含Content-Type，仅限以下值之一：</p>
<ul>
<li>text/plain</li>
<li>multipart/form-data</li>
<li>application/x-www-form-urlencoded</li>
</ul>
</li>
</ol>
<p>以上三个条件都满足，浏览器判断为简单请求。</p>
<h4 id="简单请求的交互规范"><a href="#简单请求的交互规范" class="headerlink" title="简单请求的交互规范"></a>简单请求的交互规范</h4><p>当前浏览器某个跨域请求是简单请求时，会发生以下：</p>
<ol>
<li>请求头中会自动添加Origin字段，哪个源地址在跨域请求</li>
<li>服务器响应头应包含Access-Control-Allow-Origin<br>服务器收到响应，如果允许跨域，则在响应头添加Access-Control-Allow-Origin字段，该属性值有：<ul>
<li>*：允许一切</li>
<li><a target="_blank" rel="noopener" href="http://my.com/">http://my.com</a>: 只允许<a target="_blank" rel="noopener" href="http://my.com这个源访问/">http://my.com这个源访问</a></li>
</ul>
</li>
</ol>
<h4 id="需要预检的请求"><a href="#需要预检的请求" class="headerlink" title="需要预检的请求"></a>需要预检的请求</h4><p>如果浏览器不认为是简单请求，会按照以下流程进行：</p>
<ul>
<li>浏览器发送预检请求，访问服务器是否允许</li>
<li>服务器允许访问</li>
<li>浏览器发送真实的请求</li>
<li>服务器完成真实的响应</li>
</ul>
<p>例如以下请求，就是需要预检请求</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">&quot;http://my.com/api/user&quot;</span>, &#123;</span><br><span class="line">  method: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">  header: &#123;</span><br><span class="line">    a:<span class="number">1</span></span><br><span class="line">    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  body: ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="附带身份凭证的请求"><a href="#附带身份凭证的请求" class="headerlink" title="附带身份凭证的请求"></a>附带身份凭证的请求</h4><p>默认情况下，ajax的请求并不会携带cookie，可以配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xhr</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">xhr.withCredentials = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// fetch api</span></span><br><span class="line">fetch(url, &#123;</span><br><span class="line">  credentials: <span class="string">&#x27;include&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>这样，该跨域的请求就是附带身份凭证的请求。当一个请求附带cookie时，无论是简单请求还是预检请求，都会在请求头中添加cookie字段，<br>而服务器响应时需要明确告知客户端服务器允许这样的凭证：Access-Control-Allow-Credentials: true.若服务器没有响应则跨域被拒绝，<br>注意：对于附带身份凭证的请求，服务器不得设置Access-Control-Allow-Origin:*。</p>
<h4 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h4><p>在跨域访问时，js只能拿到一些最基本的响应头，比如：Cache-Control、Content-Language、Content-Type、Expires、Last-Modified、Progma，如果要访问其他头，需要服务器设置响应头。</p>
<p>Access-Control-Export-Headers：authorization…,这样浏览器就可以访问authorization响应头了。</p>
<h3 id="10-解析url中的参数"><a href="#10-解析url中的参数" class="headerlink" title="10.解析url中的参数"></a>10.解析url中的参数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parseQuery</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> q = &#123;&#125;</span><br><span class="line">  url.replace(<span class="regexp">/([^?&amp;=]+)=([^&amp;]+)/g</span>,</span><br><span class="line">  (_, k, v) =&gt; (q[k] = v))</span><br><span class="line">  <span class="keyword">return</span> q</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> a = parseQuery(<span class="string">&#x27;http://my.com?a=1&amp;b=2&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> b = parseQuery(<span class="string">&#x27;a=1&amp;b=2&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(a, b)</span><br></pre></td></tr></table></figure>
<h3 id="11-生成随机颜色"><a href="#11-生成随机颜色" class="headerlink" title="11.生成随机颜色"></a>11.生成随机颜色</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">randomColor</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;#&#x27;</span> + <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">0xffffff</span>).toString(<span class="number">16</span>).padEnd(<span class="number">6</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// padEnd() 方法会将当前字符串从末尾开始填充给定的字符串（如果需要会重复填充），直到达到给定的长度。填充是从当前字符串的末尾开始的。</span></span><br><span class="line"><span class="built_in">console</span>.log(randomColor())</span><br></pre></td></tr></table></figure>
<h3 id="12-js的atob和btoa函数"><a href="#12-js的atob和btoa函数" class="headerlink" title="12.js的atob和btoa函数"></a>12.js的atob和btoa函数</h3><p>btoa() 方法可以将一个二进制字符串（例如，将字符串中的每一个字节都视为一个二进制数据字节）编码为 Base64 编码的 ASCII 字符串.<br>atob() 对经过 base-64 编码的字符串进行解码.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> encodedData = <span class="built_in">window</span>.btoa(<span class="string">&quot;Hello, world&quot;</span>); <span class="comment">// 编码</span></span><br><span class="line"><span class="keyword">let</span> decodedData = <span class="built_in">window</span>.atob(encodedData); <span class="comment">// 解码</span></span><br><span class="line"><span class="built_in">console</span>.log(encodedData, decodedData)</span><br><span class="line"><span class="comment">// SGVsbG8sIHdvcmxk Hello, world</span></span><br></pre></td></tr></table></figure>
<h3 id="13-判断一个值是否是Promise-Like？"><a href="#13-判断一个值是否是Promise-Like？" class="headerlink" title="13.判断一个值是否是Promise Like？"></a>13.判断一个值是否是Promise Like？</h3><p>和Promise结构类似<br>Promise A+规范：<a target="_blank" rel="noopener" href="https://promisesaplus.com/">https://promisesaplus.com/</a><br>“promise”是一个具有符合本规范的then方法的对象或函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPromiseLike</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value !== <span class="literal">null</span> &amp;&amp; (<span class="keyword">typeof</span> value === <span class="string">&#x27;object&#x27;</span> || <span class="keyword">typeof</span> value === <span class="string">&#x27;function&#x27;</span>) &amp;&amp; (<span class="keyword">typeof</span> value.then === <span class="string">&#x27;function&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="14-手写一个Promise"><a href="#14-手写一个Promise" class="headerlink" title="14.手写一个Promise"></a>14.手写一个Promise</h3><p>promise是一个构造函数，带有then方法<br>它有三种状态：pending 挂起，任务进行中、fulfilled 完成、rejected 失败<br>then方法接收2个参数，onFulfilled 和 onRejected 都是可选参数，它们是异步执行的<br>可以多次对同一个promise调用then方法，从而注册多个onFulfilled或onRejected<br>then方法必须再次返回一个promise<br>Promise(resolve, reject), resolve, reject是函数,改变状态</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PENDING = <span class="string">&#x27;pending&#x27;</span></span><br><span class="line"><span class="keyword">const</span> FULLFILLED = <span class="string">&#x27;fulfilled&#x27;</span></span><br><span class="line"><span class="keyword">const</span> REJECTED = <span class="string">&#x27;rejected&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// promise是一个构造函数，带有then方法</span></span><br><span class="line"><span class="comment">// 它有三种状态：pending 挂起，任务进行中、fulfilled 完成、rejected 失败</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyPromise</span> </span>&#123;</span><br><span class="line">  #state = PENDING <span class="comment">// 私有属性，promise初始状态pending</span></span><br><span class="line">  #result = <span class="literal">undefined</span> <span class="comment">// 私有属性，promise结果</span></span><br><span class="line">  #handler = [] <span class="comment">// 保存每次调用then方法的回调onFulfilled, onRejected，resolve，reject</span></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">executor</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> resolve = <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 改变状态</span></span><br><span class="line">      <span class="built_in">this</span>.#changeState(FULLFILLED, data)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> reject = <span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 改变状态</span></span><br><span class="line">      <span class="built_in">this</span>.#changeState(REJECTED, reason)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      executor(resolve, reject)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      reject(error)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  #<span class="function"><span class="title">changeState</span>(<span class="params">state, result</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.#state !== PENDING) <span class="keyword">return</span> <span class="comment">// 状态一旦改变不可再更改</span></span><br><span class="line">    <span class="built_in">this</span>.#state = state</span><br><span class="line">    <span class="built_in">this</span>.#result = result</span><br><span class="line">    <span class="built_in">this</span>.#run() <span class="comment">// 异步的时候这里知道什么时候改变状态</span></span><br><span class="line">  &#125;</span><br><span class="line">  #<span class="function"><span class="title">isPromiseLike</span>(<span class="params">value</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> value !== <span class="literal">null</span> &amp;&amp; (<span class="keyword">typeof</span> value === <span class="string">&#x27;object&#x27;</span> || <span class="keyword">typeof</span> value === <span class="string">&#x27;function&#x27;</span>) &amp;&amp; (<span class="keyword">typeof</span> value.then === <span class="string">&#x27;function&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  #<span class="function"><span class="title">runMicroTask</span>(<span class="params">callback</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(callback, <span class="number">0</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  #<span class="function"><span class="title">run</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// fulfilled、rejected、pending</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.#state === PENDING) &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 遍历then方法的回调执行</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">this</span>.#handler.length) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; onFulfilled, onRejected, resolve, reject &#125; = <span class="built_in">this</span>.#handler.shift()</span><br><span class="line">      <span class="comment">// p.then传递参数 onFulfilled, onRejected：</span></span><br><span class="line">      <span class="comment">// 1.回调不是函数：p.then(null), 直接resolve， rejected</span></span><br><span class="line">      <span class="comment">// 2.回调是函数：函数有执行结果 p.then((res)=&gt; &#123;&#125;, err =&gt; &#123;&#125;)</span></span><br><span class="line">      <span class="comment">// 3.回调的函数的返回结果是promise</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.#state === FULLFILLED) &#123;</span><br><span class="line">        <span class="built_in">this</span>.#runMicroTask(<span class="function">() =&gt;</span> &#123; <span class="comment">// promise运行在微队列中</span></span><br><span class="line">          <span class="comment">// 回调不是函数</span></span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">typeof</span> onFulfilled !== <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">            resolve(<span class="built_in">this</span>.#result)</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 回调是函数</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">              <span class="keyword">const</span> data = onFulfilled(<span class="built_in">this</span>.#result) <span class="comment">// 回调的函数返回结果是promise</span></span><br><span class="line">              <span class="keyword">if</span> (<span class="built_in">this</span>.#isPromiseLike(data)) &#123;</span><br><span class="line">                data.then(resolve, reject)</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                resolve(data)</span><br><span class="line">              &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">              reject(error)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123; <span class="comment">// rejected</span></span><br><span class="line">        <span class="built_in">this</span>.#runMicroTask(<span class="function">() =&gt;</span> &#123; <span class="comment">// promise运行在微队列中</span></span><br><span class="line">          <span class="comment">// 回调不是函数</span></span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">typeof</span> onRejected !== <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">            reject(<span class="built_in">this</span>.#result)</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 回调是函数</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">              <span class="keyword">const</span> data = onRejected(<span class="built_in">this</span>.#result) <span class="comment">// 回调的函数返回结果是promise</span></span><br><span class="line">              <span class="keyword">if</span> (<span class="built_in">this</span>.#isPromiseLike(data)) &#123;</span><br><span class="line">                data.then(resolve, reject)</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                resolve(data)</span><br><span class="line">              &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">              reject(error)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// then方法接收2个参数，onFulfilled 和 onRejected 都是可选参数，它们是异步执行的</span></span><br><span class="line">  <span class="comment">// 可以多次对同一个promise调用then方法，从而注册多个onFulfilled或onRejected</span></span><br><span class="line">  <span class="comment">// then方法必须再次返回一个promise</span></span><br><span class="line">  <span class="function"><span class="title">then</span>(<span class="params">onFulfilled, onRejected</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> MyPromise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 如果是同步：状态直接是fulfilled/rejected</span></span><br><span class="line">      <span class="comment">// 异步：pending</span></span><br><span class="line">      <span class="comment">// 可多次调用、可能异步（pending）</span></span><br><span class="line">      <span class="comment">// 保存每次调用then方法的回调onFulfilled, onRejected，resolve，reject，等待完成即状态改变（#changeState）时调用</span></span><br><span class="line">      <span class="built_in">this</span>.#handler.push(&#123;</span><br><span class="line">        onFulfilled,</span><br><span class="line">        onRejected,</span><br><span class="line">        resolve,</span><br><span class="line">        reject</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="built_in">this</span>.#run()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> MyPromise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    reject(<span class="number">123</span>)</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// p.then(</span></span><br><span class="line"><span class="comment">//   null,</span></span><br><span class="line"><span class="comment">//   (err) =&gt; &#123;</span></span><br><span class="line"><span class="comment">//     console.log(&#x27;promise-fail1&#x27;, err)</span></span><br><span class="line"><span class="comment">//     return 456</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">// ).then(</span></span><br><span class="line"><span class="comment">//   (res) =&gt; &#123;</span></span><br><span class="line"><span class="comment">//     console.log(&#x27;promise-success2&#x27;, res)</span></span><br><span class="line"><span class="comment">//   &#125;,</span></span><br><span class="line"><span class="comment">//   (err) =&gt; &#123;</span></span><br><span class="line"><span class="comment">//     console.log(&#x27;promise-fail2&#x27;, err)</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">// )</span></span><br><span class="line"><span class="comment">// promise-fail1 123</span></span><br><span class="line"><span class="comment">// promise-success2 456</span></span><br><span class="line"></span><br><span class="line">p.then(</span><br><span class="line">  <span class="literal">null</span>,</span><br><span class="line">  (err) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;promise-fail1&#x27;</span>, err)</span><br><span class="line">    <span class="keyword">throw</span> <span class="number">456</span></span><br><span class="line">  &#125;</span><br><span class="line">).then(</span><br><span class="line">  (res) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;promise-success2&#x27;</span>, res)</span><br><span class="line">  &#125;,</span><br><span class="line">  (err) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;promise-fail2&#x27;</span>, err)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"><span class="comment">// promise-fail1 123</span></span><br><span class="line"><span class="comment">// promise-fail2 456</span></span><br></pre></td></tr></table></figure>
<h3 id="15-语义化版本"><a href="#15-语义化版本" class="headerlink" title="15.语义化版本"></a>15.语义化版本</h3><p>x.y.z ， x、y、z都是数字，只能增加<br>x：主版本，breaking update， 不兼容式升级，比如vue2-vue3<br>y：次版本，更新兼容以前版本<br>z：修订版本，修复bug，优化等</p>
<p>1.8.2-&gt;2.0.0<br>1.8.2-&gt;1.9.0</p>
<p>高位版本增加，低位版本要清零</p>
<p>0.1.0，主版本0表示测试版本，未正式发布<br>1.2.3-alpha，alpha预发布版本</p>
<h3 id="16-axios"><a href="#16-axios" class="headerlink" title="16.axios"></a>16.axios</h3><p>Axios 是一个基于 promise 的 HTTP 库，可以用在浏览器和 node.js 中。</p>
<p>特性</p>
<p>  从浏览器中创建 XMLHttpRequests<br>  从 node.js 创建 http 请求<br>  支持 Promise API<br>  拦截请求和响应<br>  转换请求数据和响应数据<br>  取消请求<br>  自动转换 JSON 数据<br>  客户端支持防御 XSRF</p>
<h3 id="17-数据埋点"><a href="#17-数据埋点" class="headerlink" title="17.数据埋点"></a>17.数据埋点</h3><p>服务监控：产品（ARMS、神策，sentry免费）</p>
<p>  错误监控<br>  性能监控<br>  行为监控</p>
<p>数据埋点：</p>
<p>  侵入：监控用户行为，关键业务代码处埋点<br>  非侵入：错误、性能监控，对代码等无侵入，在入口文件收集即可</p>
<h3 id="18-web性能指标"><a href="#18-web性能指标" class="headerlink" title="18.web性能指标"></a>18.web性能指标</h3><p>评定web应用程序用户体验是否优秀：</p>
<p>  RAIL模型：Response响应时间、Animation动画流畅不丢帧不跳帧、Idle页面运行过程是否给用户留够交互时间、load加载时间</p>
<p>衡量的关键指标：</p>
<ul>
<li>FCP：首次内容加载经过的时间，从白屏到第一个有意义的内容（可以是文字、图片、按钮或背景色元素，看得见的内容）出现的时间</li>
<li>LCP：最大内容绘制时间，屏幕内最大的元素加载出来</li>
<li>CLS：累计偏移，前面有内容突然加载出来导致内容往后挤，破坏用户的操作，比如点击按钮时，前面有内容加载导致按钮往后排，点击到别的按钮等</li>
<li>TBT：total blocking time总的阻塞时间，从FCP到TTI的时间，TTI表示用户可交互的时间点</li>
</ul>
<p>使用Chrome lighthouse工具衡量这些指标</p>
<p>了解用户真实指标需要收集，第三方库web vitals</p>
<h3 id="19-从视频文件中提取画面帧"><a href="#19-从视频文件中提取画面帧" class="headerlink" title="19.从视频文件中提取画面帧"></a>19.从视频文件中提取画面帧</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>提取视频文件中的画面帧<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;video&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> file = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;input[type=file]&#x27;</span>)</span></span><br><span class="line"><span class="javascript">    file.onchange = <span class="keyword">async</span> (e) =&gt; &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(e.target.files)</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> file = e.target.files[<span class="number">0</span>]</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 提取第10秒的帧并img预览</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// const frame = await captureFrame(file, 10)</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// createPreview(frame)</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// console.log(frame)</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 每隔1秒提取帧展示</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; <span class="number">10</span>; i++) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> frame = <span class="keyword">await</span> captureFrame(file, <span class="number">1</span> * i)</span></span><br><span class="line">        createPreview(frame)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">drawVideo</span>(<span class="params">vdo</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> cvs = <span class="built_in">document</span>.createElement(<span class="string">&#x27;canvas&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> ctx = cvs.getContext(<span class="string">&#x27;2d&#x27;</span>)</span></span><br><span class="line">        cvs.width = vdo.videoWidth</span><br><span class="line">        cvs.height = vdo.videoHeight</span><br><span class="line">        ctx.drawImage(vdo, 0, 0, cvs.width, cvs.height)</span><br><span class="line"><span class="javascript">        cvs.toBlob(<span class="function">(<span class="params">blob</span>) =&gt;</span> &#123;</span></span><br><span class="line">          resolve(&#123;</span><br><span class="line">            blob,</span><br><span class="line">            url: URL.createObjectURL(blob)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">captureFrame</span>(<span class="params">vdoFile, time = <span class="number">0</span></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> vdo = <span class="built_in">document</span>.createElement(<span class="string">&#x27;video&#x27;</span>)</span></span><br><span class="line">        vdo.currentTime = time</span><br><span class="line"><span class="javascript">        vdo.muted = <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">        vdo.autoplay = <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">        vdo.oncanplay = <span class="keyword">async</span> () =&gt; &#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">const</span> frame = <span class="keyword">await</span> drawVideo(vdo)</span></span><br><span class="line">          resolve(frame)</span><br><span class="line">        &#125;</span><br><span class="line">        vdo.src = URL.createObjectURL(vdoFile)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">createPreview</span>(<span class="params">frame</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> img = <span class="built_in">document</span>.createElement(<span class="string">&#x27;img&#x27;</span>)</span></span><br><span class="line">      img.src = frame.url</span><br><span class="line"><span class="javascript">      <span class="built_in">document</span>.body.append(img)</span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="20-ESMoudle的工作原理"><a href="#20-ESMoudle的工作原理" class="headerlink" title="20.ESMoudle的工作原理"></a>20.ESMoudle的工作原理</h3><p>静态导入：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> A <span class="keyword">from</span> <span class="string">&#x27;./A.js&#x27;</span></span><br></pre></td></tr></table></figure>
<p>动态导入：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>(<span class="string">&#x27;./dynmaic.js&#x27;</span>).then(<span class="function"><span class="params">d</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(d.default)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>静态导入解析是在运行之前发生的，动态导入的解析是在运行时发生的。<br>比如import A from ‘./A.js’，会先将A.js转换为完整的引入url：***/A.js，再下载，先模块解析，再运行<br>动态导入：完整URL-》下载js-》解析-》运行-》然后执行then里面语句</p>
<h3 id="21-defineProperty和proxy"><a href="#21-defineProperty和proxy" class="headerlink" title="21.defineProperty和proxy"></a>21.defineProperty和proxy</h3><p>defineProperty是对象基本操作（内部函数调用），用来定义属性描述符的，不能暴露给开发者，比如get读取属性会调用has方法，delete obj[k] 调用内部函数delete<br>proxy针对所有的操作都可以拦截，也暴露了内部方法。</p>
<h3 id="22-垃圾回收与内存泄露"><a href="#22-垃圾回收与内存泄露" class="headerlink" title="22.垃圾回收与内存泄露"></a>22.垃圾回收与内存泄露</h3><p>程序运行需要内存空间，可能某一块内存空间不再需要，这块内存空间称为垃圾，回收垃圾的叫垃圾回收器<br>内存泄露：一块内存空间不需要但垃圾回收器没法回收的内存就是内存泄露</p>
<p>垃圾回收机制：标记清除算法、引用计数算法（不用）</p>
<h3 id="23-解析DOM树"><a href="#23-解析DOM树" class="headerlink" title="23.解析DOM树"></a>23.解析DOM树</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeTag</span>(<span class="params">fragment</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">new</span> DOMParser().parseFromString(fragment, <span class="string">&#x27;text/html&#x27;</span>).body.textContent || <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">removeTag(<span class="string">`&lt;div class=&quot;container&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;h1&gt;DOM Parser&lt;/h1&gt;</span></span><br><span class="line"><span class="string">    &lt;ul&gt;</span></span><br><span class="line"><span class="string">      &lt;li&gt;Lorem.&lt;/li&gt;</span></span><br><span class="line"><span class="string">      &lt;li&gt;Maiores.&lt;/li&gt;</span></span><br><span class="line"><span class="string">      &lt;li&gt;Sapiente!&lt;/li&gt;</span></span><br><span class="line"><span class="string">      &lt;li&gt;Doloremque.&lt;/li&gt;</span></span><br><span class="line"><span class="string">    &lt;/ul&gt;</span></span><br><span class="line"><span class="string">  &lt;/div&gt;`</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// output:</span></span><br><span class="line"><span class="comment">// DOM Parser</span></span><br><span class="line">        </span><br><span class="line"><span class="comment">// Lorem.</span></span><br><span class="line"><span class="comment">// Maiores.</span></span><br><span class="line"><span class="comment">// Sapiente!</span></span><br><span class="line"><span class="comment">// Doloremque.</span></span><br><span class="line">        </span><br></pre></td></tr></table></figure>
  </div>
  <div>
      <!-- <a href="https://github.com/zhaojunyan9528/ZJY.github.io/tree/myblog/source/_posts/日常随记.md" target="_blank">编辑</a> -->
  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/ZJY.github.io/">首页</a></li>
         
          <li><a href="/ZJY.github.io/archives/">归档</a></li>
         
          <li><a href="/ZJY.github.io/tags">标签</a></li>
         
          <li><a href="/ZJY.github.io/categories">分类</a></li>
         
          <li><a href="/ZJY.github.io/search/">搜索</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#2023-11-03"><span class="toc-number">1.</span> <span class="toc-text">2023-11-03</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#sockjs-node-info-t-%E6%97%B6%E9%97%B4%E6%88%B3"><span class="toc-number">1.1.</span> <span class="toc-text">&#x2F;sockjs-node&#x2F;info?t&#x3D;${时间戳}</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#postinstall%E5%B9%B2%E4%BB%80%E4%B9%88%E7%9A%84%EF%BC%9F%EF%BC%9F%EF%BC%9F"><span class="toc-number">1.2.</span> <span class="toc-text">postinstall干什么的？？？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E6%89%A9%E5%B1%95%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">1.3.</span> <span class="toc-text">数组扩展运算符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2023-11-22"><span class="toc-number">2.</span> <span class="toc-text">2023-11-22</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF"><span class="toc-number">2.1.</span> <span class="toc-text">事件循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3js%E4%B8%AD%E7%9A%84%E5%BC%82%E6%AD%A5%EF%BC%9F"><span class="toc-number">2.2.</span> <span class="toc-text">如何理解js中的异步？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#js%E4%B8%AD%E8%AE%A1%E6%97%B6%E5%99%A8%E8%83%BD%E5%81%9A%E5%88%B0%E7%B2%BE%E5%87%86%E8%AE%A1%E6%97%B6%E5%90%97%EF%BC%9F"><span class="toc-number">2.3.</span> <span class="toc-text">js中计时器能做到精准计时吗？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E6%B8%B2%E6%9F%93%E5%8E%9F%E7%90%86"><span class="toc-number">2.4.</span> <span class="toc-text">浏览器的渲染原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%A7%A3%E6%9E%90HTML"><span class="toc-number">2.4.1.</span> <span class="toc-text">1.解析HTML</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E6%A0%B7%E5%BC%8F%E8%AE%A1%E7%AE%97-recalculate-style"><span class="toc-number">2.4.2.</span> <span class="toc-text">2、样式计算- recalculate style</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E5%B8%83%E5%B1%80-Layout"><span class="toc-number">2.4.3.</span> <span class="toc-text">3、布局-Layout</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E5%88%86%E5%B1%82"><span class="toc-number">2.4.4.</span> <span class="toc-text">4、分层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E3%80%81%E7%BB%98%E5%88%B6"><span class="toc-number">2.4.5.</span> <span class="toc-text">5、绘制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%E3%80%81%E5%88%86%E5%9D%97"><span class="toc-number">2.4.6.</span> <span class="toc-text">6、分块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E5%85%89%E6%A0%85%E5%8C%96"><span class="toc-number">2.4.7.</span> <span class="toc-text">7.光栅化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-%E7%94%BB"><span class="toc-number">2.4.8.</span> <span class="toc-text">8.画</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFreflow%EF%BC%9F"><span class="toc-number">2.5.</span> <span class="toc-text">什么是reflow？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFrepaint%EF%BC%9F"><span class="toc-number">2.6.</span> <span class="toc-text">什么是repaint？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88transform%E7%9A%84%E6%95%88%E7%8E%87%E9%AB%98%EF%BC%9F"><span class="toc-number">2.7.</span> <span class="toc-text">为什么transform的效率高？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2023-11-27"><span class="toc-number">3.</span> <span class="toc-text">2023-11-27</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%81%B0%E9%98%B6%E6%BB%A4%E9%95%9C"><span class="toc-number">3.1.</span> <span class="toc-text">1.灰阶滤镜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-js%E5%AE%9E%E7%8E%B0%E6%97%A0%E9%99%90%E5%BE%AA%E7%8E%AF%E8%BD%AE%E6%92%AD%E5%9B%BE"><span class="toc-number">3.2.</span> <span class="toc-text">2.js实现无限循环轮播图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-sticky%E5%AE%9A%E4%BD%8D"><span class="toc-number">3.3.</span> <span class="toc-text">3.sticky定位</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-visibilitychange-%E7%A6%BB%E5%BC%80-%E8%BF%9B%E5%85%A5%E6%A0%87%E7%AD%BE%E9%A1%B5%E4%BA%8B%E4%BB%B6"><span class="toc-number">3.4.</span> <span class="toc-text">4.visibilitychange 离开&#x2F;进入标签页事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E9%9B%B6%E5%AE%BD%E5%AD%97%E7%AC%A6"><span class="toc-number">3.5.</span> <span class="toc-text">5.零宽字符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%B1%82%E5%92%8C"><span class="toc-number">3.6.</span> <span class="toc-text">6.求和</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E6%96%87%E5%AD%97%E6%8F%8F%E8%BE%B9text-stroke"><span class="toc-number">3.7.</span> <span class="toc-text">7.文字描边text-stroke</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-js%E7%B1%BB%E9%87%8C%E5%88%9B%E5%BB%BA%E7%A7%81%E6%9C%89%E5%AD%97%E6%AE%B5"><span class="toc-number">3.8.</span> <span class="toc-text">8.js类里创建私有字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E4%B8%8B%E6%8B%89%E8%8F%9C%E5%8D%95%E7%9A%84%E8%BF%87%E6%B8%A1%E6%95%88%E6%9E%9C"><span class="toc-number">3.9.</span> <span class="toc-text">9.下拉菜单的过渡效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E8%B7%A8%E5%9F%9Fcors"><span class="toc-number">3.10.</span> <span class="toc-text">10.跨域cors</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E8%AF%B7%E6%B1%82"><span class="toc-number">3.10.1.</span> <span class="toc-text">简单请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E8%AF%B7%E6%B1%82%E7%9A%84%E4%BA%A4%E4%BA%92%E8%A7%84%E8%8C%83"><span class="toc-number">3.10.2.</span> <span class="toc-text">简单请求的交互规范</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9C%80%E8%A6%81%E9%A2%84%E6%A3%80%E7%9A%84%E8%AF%B7%E6%B1%82"><span class="toc-number">3.10.3.</span> <span class="toc-text">需要预检的请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%99%84%E5%B8%A6%E8%BA%AB%E4%BB%BD%E5%87%AD%E8%AF%81%E7%9A%84%E8%AF%B7%E6%B1%82"><span class="toc-number">3.10.4.</span> <span class="toc-text">附带身份凭证的请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A5%E5%85%85"><span class="toc-number">3.10.5.</span> <span class="toc-text">补充</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E8%A7%A3%E6%9E%90url%E4%B8%AD%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-number">3.11.</span> <span class="toc-text">10.解析url中的参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E7%94%9F%E6%88%90%E9%9A%8F%E6%9C%BA%E9%A2%9C%E8%89%B2"><span class="toc-number">3.12.</span> <span class="toc-text">11.生成随机颜色</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-js%E7%9A%84atob%E5%92%8Cbtoa%E5%87%BD%E6%95%B0"><span class="toc-number">3.13.</span> <span class="toc-text">12.js的atob和btoa函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-%E5%88%A4%E6%96%AD%E4%B8%80%E4%B8%AA%E5%80%BC%E6%98%AF%E5%90%A6%E6%98%AFPromise-Like%EF%BC%9F"><span class="toc-number">3.14.</span> <span class="toc-text">13.判断一个值是否是Promise Like？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AAPromise"><span class="toc-number">3.15.</span> <span class="toc-text">14.手写一个Promise</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-%E8%AF%AD%E4%B9%89%E5%8C%96%E7%89%88%E6%9C%AC"><span class="toc-number">3.16.</span> <span class="toc-text">15.语义化版本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-axios"><span class="toc-number">3.17.</span> <span class="toc-text">16.axios</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-%E6%95%B0%E6%8D%AE%E5%9F%8B%E7%82%B9"><span class="toc-number">3.18.</span> <span class="toc-text">17.数据埋点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-web%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-number">3.19.</span> <span class="toc-text">18.web性能指标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-%E4%BB%8E%E8%A7%86%E9%A2%91%E6%96%87%E4%BB%B6%E4%B8%AD%E6%8F%90%E5%8F%96%E7%94%BB%E9%9D%A2%E5%B8%A7"><span class="toc-number">3.20.</span> <span class="toc-text">19.从视频文件中提取画面帧</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-ESMoudle%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">3.21.</span> <span class="toc-text">20.ESMoudle的工作原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-defineProperty%E5%92%8Cproxy"><span class="toc-number">3.22.</span> <span class="toc-text">21.defineProperty和proxy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%B8%8E%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2"><span class="toc-number">3.23.</span> <span class="toc-text">22.垃圾回收与内存泄露</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-%E8%A7%A3%E6%9E%90DOM%E6%A0%91"><span class="toc-number">3.24.</span> <span class="toc-text">23.解析DOM树</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&text=日常随记"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&title=日常随记"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&is_video=false&description=日常随记"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=日常随记&body=Check out this article: https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&title=日常随记"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&title=日常随记"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&title=日常随记"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&title=日常随记"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&name=日常随记&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://zhaojunyan9528.github.io/ZJY.github.io/2023/11/03/%E6%97%A5%E5%B8%B8%E9%9A%8F%E8%AE%B0/&t=日常随记"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> 菜单</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> 目录</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> 分享</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2020-2023
    ZJY
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/ZJY.github.io/">首页</a></li>
         
          <li><a href="/ZJY.github.io/archives/">归档</a></li>
         
          <li><a href="/ZJY.github.io/tags">标签</a></li>
         
          <li><a href="/ZJY.github.io/categories">分类</a></li>
         
          <li><a href="/ZJY.github.io/search/">搜索</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/ZJY.github.io/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/ZJY.github.io/lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="/ZJY.github.io/lib/jquery/jquery.min.js"></script>


<script src="/ZJY.github.io/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="/ZJY.github.io/lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"复制到粘贴板!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "复制成功!");
      e.clearSelection();
    })
  })
  </script>


<script src="/ZJY.github.io/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->


</body>
</html>
